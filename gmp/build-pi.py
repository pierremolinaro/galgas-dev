#! /usr/bin/env python
# -*- coding: UTF-8 -*-

#----------------------------------------------------------------------------------------------------------------------*

import sys, os, subprocess

#----------------------------------------------------------------------------------------------------------------------*
#   FOR PRINTING IN COLOR                                                                                              *
#----------------------------------------------------------------------------------------------------------------------*

def BLACK () :
  return '\033[90m'

#----------------------------------------------------------------------------------------------------------------------*

def RED () :
  return '\033[91m'

#----------------------------------------------------------------------------------------------------------------------*

def GREEN () :
  return '\033[92m'

#----------------------------------------------------------------------------------------------------------------------*

def YELLOW () :
  return '\033[93m'

#----------------------------------------------------------------------------------------------------------------------*

def BLUE () :
  return '\033[94m'

#----------------------------------------------------------------------------------------------------------------------*

def MAGENTA () :
  return '\033[95m'

#----------------------------------------------------------------------------------------------------------------------*

def CYAN () :
  return '\033[96m'

#----------------------------------------------------------------------------------------------------------------------*

def WHITE () :
  return '\033[97m'

#----------------------------------------------------------------------------------------------------------------------*

def ENDC () :
  return '\033[0m'

#----------------------------------------------------------------------------------------------------------------------*

def BOLD () :
  return '\033[1m'

#----------------------------------------------------------------------------------------------------------------------*

def UNDERLINE () :
  return '\033[4m'

#----------------------------------------------------------------------------------------------------------------------*

def BLINK () :
  return '\033[5m'

#----------------------------------------------------------------------------------------------------------------------*

def BOLD_BLUE () :
  return BOLD () + BLUE ()

#----------------------------------------------------------------------------------------------------------------------*

def BOLD_GREEN () :
  return BOLD () + GREEN ()

#----------------------------------------------------------------------------------------------------------------------*

def BOLD_RED () :
  return BOLD () + RED ()

#----------------------------------------------------------------------------------------------------------------------*
#   runCommand                                                                                                         *
#----------------------------------------------------------------------------------------------------------------------*

def runCommand (cmd) :
  cmdAsString = ""
  for s in cmd:
    if (s == "") or (s.find (" ") >= 0):
      cmdAsString += '"' + s + '" '
    else:
      cmdAsString += s + ' '
  print BOLD_BLUE () + cmdAsString + ENDC ()
  childProcess = subprocess.Popen (cmd)
  childProcess.wait ()
  if childProcess.returncode != 0 :
    sys.exit (childProcess.returncode)

#----------------------------------------------------------------------------------------------------------------------*
#    MAIN                                                                                                              *
#----------------------------------------------------------------------------------------------------------------------*

PRODUCT_DIR = "GMP-PRODUCT"

#----------------------------------------------------------------- Get script absolute path
scriptDir = os.path.dirname (os.path.abspath (sys.argv [0]))
os.chdir (scriptDir)
#----------------------------------------------------------------- Build
runCommand (["gcc",
             "-O3",
             "-I", PRODUCT_DIR + "/include",
             "gmp-chudnovsky.c",
             "-o", "gmp-chudnovsky",
             "-L", PRODUCT_DIR + "/lib",
             "-lm", "-lgmp"
            ])
runCommand (["./gmp-chudnovsky", "1000000", "1"])

#----------------------------------------------------------------------------------------------------------------------*

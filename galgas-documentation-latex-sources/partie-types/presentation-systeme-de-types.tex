%!TEX encoding = UTF-8 Unicode
%!TEX root = ../galgas-book.tex

\chapter{Présentation du système de types}






\section{Opérations définies pour tous les types}

Tout type implémente implicitement :
\begin{itemize}
  \item l'opérateur \ggs+==+ ;
  \item l'opérateur \ggs+!=+ ;
  \item le \emph{getter} \ggs+description+ ;
  \item le \emph{getter} \ggs+dynamicType+ ;
  \item le \emph{getter} \ggs+object+.
\end{itemize}

La plupart des types implémentent le constructeur par défaut \ggs+default+ (voir \refSubsectionPage{constructeurParDefaut}). 


\subsection{L'opérateur \texttt{==}}

\begin{galgas}
func == ?@T ?@T -> @bool
\end{galgas}

Cet opérateur permet de tester l'identité entre de deux objets de même type. 

\subsection{L'opérateur \texttt{!=}}

\begin{galgas}
func != ?@T ?@T -> @bool
\end{galgas}

Cet opérateur permet de tester la non identité entre de deux objets de même type. Il renvoie le complément logique du résultat de l'application de l'opérateur \ggs+==+.





\subsection{Le getter \texttt{description}}

\begin{galgas}
getter @T description -> @string
\end{galgas}

Le \emph{getter} \ggs+description+ retourne une description textuelle du receveur, la même que celle affichée par l'instruction \ggs+log+ (\refSectionPage{instructionLog}).



\subsection{Le getter \texttt{dynamicType}}

\begin{galgas}
getter @T dynamicType -> @type
\end{galgas}

Le \emph{getter} \ggs+dynamicType+ retourne un objet de type \ggs+@type+, dont la valeur représente le type dynamique du receveur (voir aussi la définition du type \refTypePredefini{type}).

Pour tous les types sauf les classes, leurs instances sont du même type que le type statique :

\begin{galgas}
@uint n = 2
@type t = [n dynamicType]
log t # Affiche @uint
\end{galgas}

Pour les instances de classes, le jeu des affectations polymorphiques peut entraîner que le type dynamique soit une classe héritière du type statique.

Par exemple, en déclarant :
\begin{galgas}
class @A { }
class @B : @A { }
\end{galgas}

Et avec la séquence d'instructions suivante :
\begin{galgas}
@B b = .new
@type t = [b dynamicType]
log t # Affiche @B, type statique de b : @B
@A a = b # Affectation polymorphique
t = [a dynamicType]
log t # Affiche @B, type statique de a : @A
\end{galgas}





\subsection{Le getter \texttt{object}}

\begin{galgas}
getter @T object -> @object
\end{galgas}


Le \emph{getter} \ggs+object+ retourne un objet de type \ggs+@object+. Une variable de type \refTypePredefini{object} peut encapsuler tout type de valeur.



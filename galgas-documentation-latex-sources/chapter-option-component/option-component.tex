%!TEX encoding = UTF-8 Unicode
%!TEX root = ../galgas-book.tex

%--------------------------------------------------------------
\chapterLabel{Le composant \texttt{option}}{composantOption}
%-------------------------------------------------------------


Le composant \galgas{option} permet de définir des options qui sont appelables à partir de la ligne de commande. Dans le code, la valeur d'une option est obtenue à partir de l'opérande \emph{appel d'une option}, décrit dans la \refSubsectionPage{appelOption}.

Voici l'exemple d'un composant \galgas{option} qui déclare une option (évidement, un composant \galgas{option} peut déclarer un nombre quelconque d'options) :
\begin{galgascode}
option nom_composant {
  @bool nom_option : 'S', "asm" -> "Extract assembly code"
}
\end{galgascode}


\section{Déclaration d'une option}

La déclaration d'une option présente le syntaxe suivante :
\begin{galgascode}
  @T nom_option : caractere, chaine -> description
\end{galgascode}

Les cinq champs qui définissent une option sont :
\begin{itemize}
  \item \galgas{@T} : le type de l'option ; trois types sont autorisés : \galgas{@bool}, \galgas{@uint} et \galgas{@string} ;
  \item \galgas{nom_option} : c'est le nom, interne à GALGAS, qui permettra de désigner l'option dans l'\emph{appel d'une option} (\refSubsectionPage{appelOption}) ; 
  \item \galgas{caractere} : le caractère qui activera l'option dans la ligne de commande ; par exemple, en écrivant \galgas{'A'}, l'option sera activée par \texttt{-A} dans la ligne de commande ; si vous ne voulez pas d'activation par un caractère, écrivez \galgas{'\\0'} ;
  \item \galgas{chaine} : la chaîne de caractères qui activera l'option dans la ligne de commande ; par exemple, en écrivant \galgas{"ABEDEF"}, l'option sera activée par \texttt{-{}-ABCDEF} dans la ligne de commande ; si vous ne voulez pas d'activation par une chaîne, écrivez \galgas{""} ;
  \item \galgas{description} : une chaîne de caractère qui contient une description de l'option, qui sera affichée par l'option \texttt{-{}-help} de votre compilateur.
\end{itemize}








\section{Option booléenne}

Le champ qui définit le type de l'option est \galgas{@bool} ; par exemple :
\begin{galgascode}
  @bool nom_option : 'S', "asm" -> "Extract assembly code"
\end{galgascode}

Dans la ligne de commande, l'option est activée par \texttt{-A} ou \texttt{-{}-asm}.

Par défaut, l'option n'est pas activée, et sa valeur associée est \galgas{false}. Quand l'option est activée dans la ligne de commande, sa valeur associée est \galgas{true}.








\section{Option entière}

Le champ qui définit le type de l'option est \galgas{@uint} ; par exemple :
\begin{galgascode}
  @uint nom_option : 'M', "max-iterations-count" -> "Max of iteration count"
\end{galgascode}

Dans la ligne de commande, l'option est activée par \texttt{-N=xxx} ou \texttt{-{}-max-iterations-count=xxx}, où \texttt{xxx} est un nombre entier positif ou nul (et inférieur ou égal à $2^{32}-1$).

Par défaut, l'option n'est pas activée, et sa valeur associée est $0$. Quand l'option est activée dans la ligne de commande, sa valeur associée est la valeur \texttt{xxx}. Ainsi, l'option \texttt{-N=0}, comme l'option \texttt{-{}-max-iterations-count=0} n'a aucun effet.










\section{Option chaîne de caractères}

Le champ qui définit le type de l'option est \galgas{@string} ; par exemple :
\begin{galgascode}
  @string nom_option : 'F', "file-name" -> "File name"
\end{galgascode}

Dans la ligne de commande, l'option est activée par \texttt{-F=abc} ou \texttt{-{}-file-name=abc}, où \texttt{abc} est une chaîne de caractères sans espaces. Si vous voulez entrer une chaîne de caractères qui comprend des espaces, écrivez : \texttt{"-F=abc"} ou \texttt{"-{}-file-name=abc"}.

Par défaut, l'option n'est pas activée, et sa valeur associée est la chaîne vide. Quand l'option est activée dans la ligne de commande, sa valeur associée est la chaîne \texttt{abc}. Ainsi, l'option \texttt{-F=}, comme l'option \texttt{-{}-file-name=} n'a aucun effet.



#---------------------------------------------------------------------------*
#                                                                           *
# MAKEFILE for building "%PROJECT_NAME%" 64-bits command line tools for Mac OS X   *
#                                                                           *
#---------------------------------------------------------------------------*

#---------------------------------------------------------------------------*
#                                                                           *
#                               Executables                                 *
#                                                                           *
#---------------------------------------------------------------------------*

EXECUTABLE := %PROJECT_NAME%64
EXECUTABLE_DEBUG := %PROJECT_NAME%64_debug

#---------------------------------------------------------------------------*
#                                                                           *
#                  Install directory (for "install" goal)                   *
#                                                                           *
#---------------------------------------------------------------------------*

INSTALL_DIR := /usr/local/bin

#---------------------------------------------------------------------------*
#                                                                           *
#                        'all' goal                                         *
#                                                                           *
#---------------------------------------------------------------------------*

all:$(EXECUTABLE) $(EXECUTABLE_DEBUG)

#---------------------------------------------------------------------------*
#                                                                           *
#                        'clean' goal                                       *
#                                                                           *
#---------------------------------------------------------------------------*

clean:
	rm -f $(EXECUTABLE) $(EXECUTABLE_DEBUG)

#---------------------------------------------------------------------------*
#                                                                           *
#                      Build ppc executable                                 *
#                                                                           *
#---------------------------------------------------------------------------*

../makefile_macosx_ppc/\%:
	$(MAKE) -C ../makefile_macosx_ppc -f makefile64 $<

#---------------------------------------------------------------------------*
#                                                                           *
#                      Build i386 executable                                *
#                                                                           *
#---------------------------------------------------------------------------*

../makefile_macosx_i386/\%:
	$(MAKE) -C ../makefile_macosx_i386 -f makefile64 $<

#---------------------------------------------------------------------------*
#                                                                           *
#                      Build EXECUTABLES                                    *
#                                                                           *
#---------------------------------------------------------------------------*

$(EXECUTABLE):../makefile_macosx_ppc/$(EXECUTABLE) ../makefile_macosx_i386/$(EXECUTABLE)
	lipo -create ../makefile_macosx_ppc/$(EXECUTABLE) ../makefile_macosx_i386/$(EXECUTABLE) -output $(EXECUTABLE)
	lipo -info $(EXECUTABLE)

#---------------------------------------------------------------------------*

$(EXECUTABLE_DEBUG):../makefile_macosx_ppc/$(EXECUTABLE_DEBUG) ../makefile_macosx_i386/$(EXECUTABLE_DEBUG)
	lipo -create ../makefile_macosx_ppc/$(EXECUTABLE_DEBUG) ../makefile_macosx_i386/$(EXECUTABLE_DEBUG) -output $(EXECUTABLE_DEBUG)
	lipo -info $(EXECUTABLE_DEBUG)

#---------------------------------------------------------------------------*

#---------------------------------------------------------------------------*
#                                                                           *
#  metamodel that defines expression                                        *
#                                                                           *
#  Copyright (C) 2007, ..., 2010 Pierre Molinaro.                           *
#                                                                           *
#  e-mail : molinaro@irccyn.ec-nantes.fr                                    *
#                                                                           *
#  This program is free software; you can redistribute it and/or modify it  *
#  under the terms of the GNU General Public License as published by the    *
#  Free Software Foundation.                                                *
#                                                                           *
#  This program is distributed in the hope it will be useful, but WITHOUT   *
#  ANY WARRANTY; without even the implied warranty of MERCHANDIBILITY or    *
#  FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for *
#   more details.                                                           *
#                                                                           *
#---------------------------------------------------------------------------*

semantics semanticsDecoratedTypes :
  import "semanticContext.gSemantics" ;
  import semantics semanticContext in "semanticContext.gSemantics" ;

#---------------------------------------------------------------------------*

abstract class @semanticExpressionForGeneration {
  @unifiedTypeMapProxy mType ;
  @location mLocation ;
}

##---------------------------------------------------------------------------*

list @semanticExpressionListForGeneration {
  @semanticExpressionForGeneration mExpression ;
}

#---------------------------------------------------------------------------*

class @selfInExpressionForGeneration extends @semanticExpressionForGeneration {
  @string mSelfCppName ;
}

##---------------------------------------------------------------------------*

class @hereExpressionForGeneration extends @semanticExpressionForGeneration {
}

##---------------------------------------------------------------------------*

class @trueExpressionForGeneration extends @semanticExpressionForGeneration {
}

##---------------------------------------------------------------------------*

class @falseExpressionForGeneration extends @semanticExpressionForGeneration {
}

##---------------------------------------------------------------------------*

class @literalCharExpressionForGeneration extends @semanticExpressionForGeneration {
  @char mCharacter ;
}

##---------------------------------------------------------------------------*

class @literalStringExpressionForGeneration extends @semanticExpressionForGeneration {
  @string mString ;
}

##---------------------------------------------------------------------------*

class @literalDoubleExpressionForGeneration extends @semanticExpressionForGeneration {
  @double mValue ;
}

##---------------------------------------------------------------------------*

class @literalUIntExpressionForGeneration extends @semanticExpressionForGeneration {
  @uint mValue ;
}

##---------------------------------------------------------------------------*

class @literalUInt64ExpressionForGeneration extends @semanticExpressionForGeneration {
  @uint64 mValue ;
}

##---------------------------------------------------------------------------*

class @literalSIntExpressionForGeneration extends @semanticExpressionForGeneration {
  @sint mValue ;
}

##---------------------------------------------------------------------------*

class @literalSInt64ExpressionForGeneration extends @semanticExpressionForGeneration {
  @sint64 mValue ;
}

#---------------------------------------------------------------------------*

class @constructorExpressionForGeneration extends @semanticExpressionForGeneration {
  @string mConstructorName ;
  @semanticExpressionListForGeneration mEffectiveParameterList ;
  @bool mHasCompilerArgument ;
}

##---------------------------------------------------------------------------*

class @readerCallExpressionForGeneration extends @semanticExpressionForGeneration {
  @semanticExpressionForGeneration mReceiverExpression ;
  @string mReaderName ;
  @semanticExpressionListForGeneration mExpressions ;
  @string mImplicitConversionReader ;
}

#---------------------------------------------------------------------------*

class @optionValueExpressionForGeneration extends @semanticExpressionForGeneration {
  @string mOptionComponentName ;
  @string mOptionEntryName ;
}

#---------------------------------------------------------------------------*

class @optionCharExpressionForGeneration extends @semanticExpressionForGeneration {
  @string mOptionComponentName ;
  @string mOptionEntryName ;
}

#---------------------------------------------------------------------------*

class @optionStringExpressionForGeneration extends @semanticExpressionForGeneration {
  @string mOptionComponentName ;
  @string mOptionEntryName ;
}

#---------------------------------------------------------------------------*

class @optionCommentExpressionForGeneration extends @semanticExpressionForGeneration {
  @string mOptionComponentName ;
  @string mOptionEntryName ;
}

#---------------------------------------------------------------------------*

class @concatExpressionForGeneration extends @semanticExpressionForGeneration {
  @semanticExpressionForGeneration mLeftExpression ;
  @semanticExpressionForGeneration mRightExpression ;
}

#---------------------------------------------------------------------------*

class @orExpressionForGeneration extends @semanticExpressionForGeneration {
  @semanticExpressionForGeneration mLeftExpression ;
  @semanticExpressionForGeneration mRightExpression ;
}

#---------------------------------------------------------------------------*

class @xorExpressionForGeneration extends @semanticExpressionForGeneration {
  @semanticExpressionForGeneration mLeftExpression ;
  @semanticExpressionForGeneration mRightExpression ;
}

#---------------------------------------------------------------------------*

class @andExpressionForGeneration extends @semanticExpressionForGeneration {
  @semanticExpressionForGeneration mLeftExpression ;
  @semanticExpressionForGeneration mRightExpression ;
}

#---------------------------------------------------------------------------*

class @equalExpressionForGeneration extends @semanticExpressionForGeneration {
  @semanticExpressionForGeneration mLeftExpression ;
  @semanticExpressionForGeneration mRightExpression ;
}

#---------------------------------------------------------------------------*

class @notEqualExpressionForGeneration extends @semanticExpressionForGeneration {
  @semanticExpressionForGeneration mLeftExpression ;
  @semanticExpressionForGeneration mRightExpression ;
}

#---------------------------------------------------------------------------*

class @lowerOrEqualExpressionForGeneration extends @semanticExpressionForGeneration {
  @semanticExpressionForGeneration mLeftExpression ;
  @semanticExpressionForGeneration mRightExpression ;
}

#---------------------------------------------------------------------------*

class @greaterOrEqualExpressionForGeneration extends @semanticExpressionForGeneration {
  @semanticExpressionForGeneration mLeftExpression ;
  @semanticExpressionForGeneration mRightExpression ;
}

#---------------------------------------------------------------------------*

class @strictGreaterExpressionForGeneration extends @semanticExpressionForGeneration {
  @semanticExpressionForGeneration mLeftExpression ;
  @semanticExpressionForGeneration mRightExpression ;
}

#---------------------------------------------------------------------------*

class @strictLowerExpressionForGeneration extends @semanticExpressionForGeneration {
  @semanticExpressionForGeneration mLeftExpression ;
  @semanticExpressionForGeneration mRightExpression ;
}

#---------------------------------------------------------------------------*

class @rightShiftExpressionForGeneration extends @semanticExpressionForGeneration {
  @semanticExpressionForGeneration mLeftExpression ;
  @semanticExpressionForGeneration mRightExpression ;
}

#---------------------------------------------------------------------------*

class @leftShiftExpressionForGeneration extends @semanticExpressionForGeneration {
  @semanticExpressionForGeneration mLeftExpression ;
  @semanticExpressionForGeneration mRightExpression ;
}

#---------------------------------------------------------------------------*

class @addExpressionForGeneration extends @semanticExpressionForGeneration {
  @semanticExpressionForGeneration mLeftExpression ;
  @semanticExpressionForGeneration mRightExpression ;
}

#---------------------------------------------------------------------------*

class @subExpressionForGeneration extends @semanticExpressionForGeneration {
  @semanticExpressionForGeneration mLeftExpression ;
  @semanticExpressionForGeneration mRightExpression ;
}

#---------------------------------------------------------------------------*

class @multiplicationExpressionForGeneration extends @semanticExpressionForGeneration {
  @semanticExpressionForGeneration mLeftExpression ;
  @semanticExpressionForGeneration mRightExpression ;
}

#---------------------------------------------------------------------------*

class @divisionExpressionForGeneration extends @semanticExpressionForGeneration {
  @semanticExpressionForGeneration mLeftExpression ;
  @semanticExpressionForGeneration mRightExpression ;
}

#---------------------------------------------------------------------------*

class @moduloExpressionForGeneration extends @semanticExpressionForGeneration {
  @semanticExpressionForGeneration mLeftExpression ;
  @semanticExpressionForGeneration mRightExpression ;
}

#---------------------------------------------------------------------------*

class @unaryMinusExpressionForGeneration extends @semanticExpressionForGeneration {
  @semanticExpressionForGeneration mExpression ;
}

#---------------------------------------------------------------------------*

class @notExpressionForGeneration extends @semanticExpressionForGeneration {
  @semanticExpressionForGeneration mExpression ;
}

#---------------------------------------------------------------------------*

class @complementExpressionForGeneration extends @semanticExpressionForGeneration {
  @semanticExpressionForGeneration mExpression ;
}

#---------------------------------------------------------------------------*

class @ifExpressionForGeneration extends @semanticExpressionForGeneration {
  @semanticExpressionForGeneration mIfExpression ;
  @semanticExpressionForGeneration mThenExpression ;
  @semanticExpressionForGeneration mElseExpression ;
}

#---------------------------------------------------------------------------*

class @functionCallExpressionForGeneration extends @semanticExpressionForGeneration {
  @string mFunctionName ;
  @semanticExpressionListForGeneration mExpressions ;
}

#---------------------------------------------------------------------------*

class @varInExpressionForGeneration extends @semanticExpressionForGeneration {
  @string mCppVarName ;
  @lstringlist mStructFieldList ;
}

##---------------------------------------------------------------------------*
#
#class @literalTypeInExpressionForGeneration extends @semanticExpressionForGeneration {
#  @lstring mVarName ;
#}
#
#---------------------------------------------------------------------------*

#class @castInExpressionForGeneration extends @semanticExpressionForGeneration {
#  @semanticExpressionForGeneration mReceiverExpression ;
#  @bool mUseKindOfClass ;
#  @lstring mTypeName ;
#  @semanticExpressionForGeneration mErrorLocationExpression ;
#}

##---------------------------------------------------------------------------*
#
#class @filewrapperObjectInstanciationInExpressionForGeneration extends @semanticExpressionForGeneration {
#  @lstring mFilewrapperName ;
#}
#
##---------------------------------------------------------------------------*
#
#class @filewrapperInExpressionForGeneration extends @semanticExpressionForGeneration {
#  @lstring mFilewrapperName ;
#  @lstring mFilewrapperPath ;
#}
#
##---------------------------------------------------------------------------*
#
#class @filewrapperTemplateInExpressionForGeneration extends @semanticExpressionForGeneration {
#  @lstring mFilewrapperName ;
#  @lstring mFilewrapperTemplateName ;
#  @semanticExpressionForGeneration mActualOutputParameterList ;
#}
#

#---------------------------------------------------------------------------*
#                                                                           *
#  F O R M A L    P A R A M E T E R    L I S T                              *
#                                                                           *
#---------------------------------------------------------------------------*

list @formalParameterListForGeneration {
  @formalArgumentPassingModeAST mFormalArgumentPassingMode ;
  @unifiedTypeMapProxy mFormalArgumentType ;
  @lstring mFormalArgumentName ;
  @bool mIsUnused ;
}

#---------------------------------------------------------------------------*
#                                                                           *
#  F O R M A L    I N P U T    P A R A M E T E R    L I S T                 *
#                                                                           *
#---------------------------------------------------------------------------*

list @formalInputParameterListForGeneration {
  @unifiedTypeMapProxy mFormalParameterType ;
  @lstring mFormalParameterName ;
  @bool mIsUnused ;
}

#---------------------------------------------------------------------------*
#                                                                           *
#  A C T U A L    P A R A M E T E R                                         *
#                                                                           *
#---------------------------------------------------------------------------*

abstract class @actualParameterForGeneration {
}

#---------------------------------------------------------------------------*

class @outputActualParameterForGeneration extends @actualParameterForGeneration {
  @semanticExpressionForGeneration mOutputActualParameterExpression ;
}

#---------------------------------------------------------------------------*

class @outputInputActualParameterForGeneration extends @actualParameterForGeneration {
  @string mOutputInputVariableCppName ;
  @lstringlist mStructAttributeList ;
}

#---------------------------------------------------------------------------*

class @inputActualParameterForGeneration extends @actualParameterForGeneration {
  @string mInputActualCppName ;
}

#---------------------------------------------------------------------------*

list @actualParameterListForGeneration {
  @actualParameterForGeneration mActualParameter ;
}

#---------------------------------------------------------------------------*

list @temporaryInputVariableForRoutineInvocationForGeneration {
  @unifiedTypeMapProxy mType ;
  @string mCppName ;
}

##---------------------------------------------------------------------------*
##                                                                           *
##  A C T U A L    I N P U T    P A R A M E T E R    L I S T                 *
##                                                                           *
##---------------------------------------------------------------------------*
#
#list @actualInputParameterListForGeneration {
#  @lstring mActualParameterTypeName ; # Empty if no type
#  @lstring mActualParameterName ;
#}
#
#---------------------------------------------------------------------------*

abstract class @syntaxInstructionForGeneration {
}

#---------------------------------------------------------------------------*

abstract class @semanticInstructionForGeneration extends @syntaxInstructionForGeneration {
}

#---------------------------------------------------------------------------*

list @semanticInstructionListForGeneration {
  @semanticInstructionForGeneration mInstruction ;
}

#---------------------------------------------------------------------------*

abstract class @semanticDeclarationForGeneration {
}

#---------------------------------------------------------------------------*

list @semanticDeclarationListForGeneration {
  @semanticDeclarationForGeneration mDeclaration ;
}

#---------------------------------------------------------------------------*
#                                                                           *
#    T Y P E    D E C L A R A T I O N                                       *
#                                                                           *
#---------------------------------------------------------------------------*

abstract class @semanticTypeForGeneration extends @semanticDeclarationForGeneration {
  @unifiedTypeMapProxy mTypeIndex ;
}

#---------------------------------------------------------------------------*

#sortedlist @semanticDeclarationSortedListForGeneration {
#  @string mOrderString ;
#  @semanticDeclarationForGeneration mSemanticDeclaration ;
#}{
#  mOrderString <
#}

#---------------------------------------------------------------------------*

#list @semanticDeclarationListForGeneration {
#  @semanticDeclarationForGeneration mSemanticDeclaration ;
#}

#---------------------------------------------------------------------------*
#                                                                           *
#    R O U T I N E    D E C L A R A T I O N                                 *
#                                                                           *
#---------------------------------------------------------------------------*

class @routinePrototypeDeclarationForGeneration extends @semanticDeclarationForGeneration {
  @string mRoutineName ;
  @formalParameterListForGeneration mFormalArgumentList ;
}

#---------------------------------------------------------------------------*
#                                                                           *
#    R O U T I N E    I M P L E M E N T A T I O N                           *
#                                                                           *
#---------------------------------------------------------------------------*

class @routineImplementationForGeneration extends @routinePrototypeDeclarationForGeneration {
  @semanticInstructionListForGeneration mRoutineInstructionList ;
  @bool mUsesCompilerArgument ;
}

#---------------------------------------------------------------------------*
#                                                                           *
#    F U N C T I O N    D E C L A R A T I O N                               *
#                                                                           *
#---------------------------------------------------------------------------*

class @functionDeclarationForGeneration extends @semanticDeclarationForGeneration {
  @lstring mFunctionName ;
  @formalInputParameterListForGeneration mFormalParameterList ;
  @lstring mResultVariableName ;
  @unifiedTypeMapProxy mReturnType ;
  @semanticInstructionListForGeneration mFunctionInstructionList ;
  @bool mUsesCompilerArgument ;
}

#---------------------------------------------------------------------------*
#                                                                           *
#    O N C E    F U N C T I O N    D E C L A R A T I O N                    *
#                                                                           *
#---------------------------------------------------------------------------*

#class @lazyFunctionDeclarationForGeneration extends @semanticDeclarationForGeneration {
#  @lstring mFunctionName ;
#  @lstring mResultTypeName ;
#  @lstring mResultVariableName ;
#  @semanticInstructionListForGeneration mFunctionInstructionList ;
#}

#---------------------------------------------------------------------------*
#                                                                           *
#  L O C A L    V A R I A B L E    D E C L A R A T I O N                    *
#                                                                           *
#---------------------------------------------------------------------------*

class @localVariableDeclarationForGeneration extends @semanticInstructionForGeneration {
  @unifiedTypeMapProxy mVariableType ;
  @string mCppVariableName ;
}

#---------------------------------------------------------------------------*

class @localVariableOrConstantDeclarationWithSourceExpressionForGeneration extends @semanticInstructionForGeneration {
  @unifiedTypeMapProxy mTargetType ;
  @bool mIsConstant ;
  @string mCppVariableName ;
  @semanticExpressionForGeneration mSourceExpression ;
}

#---------------------------------------------------------------------------*

class @localVariableOrConstantDeclarationWithConstructorCallForGeneration extends @semanticInstructionForGeneration {
  @unifiedTypeMapProxy mTargetType ;
  @bool mIsConstant ;
  @string mCppVariableName ;
  @string mConstructorName ;
  @semanticExpressionListForGeneration mConstructorArguments ;
  @bool mHasCompilerArgument ;
}

#---------------------------------------------------------------------------*
#                                                                           *
#  A S S I G N M E N T    I N S T R U C T I O N                             *
#                                                                           *
#---------------------------------------------------------------------------*

class @assignmentInstructionForGeneration extends @semanticInstructionForGeneration {
  @string mTargetCppName ;
  @lstringlist mStructAttributeList ;
  @semanticExpressionForGeneration mSourceExpression ;
}

#---------------------------------------------------------------------------*
#                                                                           *
#  D R O P    I N S T R U C T I O N                                         *
#                                                                           *
#---------------------------------------------------------------------------*

class @dropInstructionForGeneration extends @semanticInstructionForGeneration {
  @stringlist mDropList ;
  @string mComment ;
}

#---------------------------------------------------------------------------*
#                                                                           *
#  D O T    A S S I G N M E N T    I N S T R U C T I O N                    *
#                                                                           *
#  VARIABLE .= EXPRESSION ;                                                 *
#                                                                           *
#---------------------------------------------------------------------------*

class @appendInstructionForGeneration extends @semanticInstructionForGeneration {
  @string mTargetVariableCppName ;
  @lstringlist mStructAttributeList ;
  @semanticExpressionForGeneration mSourceExpression ;
}

#---------------------------------------------------------------------------*
#                                                                           *
#  S E N D    I N S T R U C T I O N                                         *
#                                                                           *
#  send EXPRESSION ;                                                        *
#                                                                           *
#---------------------------------------------------------------------------*

class @sendInstructionForGeneration extends @semanticInstructionForGeneration {
  @semanticExpressionForGeneration mSourceExpression ;
}

#---------------------------------------------------------------------------*
#                                                                           *
#  F O R E A C H    I N S T R U C T I O N                                   *
#                                                                           *
#---------------------------------------------------------------------------*

#abstract class @foreachInstructionEnumeratedObjectElementForGeneration {
#}

#---------------------------------------------------------------------------*

#class @foreachInstructionJokerForGeneration extends @foreachInstructionEnumeratedObjectElementForGeneration {
#}

#---------------------------------------------------------------------------*

#class @foreachInstructionEnumeratedConstantForGeneration extends @foreachInstructionEnumeratedObjectElementForGeneration {
#  @lstring mTypeName ;
#  @lstring mConstantName ;
#}

#---------------------------------------------------------------------------*

#list @foreachInstructionEnumeratedObjectElementListForGeneration {
#  @foreachInstructionEnumeratedObjectElementForGeneration mElement ;
#}

#---------------------------------------------------------------------------*

list @foreachInstructionEnumeratedObjectListForGeneration {
  @bool mIsAscending ;
  @semanticExpressionForGeneration mEnumeratedExpression ;
  @string mEnumeratorCppName ;
}

#---------------------------------------------------------------------------*

class @foreachInstructionForGeneration extends @semanticInstructionForGeneration {
  @foreachInstructionEnumeratedObjectListForGeneration mEnumeratedObjectList ;
  @string mIndexVariableCppName ;  # Empty string if no index
  @semanticExpressionForGeneration mWhileExpression ;
  @semanticInstructionListForGeneration mBeforeInstructionList ;
  @semanticInstructionListForGeneration mBetweenInstructionList ;
  @semanticInstructionListForGeneration mDoInstructionList ;
  @semanticInstructionListForGeneration mAfterInstructionList ;
}

#---------------------------------------------------------------------------*
#                                                                           *
#  I F    I N S T R U C T I O N                                             *
#                                                                           *
#---------------------------------------------------------------------------*

class @ifInstructionForGeneration extends @semanticInstructionForGeneration {
  @semanticExpressionForGeneration mIFexpression ;
  @location mInstructionLocation ;
  @semanticInstructionListForGeneration m_then_instructionList ;
  @semanticInstructionListForGeneration m_else_instructionList ;
}

#---------------------------------------------------------------------------*
#                                                                           *
#    E R R O R    I N S T R U C T I O N                                     *
#                                                                           *
#---------------------------------------------------------------------------*

class @errorInstructionForGeneration extends @semanticInstructionForGeneration {
  @semanticExpressionForGeneration mReceiverExpression ;
  @bool mUseLocationReader ;
  @semanticExpressionForGeneration mErrorExpression ;
  @stringlist mBuiltVariableCppNameList ;
}

#---------------------------------------------------------------------------*
#                                                                           *
#    W A R N I N G    I N S T R U C T I O N                                 *
#                                                                           *
#---------------------------------------------------------------------------*

class @warningInstructionForGeneration extends @semanticInstructionForGeneration {
  @semanticExpressionForGeneration mReceiverExpression ;
  @bool mUseLocationReader ;
  @semanticExpressionForGeneration mWarningExpression ;
}

#---------------------------------------------------------------------------*
#                                                                           *
#    R O U T I N E    C A L L    I N S T R U C T I O N                      *
#                                                                           *
#---------------------------------------------------------------------------*

class @routineCallInstructionForGeneration extends @semanticInstructionForGeneration {
  @lstring mRoutineName ;
  @actualParameterListForGeneration mActualParameterList ;
  @temporaryInputVariableForRoutineInvocationForGeneration mTemporaryInputVariableList ;
}

#---------------------------------------------------------------------------*
#                                                                           *
#  T Y P E    M E T H O D    C A L L    I N S T R U C T I O N               *
#                                                                           *
#---------------------------------------------------------------------------*

class @typeMethodInstructionForGeneration extends @semanticInstructionForGeneration {
  @lstring mTypeName ;
  @lstring mMethodName ;
  @actualParameterListForGeneration mActualParameterList ;
  @bool mHasCompilerArgument ;
  @temporaryInputVariableForRoutineInvocationForGeneration mTemporaryInputVariableList ;
}

#---------------------------------------------------------------------------*
#                                                                           *
#  M E T H O D    C A L L    I N S T R U C T I O N                          *
#                                                                           *
#---------------------------------------------------------------------------*

class @methodCallInstructionForGeneration extends @semanticInstructionForGeneration {
  @semanticExpressionForGeneration mReceiverExpression ;
  @string mMethodName ;
  @actualParameterListForGeneration mActualParameterList ;
  @bool mHasCompilerArgument ;
  @temporaryInputVariableForRoutineInvocationForGeneration mTemporaryInputVariableList ;
}

#---------------------------------------------------------------------------*
#                                                                           *
#  M O D I F I E R    C A L L    I N S T R U C T I O N                      *
#                                                                           *
#---------------------------------------------------------------------------*

class @modifierCallInstructionForGeneration extends @semanticInstructionForGeneration {
  @string mReceiverCppName ;
  @lstringlist mReceiverStructAttributes ;
  @lstring mModifierName ;
  @actualParameterListForGeneration mActualParameterList ;
  @bool mHasCompilerArgument ;
  @temporaryInputVariableForRoutineInvocationForGeneration mTemporaryInputVariableList ;
}

#---------------------------------------------------------------------------*
#                                                                           *
#    M A T C H    I N S T R U C T I O N                                     *
#                                                                           *
#---------------------------------------------------------------------------*

#abstract class @matchEntryForGeneration {
#}

#---------------------------------------------------------------------------*

#list @matchEntryListForGeneration {
#  @matchEntryForGeneration mEntry ;
#}

#---------------------------------------------------------------------------*

#class @constantMatchEntryForGeneration extends @matchEntryForGeneration {
#  @lstring mConstantName ;
#}

#---------------------------------------------------------------------------*

#class @classMatchEntryForGeneration extends @matchEntryForGeneration {
#  @lstring mClassName ;
#  @foreachInstructionEnumeratedObjectElementListForGeneration mElements ;
#  @bool mEndsWithEllipsis ;
#}

#---------------------------------------------------------------------------*

#list @matchInstructionBranchListForGeneration {
#  @matchEntryListForGeneration mMatchEntryList ;
#  @semanticInstructionListForGeneration mMatchBranchInstructionList ;
#}

#---------------------------------------------------------------------------*

#class @matchInstructionForGeneration extends @semanticInstructionForGeneration {
#  @lstringlist mMatchedVariableNameList ;
#  @matchInstructionBranchListForGeneration mMatchInstructionBranchList ;
#  @semanticInstructionListForGeneration mElseInstructionList ;
#}

#---------------------------------------------------------------------------*
#                                                                           *
#    C A S T    I N S T R U C T I O N                                       *
#                                                                           *
#---------------------------------------------------------------------------*

list @castInstructionBranchListForGeneration {
  @bool mUseKindOfClass ;
  @unifiedTypeMapProxy mType ;
  @semanticInstructionListForGeneration mInstructionList ;
}

#---------------------------------------------------------------------------*

class @structuredCastInstructionForGeneration extends @semanticInstructionForGeneration {
  @semanticExpressionForGeneration mExpression ;
  @castInstructionBranchListForGeneration mCastBranchList ;
  @semanticInstructionListForGeneration mElseInstructionList ;
}

#---------------------------------------------------------------------------*
#                                                                           *
#    A D D    A S S I G N    I N S T R U C T I O N      + =                 *
#                                                                           *
#---------------------------------------------------------------------------*

class @addAssignInstructionForGeneration extends @semanticInstructionForGeneration {
  @string mReceiverCppName ;
  @lstringlist mStructAttributeList ;
  @semanticExpressionListForGeneration mExpressionList ;
}

#---------------------------------------------------------------------------*
#                                                                           *
#    I N C R E M E N T    I N S T R U C T I O N                             *
#                                                                           *
#---------------------------------------------------------------------------*

class @incrementInstructionForGeneration extends @semanticInstructionForGeneration {
  @string mReceiverCppName ;
  @lstringlist mStructAttributeList ;
}

#---------------------------------------------------------------------------*
#                                                                           *
#    D E C R E M E N T    I N S T R U C T I O N                             *
#                                                                           *
#---------------------------------------------------------------------------*

class @decrementInstructionForGeneration extends @semanticInstructionForGeneration {
  @string mReceiverCppName ;
  @lstringlist mStructAttributeList ;
}

#---------------------------------------------------------------------------*
#                                                                           *
#    L O O P    I N S T R U C T I O N                                       *
#                                                                           *
#---------------------------------------------------------------------------*

class @loopInstructionForGeneration extends @semanticInstructionForGeneration {
  @semanticExpressionForGeneration mVariantExpression ;
  @semanticInstructionListForGeneration mFirstInstructions ;
  @semanticExpressionForGeneration mLoopExpression ;
  @semanticInstructionListForGeneration mSecondInstructions ;
}

#---------------------------------------------------------------------------*
#                                                                           *
#  M E S S A G E    I N S T R U C T I O N                                   *
#                                                                           *
#---------------------------------------------------------------------------*

class @messageInstructionForGeneration extends @semanticInstructionForGeneration {
  @semanticExpressionForGeneration mExpression ;
}

#---------------------------------------------------------------------------*
#                                                                           *
#  L O G    I N S T R U C T I O N                                           *
#                                                                           *
#---------------------------------------------------------------------------*

class @logInstructionForGeneration extends @semanticInstructionForGeneration {
  @lstring mLogMessage ;
  @semanticExpressionForGeneration mLogExpression ;
}

#---------------------------------------------------------------------------*
#                                                                           *
#  G R A M M A R    I N S T R U C T I O N                                   *
#                                                                           *
#---------------------------------------------------------------------------*

class @grammarInstructionForGeneration extends @semanticInstructionForGeneration {
  @string mGrammarComponentName ;
  @string mLabelName ;
  @semanticExpressionForGeneration mSourceExpression ;
  @bool mSourceExpressionIsFile ; # If false, mSourceExpression should be the source string
  @actualParameterListForGeneration mActualParameterList ;
  @temporaryInputVariableForRoutineInvocationForGeneration mTemporaryInputVariableList ;
}

#---------------------------------------------------------------------------*
#                                                                           *
#  W I T H    I N S T R U C T I O N                                         *
#                                                                           *
#---------------------------------------------------------------------------*

#class @withInstructionForGeneration extends @semanticInstructionForGeneration {
#  @lstring mPrefix ;
#  @lstring mTargetObjectName ;
#  @lstringlist mStructAttributeList ;
#  @lstring mSearchMethodName ;
#  @semanticExpressionForGeneration mKeyExpression ;
#  @semanticInstructionListForGeneration mDoBranchInstructions ;
#  @semanticInstructionListForGeneration mElseBranchInstructions ;
#}

#---------------------------------------------------------------------------*
#                                                                           *
#  S W I T C H    I N S T R U C T I O N                                     *
#                                                                           *
#---------------------------------------------------------------------------*

#list @switchBranchesForGeneration {
#  @lstringlist mSwitchConstantList ;
#  @semanticInstructionListForGeneration mInstructions ;
#}

#---------------------------------------------------------------------------*

#class @switchInstructionForGeneration extends @semanticInstructionForGeneration {
#  @semanticExpressionForGeneration mSwitchExpression ;
#  @switchBranchesForGeneration mBranches ;
#}

#---------------------------------------------------------------------------*
#                                                                           *
# A B S T R A C T   C A T E G O R Y    M E T H O D    D E C L A R A T I O N *
#                                                                           *
#---------------------------------------------------------------------------*

#list @abstracMultiMethodListForGeneration {
#  @lstring mAbstractCategoryMethodName ;
#  @formalParameterListForGeneration mAbstractCategoryFormalParameterList ;
#}

#---------------------------------------------------------------------------*

#listmap @abstractMultiMethodListMapForGeneration (@abstracMultiMethodListForGeneration) ;

#---------------------------------------------------------------------------*
#                                                                           *
#        C A T E G O R Y    M E T H O D    D E C L A R A T I O N            *
#                                                                           *
#---------------------------------------------------------------------------*

#list @multiMethodListForGeneration {
#  @lstring mCategoryMethodName ;
#  @formalParameterListForGeneration mCategoryFormalParameterList ;
#  @semanticInstructionListForGeneration mRoutineInstructionList ;
#}

#---------------------------------------------------------------------------*

#listmap @multiMethodListMapForGeneration (@multiMethodListForGeneration) ;

#---------------------------------------------------------------------------*
#                                                                           *
#O V E R R I D I N G   C A T E G O R Y   M E T H O D   D E C L A R A T I O N*
#                                                                           *
#---------------------------------------------------------------------------*

#list @overridingMultiMethodListForGeneration {
#  @lstring mOverridingCategoryMethodName ;
#  @formalParameterListForGeneration mOverridingCategoryFormalParameterList ;
#  @semanticInstructionListForGeneration mRoutineInstructionList ;
#}

#---------------------------------------------------------------------------*

#listmap @overridingMultiMethodListMapForGeneration (@overridingMultiMethodListForGeneration) ;

#---------------------------------------------------------------------------*
#                                                                           *
# A B S T R A C T   C A T E G O R Y    R E A D E R    D E C L A R A T I O N *
#                                                                           *
#---------------------------------------------------------------------------*

#list @abstractMultiReaderListForGeneration {
#  @lstring mAbstractCategoryReaderName ;
#  @formalInputParameterListForGeneration mAbstractCategoryFormalInputParameterList ;
#  @lstring mReturnedTypeName ;
#}

#---------------------------------------------------------------------------*

#listmap @abstractMultiReaderListMapForGeneration (@abstractMultiReaderListForGeneration) ;

#---------------------------------------------------------------------------*
#                                                                           *
#        C A T E G O R Y    R E A D E R    D E C L A R A T I O N            *
#                                                                           *
#---------------------------------------------------------------------------*

#list @multiReaderListForGeneration {
#  @lstring mCategoryReaderName ;
#  @formalInputParameterListForGeneration mReaderCategoryFormalInputParameterList ;
#  @lstring mReturnedTypeName ;
#  @lstring mReturnedVariableName ;
#  @semanticInstructionListForGeneration mRoutineInstructionList ;
#}

#---------------------------------------------------------------------------*

#listmap @multiReaderListMapForGeneration (@multiReaderListForGeneration) ;

#---------------------------------------------------------------------------*
#                                                                           *
#O V E R R I D I N G   C A T E G O R Y   R E A D E R   D E C L A R A T I O N*
#                                                                           *
#---------------------------------------------------------------------------*

#list @overridingMultiReaderListForGeneration {
#  @lstring mOverridingCategoryReaderName ;
#  @formalInputParameterListForGeneration mOverridingReaderFormalInputParameterList ;
#  @lstring mReturnedTypeName ;
#  @lstring mReturnedVariableName ;
#  @semanticInstructionListForGeneration mRoutineInstructionList ;
#}

#---------------------------------------------------------------------------*

#listmap @overridingMultiReaderListMapForGeneration (@overridingMultiReaderListForGeneration) ;

#---------------------------------------------------------------------------*
#                                                                           *
#           S E M A N T I C   D E C L A R A T I O N S                       *
#                                                                           *
#---------------------------------------------------------------------------*

#struct @semanticDeclarationStructForGeneration {
#  @semanticDeclarationListForGeneration mSemanticDeclarationList ;
##--- Multi Methods
#  @abstractMultiMethodListMapForGeneration mAbstractCategoryMethodListMap ;
#  @multiMethodListMapForGeneration mCategoryMethodListMap ;
#  @overridingMultiMethodListMapForGeneration mOverridingCategoryMethodListMap ;
##--- Multi readers
#  @abstractMultiReaderListMapForGeneration mAbstractCategoryReaderListMap ;
#  @multiReaderListMapForGeneration mCategoryReaderListMap ;
#  @overridingMultiReaderListMapForGeneration mOverridingCategoryReaderListMap ;
#}

#---------------------------------------------------------------------------*
#                                                                           *
#    M A P    D E C L A R A T I O N                                         *
#                                                                           *
#---------------------------------------------------------------------------*

class @mapTypeForGeneration extends @semanticTypeForGeneration {
  @lstring mMapTypeName ;
  @typedAttributeList mTypedAttributeList ;
  @insertMethodListAST mInsertMethodList ;
  @mapSearchMethodListAST mSearchMethodList ;
  @mapRemoveMethodListAST mRemoveMethodList ;
  @bool mHasInsertOrReplaceModifier ;
}

#---------------------------------------------------------------------------*
#                                                                           *
#    M A P    P R O X Y    D E C L A R A T I O N                            *
#                                                                           *
#---------------------------------------------------------------------------*

class @mapProxyTypeForGeneration extends @semanticTypeForGeneration {
  @unifiedTypeMapProxy mAssociatedMapTypeProxy ;
  @typedAttributeList mAssociatedMapTypedAttributeList ;
  @mapSearchMethodListAST mSearchMethodList ;
}

#---------------------------------------------------------------------------*
#                                                                           *
#    C L A S S    D E C L A R A T I O N                                     *
#                                                                           *
#---------------------------------------------------------------------------*

list @abstractMethodDefinitionListForGeneration {
  @bool mIsOverriding ;
  @lstring mMethodName ;
  @formalParameterListForGeneration mSignature ;
}

#---------------------------------------------------------------------------*

list @methodDefinitionListForGeneration {
  @bool mIsOverriding ;
  @lstring mMethodName ;
  @formalParameterListForGeneration mSignature ;
  @semanticInstructionListForGeneration mInstructionList ;
  @bool mUsesCompilerArgument ;
}

#---------------------------------------------------------------------------*

#list @classMessageDefinitionListForGeneration {
#  @lstring mMessageName ;
#  @lstring mMessageValue ;
#}

#---------------------------------------------------------------------------*

#list @lazyAttributeListForGeneration {
#  @location mLocationMagicNumber ;
#  @attributeInCollectionListForGeneration mAttributeList ;
#  @semanticInstructionListForGeneration mInstructionList ;
#}

#---------------------------------------------------------------------------*

class @classTypeForGeneration extends @semanticTypeForGeneration {
  @bool mIsAbstract ;
  @lstring mClassTypeName ;
  @unifiedTypeMapProxy mSuperClass ; # Null if no super class
#  @lstringlist mClassFeatureList ;
  @typedAttributeList mAllTypedAttributeList ; # Inherited followed by current attributes
  @typedAttributeList mTypedAttributeList ;
  @abstractMethodDefinitionListForGeneration mAbstractMethodList ;
  @methodDefinitionListForGeneration mMethodList ;
#  @classMessageDefinitionListForGeneration mMessageList ;
#  @lazyAttributeListForGeneration mLazyAttributeList ;
#  @string mClassMessage ;
}

#---------------------------------------------------------------------------*
#                                                                           *
#    L I S T M A P    D E C L A R A T I O N                                 *
#                                                                           *
#---------------------------------------------------------------------------*

class @listmapTypeForGeneration extends @semanticTypeForGeneration {
  @unifiedTypeMapProxy mAssociatedListTypeIndex ;
  @typedAttributeList mAssociatedListTypedAttributeList ;
}

#---------------------------------------------------------------------------*
#                                                                           *
#    P R I M I T I V E    T Y P E                                           *
#                                                                           *
#---------------------------------------------------------------------------*

class @primitiveTypeForGeneration extends @semanticTypeForGeneration {
}

#---------------------------------------------------------------------------*
#                                                                           *
#    G E N E R I C    L I S T    T Y P E    D E C L A R A T I O N           *
#                                                                           *
#---------------------------------------------------------------------------*

class @genericTypeForGeneration extends @semanticTypeForGeneration {
}

#---------------------------------------------------------------------------*
#                                                                           *
#    L I S T    T Y P E    D E C L A R A T I O N                            *
#                                                                           *
#---------------------------------------------------------------------------*

class @listTypeForGeneration extends @semanticTypeForGeneration {
  @typedAttributeList mTypedAttributeList ;
}

#---------------------------------------------------------------------------*
#                                                                           *
#    S T R U C T    D E C L A R A T I O N                                   *
#                                                                           *
#---------------------------------------------------------------------------*

class @structTypeForGeneration extends @semanticTypeForGeneration {
  @typedAttributeList mTypedAttributeList ;
}

#---------------------------------------------------------------------------*
#                                                                           *
#    S O R T E D    L I S T    D E C L A R A T I O N                        *
#                                                                           *
#---------------------------------------------------------------------------*

list @sortDescriptorListForGeneration {
  @uint mAttributeIndex ;
  @bool mAscendingOrder ;
}

#---------------------------------------------------------------------------*

class @sortedListTypeForGeneration extends @semanticTypeForGeneration {
  @typedAttributeList mTypedAttributeList ;
  @sortDescriptorListForGeneration mSortDescriptorList ;
}

#---------------------------------------------------------------------------*
#                                                                           *
#    E N U M    D E C L A R A T I O N                                       *
#                                                                           *
#---------------------------------------------------------------------------*

sortedlist @enumMessageAssociationSortedListForGeneration {
  @uint mConstantIndex ;
  @string mConstantName ;
  @string mMessage ;
}{
  mConstantIndex <
}

#---------------------------------------------------------------------------*

list @enumMessageListForGeneration {
  @string mEnumMessageName ;
  @enumMessageAssociationSortedListForGeneration mMessageAssociationList ;
}

#---------------------------------------------------------------------------*

class @enumTypeForGeneration extends @semanticTypeForGeneration {
  @stringlist mConstantList ;
  @enumMessageListForGeneration mEnumMessageList ;
}

#---------------------------------------------------------------------------*
#                                                                           *
#    F I L E W R A P P E R    D E C L A R A T I O N                         *
#                                                                           *
#---------------------------------------------------------------------------*

#list @filewrapperTemplateListForGeneration {
#  @lstring mFilewrapperTemplateName ;
#  @lstring mFilewrapperTemplatePath ;
#  @formalInputParameterListForGeneration mFilewrapperTemplateFormalInputParameters ;
#}

#---------------------------------------------------------------------------*

#class @filewrapperDeclarationForGeneration extends @semanticDeclarationForGeneration {
#  @lstring mFilewrapperName ;
#  @lstring mFilewrapperPath ;
#  @lstringlist mFilewrapperExtensionList ;
#  @filewrapperTemplateListForGeneration mFilewrapperTemplateList ;
#}

#---------------------------------------------------------------------------*

#class @semanticsComponentForGeneration {
#  @lstring mSemanticsComponentName  ;
#  @lstringlist mImportedComponentFileNameList  ;
#  @semanticDeclarationStructForGeneration mSemanticDeclarations  ;
#  @location mEndOfSourceFile ;
#}

#---------------------------------------------------------------------------*

end semantics ;

//---------------------------------------------------------------------------*
//                                                                           *
//                     File 'metamodelModelBuilder.cpp'                      *
//         Generated by version GALGAS_BETA_VERSION (LL(1) grammar)          *
//                       june 1st, 2007, at 17h20'46"                        *
//                                                                           *
//---------------------------------------------------------------------------*

//--- START OF USER ZONE 1


//--- END OF USER ZONE 1

//---------------------------------------------------------------------------*

#include "version_libpm.h"
#if LIBPM_VERSION != THE_LIBPM_VERSION
  #error "This file has been compiled with a version of GALGAS different than the version of libpm"
#endif

//---------------------------------------------------------------------------*

#include <typeinfo>
#include "utilities/MF_MemoryControl.h"
#include "files/C_TextFileWrite.h"
#include "metamodelModelBuilder.h"

//---------------------------------------------------------------------------*

#ifndef DO_NOT_GENERATE_CHECKINGS
  #define SOURCE_FILE_AT_LINE(line) "metamodelModelBuilder.gSyntax", line
  #define COMMA_SOURCE_FILE_AT_LINE(line) , SOURCE_FILE_AT_LINE(line)
#else
  #define SOURCE_FILE_AT_LINE(line) 
  #define COMMA_SOURCE_FILE_AT_LINE(line) 
#endif


//--- START OF USER ZONE 2


//--- END OF USER ZONE 2

//---------------------------------------------------------------------------*
//                                                                           *
//   Implementation of production rule 'metamodel_component_start_symbol'    *
//                                                                           *
//---------------------------------------------------------------------------*

GGS_metamodelComponentRoot metamodelModelBuilder::
metamodelModelBuilder::
pr_metamodel_component_start_symbol_metamodelModelBuilder_36_6_ (galgas_scanner & _inLexique) {
  GGS_lstring  var_cas_mMetamodelComponentName ;
  GGS_lstringlist  var_cas_mSuperMetamodels ;
  GGS_lstring  var_cas_mMetamodelRootEntityName ;
  GGS_lstringlist  var_cas_mMetamodelImportedComponents ;
  GGS_metamodelEntityList  var_cas_mMetamodelEntities ;
  var_cas_mMetamodelEntities = GGS_metamodelEntityList::constructor_emptyList (_inLexique COMMA_HERE) ;
  var_cas_mSuperMetamodels = GGS_lstringlist::constructor_emptyList (_inLexique COMMA_HERE) ;
  switch (select_metamodelModelBuilder_0 (_inLexique)) {
    case 1 : {
      _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_metamodel) COMMA_HERE) ;
      _inLexique._assignFromAttribute_tokenString (var_cas_mMetamodelComponentName) ;
      _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_identifier) COMMA_HERE) ;
      switch (select_metamodelModelBuilder_1 (_inLexique)) {
        case 1 : {
          } break ;
        case 2 : {
          _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_extends) COMMA_HERE) ;
          { bool syntaxRepeat = true ;
            while (syntaxRepeat) {
                GGS_lstring  var_cas_superMetamodelName ;
                _inLexique._assignFromAttribute_tokenString (var_cas_superMetamodelName) ;
                _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_identifier) COMMA_HERE) ;
                var_cas_mSuperMetamodels._addAssign_operation (var_cas_superMetamodelName) ;
              switch (select_repeat_metamodelModelBuilder_2 (_inLexique)) {
                case 2 : {
                  _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1__2C) COMMA_HERE) ;
                  } break ;
                default :
                  syntaxRepeat = false ;
                  break ;
              }
            }
          }
          } break ;
        default :
          break ;
      }
      _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_root) COMMA_HERE) ;
      _inLexique._assignFromAttribute_tokenString (var_cas_mMetamodelRootEntityName) ;
      _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_type_5Fname) COMMA_HERE) ;
      } break ;
    case 2 : {
      _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_abstract) COMMA_HERE) ;
      _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_metamodel) COMMA_HERE) ;
      _inLexique._assignFromAttribute_tokenString (var_cas_mMetamodelComponentName) ;
      _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_identifier) COMMA_HERE) ;
      switch (select_metamodelModelBuilder_3 (_inLexique)) {
        case 1 : {
          } break ;
        case 2 : {
          _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_extends) COMMA_HERE) ;
          { bool syntaxRepeat = true ;
            while (syntaxRepeat) {
                GGS_lstring  var_cas_superMetamodelName ;
                _inLexique._assignFromAttribute_tokenString (var_cas_superMetamodelName) ;
                _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_identifier) COMMA_HERE) ;
                var_cas_mSuperMetamodels._addAssign_operation (var_cas_superMetamodelName) ;
              switch (select_repeat_metamodelModelBuilder_4 (_inLexique)) {
                case 2 : {
                  _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1__2C) COMMA_HERE) ;
                  } break ;
                default :
                  syntaxRepeat = false ;
                  break ;
              }
            }
          }
          } break ;
        default :
          break ;
      }
      var_cas_mMetamodelRootEntityName = GGS_lstring::constructor_new (_inLexique, GGS_string (true, ""), GGS_location (_inLexique) COMMA_HERE) ;
      } break ;
    default :
      break ;
  }
  _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1__3A) COMMA_HERE) ;
  var_cas_mMetamodelImportedComponents = GGS_lstringlist::constructor_emptyList (_inLexique COMMA_HERE) ;
  { bool syntaxRepeat = true ;
    while (syntaxRepeat) {
      switch (select_repeat_metamodelModelBuilder_5 (_inLexique)) {
        case 2 : {
          var_cas_mMetamodelEntities._addModel (nt_entity_declaration_ (_inLexique)) ;
          } break ;
        case 3 : {
          nt_component_importation_ (_inLexique, var_cas_mMetamodelImportedComponents) ;
          } break ;
        default :
          syntaxRepeat = false ;
          break ;
      }
    }
  }
  _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_end) COMMA_HERE) ;
  _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_metamodel) COMMA_HERE) ;
  _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1__3B) COMMA_HERE) ;
  GGS_metamodelComponentRoot _entityInstance = GGS_metamodelComponentRoot::constructor_new (_inLexique, var_cas_mMetamodelComponentName, var_cas_mSuperMetamodels, var_cas_mMetamodelRootEntityName, var_cas_mMetamodelImportedComponents, var_cas_mMetamodelEntities COMMA_HERE) ;
  return _entityInstance ;
}

//---------------------------------------------------------------------------*
//                                                                           *
//        Implementation of production rule 'component_importation'          *
//                                                                           *
//---------------------------------------------------------------------------*

void metamodelModelBuilder::
metamodelModelBuilder::
pr_component_importation_metamodelModelBuilder_93_6_ (galgas_scanner & _inLexique,
                                GGS_lstringlist  &var_cas_ioImportedComponentList) {
  _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_import) COMMA_HERE) ;
  { bool syntaxRepeat = true ;
    while (syntaxRepeat) {
        switch (select_metamodelModelBuilder_7 (_inLexique)) {
          case 1 : {
            GGS_lstring  var_cas_importedComponentFileName ;
            _inLexique._assignFromAttribute_tokenString (var_cas_importedComponentFileName) ;
            _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_literal_5Fstring) COMMA_HERE) ;
            var_cas_ioImportedComponentList._addAssign_operation (var_cas_importedComponentFileName) ;
            } break ;
          case 2 : {
            _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_semantics) COMMA_HERE) ;
            _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_identifier) COMMA_HERE) ;
            _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_in) COMMA_HERE) ;
            _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_literal_5Fstring) COMMA_HERE) ;
            } break ;
          case 3 : {
            _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_metamodel) COMMA_HERE) ;
            _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_identifier) COMMA_HERE) ;
            _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_in) COMMA_HERE) ;
            _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_literal_5Fstring) COMMA_HERE) ;
            } break ;
          default :
            break ;
        }
      switch (select_repeat_metamodelModelBuilder_6 (_inLexique)) {
        case 2 : {
          _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1__2C) COMMA_HERE) ;
          } break ;
        default :
          syntaxRepeat = false ;
          break ;
      }
    }
  }
  _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1__3B) COMMA_HERE) ;
}

//---------------------------------------------------------------------------*
//                                                                           *
//          Implementation of production rule 'entity_declaration'           *
//                                                                           *
//---------------------------------------------------------------------------*

GGS_metamodelEntity metamodelModelBuilder::
metamodelModelBuilder::
pr_entity_declaration_metamodelModelBuilder_119_6_ (galgas_scanner & _inLexique) {
  GGS_lstring  var_cas_mEntityName ;
  GGS_lstring  var_cas_mSuperEntityName ;
  GGS_bool var_cas_mIsAbstract ;
  GGS_metamodelAttributeList  var_cas_mAttributes ;
  var_cas_mAttributes = GGS_metamodelAttributeList::constructor_emptyList (_inLexique COMMA_HERE) ;
  GGS_metamodelMultipleReferenceList  var_cas_mMultipleReferences ;
  var_cas_mMultipleReferences = GGS_metamodelMultipleReferenceList::constructor_emptyList (_inLexique COMMA_HERE) ;
  switch (select_metamodelModelBuilder_8 (_inLexique)) {
    case 1 : {
      var_cas_mIsAbstract = GGS_bool (true, false) ;
      } break ;
    case 2 : {
      _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_abstract) COMMA_HERE) ;
      var_cas_mIsAbstract = GGS_bool (true, true) ;
      } break ;
    default :
      break ;
  }
  _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_entity) COMMA_HERE) ;
  _inLexique._assignFromAttribute_tokenString (var_cas_mEntityName) ;
  _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_type_5Fname) COMMA_HERE) ;
  switch (select_metamodelModelBuilder_9 (_inLexique)) {
    case 1 : {
      var_cas_mSuperEntityName = GGS_lstring::constructor_new (_inLexique, GGS_string (true, ""), GGS_location (_inLexique) COMMA_HERE) ;
      } break ;
    case 2 : {
      _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_extends) COMMA_HERE) ;
      _inLexique._assignFromAttribute_tokenString (var_cas_mSuperEntityName) ;
      _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_type_5Fname) COMMA_HERE) ;
      } break ;
    default :
      break ;
  }
  _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1__7B) COMMA_HERE) ;
  { bool syntaxRepeat = true ;
    while (syntaxRepeat) {
      switch (select_repeat_metamodelModelBuilder_10 (_inLexique)) {
        case 2 : {
          GGS_lstring  var_cas_propertyTypeName ;
          _inLexique._assignFromAttribute_tokenString (var_cas_propertyTypeName) ;
          _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_type_5Fname) COMMA_HERE) ;
          switch (select_metamodelModelBuilder_11 (_inLexique)) {
            case 1 : {
              var_cas_mAttributes._addModel (nt_attribute_or_single_reference_declaration_ (_inLexique, var_cas_propertyTypeName)) ;
              } break ;
            case 2 : {
              _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1__5B) COMMA_HERE) ;
              var_cas_mMultipleReferences._addModel (nt_multiple_reference_declaration_ (_inLexique, var_cas_propertyTypeName)) ;
              } break ;
            default :
              break ;
          }
          _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1__3B) COMMA_HERE) ;
          } break ;
        default :
          syntaxRepeat = false ;
          break ;
      }
    }
  }
  _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1__7D) COMMA_HERE) ;
  GGS_metamodelEntity _entityInstance = GGS_metamodelEntity::constructor_new (_inLexique, var_cas_mEntityName, var_cas_mSuperEntityName, var_cas_mIsAbstract, var_cas_mAttributes, var_cas_mMultipleReferences COMMA_HERE) ;
  return _entityInstance ;
}

//---------------------------------------------------------------------------*
//                                                                           *
//Implementation of production rule 'attribute_or_single_reference_declaration'*
//                                                                           *
//---------------------------------------------------------------------------*

GGS_metamodelAttribute metamodelModelBuilder::
metamodelModelBuilder::
pr_attribute_or_single_reference_declaration_metamodelModelBuilder_156_6_ (galgas_scanner & _inLexique,
                                const GGS_lstring  var_cas_inPropertyTypeName) {
  GGS_lstring  var_cas_mAttributeTypeName ;
  GGS_lstring  var_cas_mAttributeName ;
  var_cas_mAttributeTypeName = var_cas_inPropertyTypeName ;
  _inLexique._assignFromAttribute_tokenString (var_cas_mAttributeName) ;
  _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_identifier) COMMA_HERE) ;
  GGS_metamodelAttribute _entityInstance = GGS_metamodelAttribute::constructor_new (_inLexique, var_cas_mAttributeTypeName, var_cas_mAttributeName COMMA_HERE) ;
  return _entityInstance ;
}

//---------------------------------------------------------------------------*
//                                                                           *
//    Implementation of production rule 'multiple_reference_declaration'     *
//                                                                           *
//---------------------------------------------------------------------------*

GGS_metamodelMultipleReference metamodelModelBuilder::
metamodelModelBuilder::
pr_multiple_reference_declaration_metamodelModelBuilder_163_6_ (galgas_scanner & _inLexique,
                                const GGS_lstring  var_cas_inPropertyTypeName) {
  GGS_lstring  var_cas_mAttributeTypeName ;
  GGS_lstring  var_cas_mAttributeName ;
  GGS_uint  var_cas_mLowerBound ;
  GGS_uint  var_cas_mUpperBound ;
  switch (select_metamodelModelBuilder_12 (_inLexique)) {
    case 1 : {
      var_cas_mLowerBound = GGS_uint (true, 0U) ;
      var_cas_mUpperBound = GGS_uint (true, 0U) ;
      } break ;
    case 2 : {
      GGS_luint  var_cas_lowerBound ;
      _inLexique._assignFromAttribute_uint32value (var_cas_lowerBound) ;
      _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_unsigned_5Fliteral_5Finteger) COMMA_HERE) ;
      var_cas_mLowerBound = var_cas_lowerBound.reader_uint (_inLexique COMMA_SOURCE_FILE_AT_LINE (170)) ;
      switch (select_metamodelModelBuilder_13 (_inLexique)) {
        case 1 : {
          var_cas_mUpperBound = var_cas_mLowerBound ;
          if (((var_cas_mLowerBound)._operator_isEqual (GGS_uint (true, 0U))).isBuiltAndTrue ()) {
            var_cas_lowerBound.reader_location (_inLexique COMMA_HERE).signalGGSSemanticError (_inLexique, GGS_string (true, "multiplicity should be greater than zero") COMMA_SOURCE_FILE_AT_LINE (175)) ;
          }
          } break ;
        case 2 : {
          _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1__2C) COMMA_HERE) ;
          switch (select_metamodelModelBuilder_14 (_inLexique)) {
            case 1 : {
              GGS_luint  var_cas_upperBound ;
              _inLexique._assignFromAttribute_uint32value (var_cas_upperBound) ;
              _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_unsigned_5Fliteral_5Finteger) COMMA_HERE) ;
              var_cas_mUpperBound = var_cas_upperBound.reader_uint (_inLexique COMMA_SOURCE_FILE_AT_LINE (181)) ;
              if (((var_cas_mUpperBound)._operator_strictInf (var_cas_mLowerBound)).isBuiltAndTrue ()) {
                var_cas_upperBound.reader_location (_inLexique COMMA_HERE).signalGGSSemanticError (_inLexique, GGS_string (true, "upper bound should be greater or equal to lower bound") COMMA_SOURCE_FILE_AT_LINE (184)) ;
              }else if ((((var_cas_mUpperBound)._operator_isEqual (GGS_uint (true, 0U)))._operator_and ((var_cas_mLowerBound)._operator_isEqual (GGS_uint (true, 0U)))).isBuiltAndTrue ()) {
                var_cas_upperBound.reader_location (_inLexique COMMA_HERE).signalGGSSemanticError (_inLexique, GGS_string (true, "lower bound and upper bound should not to be both zero") COMMA_SOURCE_FILE_AT_LINE (186)) ;
              }
              } break ;
            case 2 : {
              _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1__2A) COMMA_HERE) ;
              var_cas_mUpperBound = GGS_uint (true, 0U) ;
              } break ;
            default :
              break ;
          }
          } break ;
        default :
          break ;
      }
      } break ;
    default :
      break ;
  }
  _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1__5D) COMMA_HERE) ;
  var_cas_mAttributeTypeName = var_cas_inPropertyTypeName ;
  _inLexique._assignFromAttribute_tokenString (var_cas_mAttributeName) ;
  _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_identifier) COMMA_HERE) ;
  GGS_metamodelMultipleReference _entityInstance = GGS_metamodelMultipleReference::constructor_new (_inLexique, var_cas_mAttributeTypeName, var_cas_mAttributeName, var_cas_mLowerBound, var_cas_mUpperBound COMMA_HERE) ;
  return _entityInstance ;
}

//---------------------------------------------------------------------------*


//---------------------------------------------------------------------------*
//                                                                           *
//                      File 'treewalking_parser.cpp'                        *
//         Generated by version GALGAS_BETA_VERSION (LL(1) grammar)          *
//                       june 8th, 2007, at 20h28'24"                        *
//                                                                           *
//---------------------------------------------------------------------------*

//--- START OF USER ZONE 1


//--- END OF USER ZONE 1

//---------------------------------------------------------------------------*

#include "version_libpm.h"
#if LIBPM_VERSION != THE_LIBPM_VERSION
  #error "This file has been compiled with a version of GALGAS different than the version of libpm"
#endif

//---------------------------------------------------------------------------*

#include <typeinfo>
#include "utilities/MF_MemoryControl.h"
#include "files/C_TextFileWrite.h"
#include "treewalking_parser.h"

//---------------------------------------------------------------------------*

#ifndef DO_NOT_GENERATE_CHECKINGS
  #define SOURCE_FILE_AT_LINE(line) "treewalking_parser.gSyntax", line
  #define COMMA_SOURCE_FILE_AT_LINE(line) , SOURCE_FILE_AT_LINE(line)
#else
  #define SOURCE_FILE_AT_LINE(line) 
  #define COMMA_SOURCE_FILE_AT_LINE(line) 
#endif


//--- START OF USER ZONE 2


//--- END OF USER ZONE 2

//---------------------------------------------------------------------------*
//                                                                           *
//           Implementation of production rule 'galgas_component'            *
//                                                                           *
//---------------------------------------------------------------------------*

void treewalking_parser::
treewalking_parser::
pr_galgas_component_treewalking_parser_121_6_ (galgas_scanner & _inLexique,
                                GGS_M_lexiqueComponents  &/* var_cas_ioLexiqueMapForUse */,
                                GGS_M_semanticsComponents  &/* var_cas_ioSemanticsComponentsMap */,
                                GGS_M_syntaxComponents  &/* var_cas_ioSyntaxComponentsMap */,
                                GGS_M_grammarComponents  &/* var_cas_ioGrammarComponentsMap */,
                                GGS_M_optionComponents  &/* var_cas_ioOptionsComponentsMap */,
                                GGS_M_metamodelsComponents  &var_cas_ioMetamodelComponentMap,
                                GGS_M_treewalkingComponents  &var_cas_ioTreewalkingComponentMap) {
  nt_parse_treewalking_document_ (_inLexique, var_cas_ioMetamodelComponentMap, var_cas_ioTreewalkingComponentMap, GGS_bool (true, true)) ;
}

//---------------------------------------------------------------------------*

void treewalking_parser::
treewalking_parser::
pr_galgas_component_treewalking_parser_121_6_importLexique (galgas_scanner & _inLexique,
                                GGS_M_lexiqueComponents  &/* var_cas_ioLexiqueMapForUse */) {
  nt_parse_treewalking_document_parse (_inLexique) ;
}

//---------------------------------------------------------------------------*

void treewalking_parser::
treewalking_parser::
pr_galgas_component_treewalking_parser_121_6_importSyntax (galgas_scanner & _inLexique,
                                GGS_M_syntaxComponents  &/* var_cas_ioSyntaxComponentsMap */,
                                GGS_M_metamodelsComponents  &var_cas_ioMetamodelComponentMap,
                                GGS_M_treewalkingComponents  &var_cas_ioTreewalkingComponentMap) {
  nt_parse_treewalking_document_ (_inLexique, var_cas_ioMetamodelComponentMap, var_cas_ioTreewalkingComponentMap, GGS_bool (true, false)) ;
}

//---------------------------------------------------------------------------*

void treewalking_parser::
treewalking_parser::
pr_galgas_component_treewalking_parser_121_6_importSemantics (galgas_scanner & _inLexique,
                                GGS_M_semanticsComponents  &/* var_cas_ioSemanticsComponentsMap */,
                                GGS_M_metamodelsComponents  &var_cas_ioMetamodelComponentMap,
                                GGS_M_treewalkingComponents  &var_cas_ioTreewalkingComponentMap) {
  nt_parse_treewalking_document_ (_inLexique, var_cas_ioMetamodelComponentMap, var_cas_ioTreewalkingComponentMap, GGS_bool (true, false)) ;
}

//---------------------------------------------------------------------------*

void treewalking_parser::
treewalking_parser::
pr_galgas_component_treewalking_parser_121_6_importGrammarForSemantics (galgas_scanner & _inLexique,
                                GGS_M_grammarComponents  &/* var_cas_ioGrammarComponentsMap */,
                                GGS_M_metamodelsComponents  &var_cas_ioMetamodelComponentMap,
                                GGS_M_optionComponents  &/* var_cas_ioOptionsComponentsMap */,
                                GGS_M_treewalkingComponents  &var_cas_ioTreewalkingComponentMap) {
  nt_parse_treewalking_document_ (_inLexique, var_cas_ioMetamodelComponentMap, var_cas_ioTreewalkingComponentMap, GGS_bool (true, false)) ;
}

//---------------------------------------------------------------------------*

void treewalking_parser::
treewalking_parser::
pr_galgas_component_treewalking_parser_121_6_importOptions (galgas_scanner & _inLexique,
                                GGS_M_optionComponents  &/* var_cas_ioOptionsComponentsMap */) {
  nt_parse_treewalking_document_parse (_inLexique) ;
}

//---------------------------------------------------------------------------*
//                                                                           *
//      Implementation of production rule 'parse_treewalking_document'       *
//                                                                           *
//---------------------------------------------------------------------------*

void treewalking_parser::
treewalking_parser::
pr_parse_treewalking_document_treewalking_parser_179_6_ (galgas_scanner & _inLexique,
                                GGS_M_metamodelsComponents  &/* var_cas_ioMetamodelComponentMap */,
                                GGS_M_treewalkingComponents  &var_cas_ioTreewalkingComponentMap,
                                const GGS_bool var_cas_inGenerateTreewalkingCode) {
  _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_treewalking) COMMA_HERE) ;
  GGS_lstring  var_cas_treewalkingName ;
  _inLexique._assignFromAttribute_tokenString (var_cas_treewalkingName) ;
  _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_identifier) COMMA_HERE) ;
  _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1__28) COMMA_HERE) ;
  GGS_lstring  var_cas_metamodelName ;
  _inLexique._assignFromAttribute_tokenString (var_cas_metamodelName) ;
  _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_identifier) COMMA_HERE) ;
  _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1__29) COMMA_HERE) ;
  _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1__3A) COMMA_HERE) ;
  GGS_stringset  var_cas_filesToImportInHeaderSet ;
  var_cas_filesToImportInHeaderSet = GGS_stringset::constructor_setWithString (_inLexique, var_cas_metamodelName.reader_string (_inLexique COMMA_SOURCE_FILE_AT_LINE (194)) COMMA_HERE) ;
  GGS_M_semanticsComponents  var_cas_semanticsComponentMap ;
  var_cas_semanticsComponentMap = GGS_M_semanticsComponents::constructor_emptyMap (_inLexique COMMA_HERE) ;
  GGS_M_metamodelsComponents  var_cas_metamodelComponentMap ;
  var_cas_metamodelComponentMap = GGS_M_metamodelsComponents::constructor_emptyMap (_inLexique COMMA_HERE) ;
  GGS_M_treewalkingComponents  var_cas_treewalkingComponentMap ;
  var_cas_treewalkingComponentMap = GGS_M_treewalkingComponents::constructor_emptyMap (_inLexique COMMA_HERE) ;
  _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_import) COMMA_HERE) ;
  GGS_lstring  var_cas_fileName ;
  _inLexique._assignFromAttribute_tokenString (var_cas_fileName) ;
  _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_literal_5Fstring) COMMA_HERE) ;
  _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1__3B) COMMA_HERE) ;
  nt_parse_semantics_component_for_importing_ (_inLexique, var_cas_fileName, var_cas_semanticsComponentMap, var_cas_metamodelComponentMap, var_cas_treewalkingComponentMap) ;
  GGS_lstring  var_cas_metamodelRootEntity ;
  GGS_entityToImplementMap  var_cas_metamodelEntityMap ;
  GGS_stringset  var_cas_importedMetamodels ;
  if ((var_cas_metamodelComponentMap.reader_hasKey (_inLexique, var_cas_metamodelName.reader_string (_inLexique COMMA_SOURCE_FILE_AT_LINE (212)) COMMA_SOURCE_FILE_AT_LINE (212))).isBuiltAndTrue ()) {
    if (var_cas_metamodelComponentMap._isBuilt ()) {
      var_cas_metamodelComponentMap (HERE)->method_searchKey (_inLexique, var_cas_metamodelName, var_cas_metamodelRootEntity, var_cas_metamodelEntityMap, var_cas_importedMetamodels COMMA_SOURCE_FILE_AT_LINE (213)) ;
    }
    GGS_stringset  var_cas_superMetamodels ;
    var_cas_superMetamodels = GGS_stringset::constructor_emptySet (_inLexique COMMA_HERE) ;
    const GGS_stringset _var_8173 = var_cas_importedMetamodels ;
    const GGS_stringset::element_type * operand_8173 = _var_8173.firstObject () ;
    while ((operand_8173 != NULL)) {
      macroValidPointer (operand_8173) ;
      ::routine_performMetamodelInclusion (_inLexique,  var_cas_metamodelComponentMap,  GGS_lstring::constructor_new (_inLexique, operand_8173->mKey, GGS_location (_inLexique) COMMA_HERE),  var_cas_superMetamodels,  var_cas_metamodelEntityMap COMMA_SOURCE_FILE_AT_LINE (221)) ;
      operand_8173 = operand_8173->nextObject () ;
    }
  }else{
    var_cas_fileName.reader_location (_inLexique COMMA_HERE).signalGGSSemanticError (_inLexique, ((GGS_string (true, "this file does not define the '"))._operator_concat (var_cas_metamodelName.reader_string (_inLexique COMMA_SOURCE_FILE_AT_LINE (229))))._operator_concat (GGS_string (true, "' metamodel")) COMMA_SOURCE_FILE_AT_LINE (231)) ;
    var_cas_metamodelRootEntity._drop_operation () ;
    var_cas_metamodelEntityMap._drop_operation () ;
    var_cas_importedMetamodels._drop_operation () ;
  }
  GGS_M_optionComponents  var_cas_optionsComponentsMapForUse ;
  var_cas_optionsComponentsMapForUse = GGS_M_optionComponents::constructor_emptyMap (_inLexique COMMA_HERE) ;
  GGS_M_semanticsEntitiesForUse  var_cas_semanticsEntitiesMap ;
  ::routine_enterBuiltinTypes (_inLexique,  var_cas_semanticsEntitiesMap COMMA_SOURCE_FILE_AT_LINE (235)) ;
  { bool syntaxRepeat = true ;
    while (syntaxRepeat) {
      switch (select_repeat_treewalking_parser_0 (_inLexique)) {
        case 2 : {
          _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_import) COMMA_HERE) ;
          _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_semantics) COMMA_HERE) ;
          GGS_lstring  var_cas_semanticsComponentName ;
          _inLexique._assignFromAttribute_tokenString (var_cas_semanticsComponentName) ;
          _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_identifier) COMMA_HERE) ;
          var_cas_filesToImportInHeaderSet._addAssign_operation (var_cas_semanticsComponentName.reader_string (_inLexique COMMA_SOURCE_FILE_AT_LINE (242))) ;
          _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_in) COMMA_HERE) ;
          GGS_lstring  var_cas_fileName ;
          _inLexique._assignFromAttribute_tokenString (var_cas_fileName) ;
          _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_literal_5Fstring) COMMA_HERE) ;
          _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1__3B) COMMA_HERE) ;
          nt_parse_semantics_component_for_importing_ (_inLexique, var_cas_fileName, var_cas_semanticsComponentMap, var_cas_metamodelComponentMap, var_cas_treewalkingComponentMap) ;
          GGS_M_semanticsEntitiesForUse  var_cas_importedSemanticsEntitiesMap ;
          GGS_ModelMap  automatic_var_0 ;
          GGS_ActionMap  automatic_var_1 ;
          GGS_stringset  automatic_var_2 ;
          GGS_stringset  automatic_var_3 ;
          GGS_stringset  automatic_var_4 ;
          GGS_M_optionComponents  automatic_var_5 ;
          if (var_cas_semanticsComponentMap._isBuilt ()) {
            var_cas_semanticsComponentMap (HERE)->method_searchKey (_inLexique, var_cas_semanticsComponentName, automatic_var_0, automatic_var_1, automatic_var_2, automatic_var_3, automatic_var_4, automatic_var_5, var_cas_importedSemanticsEntitiesMap COMMA_SOURCE_FILE_AT_LINE (254)) ;
          }
          const GGS_M_semanticsEntitiesForUse _var_9411 = var_cas_importedSemanticsEntitiesMap ;
          const GGS_M_semanticsEntitiesForUse::element_type * operand_9411 = _var_9411.firstObject () ;
          while ((operand_9411 != NULL)) {
            macroValidPointer (operand_9411) ;
            if (((var_cas_semanticsEntitiesMap.reader_hasKey (_inLexique, operand_9411->mKey.reader_string (_inLexique COMMA_SOURCE_FILE_AT_LINE (256)) COMMA_SOURCE_FILE_AT_LINE (256)))._operator_not ()).isBuiltAndTrue ()) {
              var_cas_semanticsEntitiesMap.modifier_insertKey (_inLexique, operand_9411->mKey, operand_9411->mInfo.aDefEntite COMMA_SOURCE_FILE_AT_LINE (257)) ;
            }
            operand_9411 = operand_9411->nextObject () ;
          }
          } break ;
        default :
          syntaxRepeat = false ;
          break ;
      }
    }
  }
  const GGS_M_metamodelsComponents _var_9668 = var_cas_metamodelComponentMap ;
  const GGS_M_metamodelsComponents::element_type * operand_9668 = _var_9668.firstObject () ;
  while ((operand_9668 != NULL)) {
    macroValidPointer (operand_9668) ;
    const GGS_entityToImplementMap _var_9812 = operand_9668->mInfo.mEntityMap ;
    const GGS_entityToImplementMap::element_type * operand_9812 = _var_9812.firstObject () ;
    while ((operand_9812 != NULL)) {
      macroValidPointer (operand_9812) ;
      if (((var_cas_semanticsEntitiesMap.reader_hasKey (_inLexique, operand_9812->mKey.reader_string (_inLexique COMMA_SOURCE_FILE_AT_LINE (271)) COMMA_SOURCE_FILE_AT_LINE (271)))._operator_not ()).isBuiltAndTrue ()) {
        GGS_AC_galgasType  var_cas_t ;
        var_cas_t = GGS_typeGalgas_singleReferenceEntity::constructor_new (_inLexique, operand_9812->mKey, operand_9812->mInfo.mPropertyList, operand_9812->mInfo.mAncestorClassesMap.reader_allKeys (_inLexique COMMA_SOURCE_FILE_AT_LINE (275)) COMMA_HERE) ;
        var_cas_semanticsEntitiesMap.modifier_insertKey (_inLexique, operand_9812->mKey, GGS_typeEntiteType::constructor_new (_inLexique, var_cas_t COMMA_HERE) COMMA_SOURCE_FILE_AT_LINE (277)) ;
      }
      operand_9812 = operand_9812->nextObject () ;
    }
    operand_9668 = operand_9668->nextObject () ;
  }
  { bool syntaxRepeat = true ;
    while (syntaxRepeat) {
      switch (select_repeat_treewalking_parser_1 (_inLexique)) {
        case 2 : {
          _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_import_5F_5F) COMMA_HERE) ;
          GGS_lstring  var_cas_grammarFileName ;
          _inLexique._assignFromAttribute_tokenString (var_cas_grammarFileName) ;
          _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_literal_5Fstring) COMMA_HERE) ;
          GGS_M_grammarComponents  var_cas_grammarComponentsMap ;
          var_cas_grammarComponentsMap = GGS_M_grammarComponents::constructor_emptyMap (_inLexique COMMA_HERE) ;
          GGS_M_treewalkingComponents  var_cas_unusedTreewalkingComponentMap ;
          var_cas_unusedTreewalkingComponentMap = GGS_M_treewalkingComponents::constructor_emptyMap (_inLexique COMMA_HERE) ;
          GGS_M_optionComponents  var_cas_unusedOptionsComponentsMapForUse ;
          var_cas_unusedOptionsComponentsMapForUse = GGS_M_optionComponents::constructor_emptyMap (_inLexique COMMA_HERE) ;
          nt_parse_grammar_component_for_importing_ (_inLexique, var_cas_grammarFileName, var_cas_grammarComponentsMap, var_cas_metamodelComponentMap, var_cas_unusedOptionsComponentsMapForUse, var_cas_unusedTreewalkingComponentMap) ;
          _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1__3B) COMMA_HERE) ;
          const GGS_M_grammarComponents _var_11324 = var_cas_grammarComponentsMap ;
          const GGS_M_grammarComponents::element_type * operand_11324 = _var_11324.firstObject () ;
          while ((operand_11324 != NULL)) {
            macroValidPointer (operand_11324) ;
            var_cas_filesToImportInHeaderSet._addAssign_operation (operand_11324->mKey.reader_string (_inLexique COMMA_SOURCE_FILE_AT_LINE (305))) ;
            if (((var_cas_semanticsEntitiesMap.reader_hasKey (_inLexique, operand_11324->mKey.reader_string (_inLexique COMMA_SOURCE_FILE_AT_LINE (306)) COMMA_SOURCE_FILE_AT_LINE (306)))._operator_not ()).isBuiltAndTrue ()) {
              GGS_M_nonterminalSymbolAlts  var_cas_grammarAltMap ;
              var_cas_grammarAltMap = GGS_M_nonterminalSymbolAlts::constructor_emptyMap (_inLexique COMMA_HERE) ;
              const GGS_M_nonterminalSymbolAltsForGrammar _var_11797 = operand_11324->mInfo.mNonterminalSymbolParametersMap ;
              const GGS_M_nonterminalSymbolAltsForGrammar::element_type * operand_11797 = _var_11797.firstObject () ;
              while ((operand_11797 != NULL)) {
                macroValidPointer (operand_11797) ;
                GGS_L_EXsignature  var_cas_formalParametersList ;
                var_cas_formalParametersList = GGS_L_EXsignature::constructor_emptyList (_inLexique COMMA_HERE) ;
                const GGS_L_signature _var_11975 = operand_11797->mInfo.mFormalParametersList ;
                const GGS_L_signature::element_type * operand_11975 = _var_11975.firstObject () ;
                while ((operand_11975 != NULL)) {
                  macroValidPointer (operand_11975) ;
                  GGS_AC_semanticsEntity  var_cas_e ;
                  if (var_cas_semanticsEntitiesMap._isBuilt ()) {
                    var_cas_semanticsEntitiesMap (HERE)->method_searchKey (_inLexique, operand_11975->mGalgasTypeName, var_cas_e COMMA_SOURCE_FILE_AT_LINE (312)) ;
                  }
                  GGS_AC_galgasType  var_cas_type ;
                  var_cas_type = GGS_typeEntiteType::_castFrom (_inLexique, var_cas_e.getPtr (), true, operand_11975->mGalgasTypeName COMMA_SOURCE_FILE_AT_LINE (313)).reader_aDefType (_inLexique COMMA_SOURCE_FILE_AT_LINE (313)) ;
                  var_cas_formalParametersList._addAssign_operation (var_cas_type, operand_11975->mFormalArgumentPassingMode) ;
                  operand_11975 = operand_11975->nextObject () ;
                }
                var_cas_grammarAltMap.modifier_insertKey (_inLexique, operand_11797->mKey, var_cas_formalParametersList, operand_11797->mInfo.mReturnedEntityTypeName COMMA_SOURCE_FILE_AT_LINE (316)) ;
                operand_11797 = operand_11797->nextObject () ;
              }
              GGS_AC_semanticsEntity  var_cas_e ;
              var_cas_e = GGS_C_grammarForSemantics::constructor_new (_inLexique, var_cas_grammarAltMap, operand_11324->mInfo.mLexiqueName COMMA_HERE) ;
              var_cas_semanticsEntitiesMap.modifier_insertKey (_inLexique, operand_11324->mKey, var_cas_e COMMA_SOURCE_FILE_AT_LINE (319)) ;
            }
            operand_11324 = operand_11324->nextObject () ;
          }
          } break ;
        default :
          syntaxRepeat = false ;
          break ;
      }
    }
  }
  GGS_treewalkingRoutineToGenerateList  var_cas_treewalkingRoutineToGenerateList ;
  var_cas_treewalkingRoutineToGenerateList = GGS_treewalkingRoutineToGenerateList::constructor_emptyList (_inLexique COMMA_HERE) ;
  GGS_treewalkingRoutineHeaderMap  var_cas_treewalkingRoutineHeaderMap ;
  var_cas_treewalkingRoutineHeaderMap = GGS_treewalkingRoutineHeaderMap::constructor_emptyMap (_inLexique COMMA_HERE) ;
  GGS_routineDispatcherSortedList  var_cas_routineDispatcherSortedList ;
  var_cas_routineDispatcherSortedList = GGS_routineDispatcherSortedList::constructor_emptySortedList (_inLexique COMMA_HERE) ;
  //--- First branch of parse/rewind instruction
    const C_parsingContext context_14238 = _inLexique.parsingContext () ;
    { bool syntaxRepeat = true ;
      while (syntaxRepeat) {
        switch (select_repeat_treewalking_parser_2 (_inLexique)) {
          case 2 : {
            nt_treewalking_routine_firstLocalPhase (_inLexique, var_cas_semanticsEntitiesMap, var_cas_treewalkingRoutineHeaderMap) ;
            } break ;
          default :
            syntaxRepeat = false ;
            break ;
        }
      }
    }
    GGS_L_EXsignature  var_cas_rootRoutineSignature ;
    GGS_typeListeTypesEtNomsArgMethode  var_cas_rootRoutineArgumentList ;
    if ((var_cas_treewalkingRoutineHeaderMap.reader_hasKey (_inLexique, var_cas_metamodelRootEntity.reader_string (_inLexique COMMA_SOURCE_FILE_AT_LINE (340)) COMMA_SOURCE_FILE_AT_LINE (340))).isBuiltAndTrue ()) {
      if (var_cas_treewalkingRoutineHeaderMap._isBuilt ()) {
        var_cas_treewalkingRoutineHeaderMap (HERE)->method_searchKey (_inLexique, var_cas_metamodelRootEntity, var_cas_rootRoutineSignature, var_cas_rootRoutineArgumentList COMMA_SOURCE_FILE_AT_LINE (341)) ;
      }
    }else{
      GGS_location (_inLexique).reader_location (_inLexique COMMA_HERE).signalGGSSemanticError (_inLexique, ((GGS_string (true, "a routine should be defined for the '@"))._operator_concat (var_cas_metamodelRootEntity.reader_string (_inLexique COMMA_SOURCE_FILE_AT_LINE (343))))._operator_concat (GGS_string (true, "' root class")) COMMA_SOURCE_FILE_AT_LINE (345)) ;
      var_cas_rootRoutineSignature._drop_operation () ;
      var_cas_rootRoutineArgumentList._drop_operation () ;
    }
    if (((var_cas_ioTreewalkingComponentMap.reader_hasKey (_inLexique, var_cas_treewalkingName.reader_string (_inLexique COMMA_SOURCE_FILE_AT_LINE (347)) COMMA_SOURCE_FILE_AT_LINE (347)))._operator_not ()).isBuiltAndTrue ()) {
      var_cas_ioTreewalkingComponentMap.modifier_insertKey (_inLexique, var_cas_treewalkingName, var_cas_metamodelRootEntity.reader_string (_inLexique COMMA_SOURCE_FILE_AT_LINE (350)), var_cas_rootRoutineSignature COMMA_SOURCE_FILE_AT_LINE (348)) ;
    }
  //--- Branch of parse/rewind instruction
    _inLexique.setParsingContext (context_14238) ;
    { bool syntaxRepeat = true ;
      while (syntaxRepeat) {
        switch (select_repeat_treewalking_parser_2 (_inLexique)) {
          case 2 : {
            nt_treewalking_routine_ (_inLexique, var_cas_semanticsEntitiesMap, var_cas_metamodelEntityMap, var_cas_optionsComponentsMapForUse, var_cas_treewalkingRoutineHeaderMap, var_cas_treewalkingRoutineToGenerateList, var_cas_ioTreewalkingComponentMap) ;
            } break ;
          default :
            syntaxRepeat = false ;
            break ;
        }
      }
    }
  //--- End of parse/rewind instruction
  if ((var_cas_inGenerateTreewalkingCode).isBuiltAndTrue ()) {
    const GGS_treewalkingRoutineHeaderMap _var_14470 = var_cas_treewalkingRoutineHeaderMap ;
    const GGS_treewalkingRoutineHeaderMap::element_type * operand_14470 = _var_14470.firstObject () ;
    while ((operand_14470 != NULL)) {
      macroValidPointer (operand_14470) ;
      GGS_uint  var_cas_entityID ;
      GGS_string var_cas_metamodelName ;
      GGS_entityPropertyMap  automatic_var_6 ;
      GGS_bool automatic_var_7 ;
      GGS_entityPropertyMap  automatic_var_8 ;
      GGS_lstring  automatic_var_9 ;
      GGS_typeSuperClassesMap  automatic_var_10 ;
      GGS_typeListeAttributsSemantiques  automatic_var_11 ;
      if (var_cas_metamodelEntityMap._isBuilt ()) {
        var_cas_metamodelEntityMap (HERE)->method_searchKey (_inLexique, operand_14470->mKey, automatic_var_6, automatic_var_7, automatic_var_8, automatic_var_9, automatic_var_10, automatic_var_11, var_cas_metamodelName, var_cas_entityID COMMA_SOURCE_FILE_AT_LINE (375)) ;
      }
      var_cas_routineDispatcherSortedList._addAssign_operation (var_cas_entityID.reader_string (_inLexique COMMA_SOURCE_FILE_AT_LINE (377)), var_cas_entityID, operand_14470->mKey.reader_string (_inLexique COMMA_SOURCE_FILE_AT_LINE (379)), operand_14470->mKey.reader_string (_inLexique COMMA_SOURCE_FILE_AT_LINE (380)), var_cas_metamodelName) ;
      GGS_lstring  var_cas_entityName ;
      var_cas_entityName = operand_14470->mKey ;
      GGS_uint _variant_15492 = var_cas_metamodelEntityMap.reader_count (_inLexique COMMA_SOURCE_FILE_AT_LINE (384)) ;
      GGS_bool _condition_15492 (_variant_15492._isBuilt (), true) ;
      while (_condition_15492.isBuiltAndTrue ()) {
        _condition_15492 = (var_cas_entityName.reader_string (_inLexique COMMA_SOURCE_FILE_AT_LINE (384)))._operator_isNotEqual (GGS_string (true, "")) ;
        if (_condition_15492.isBuiltAndTrue ()) {
          if (_variant_15492.uintValue () == 0) {
            _inLexique.onTheFlyRunTimeError ("loop variant error" COMMA_SOURCE_FILE_AT_LINE (397)) ;
            _condition_15492 = GGS_bool (true, false) ;
          }else{
            _variant_15492._decrement_operation (_inLexique COMMA_HERE) ;
            GGS_lstring  var_cas_superEntityName ;
            GGS_entityPropertyMap  automatic_var_12 ;
            GGS_bool automatic_var_13 ;
            GGS_entityPropertyMap  automatic_var_14 ;
            GGS_typeSuperClassesMap  automatic_var_15 ;
            GGS_typeListeAttributsSemantiques  automatic_var_16 ;
            GGS_string automatic_var_17 ;
            GGS_uint  automatic_var_18 ;
            if (var_cas_metamodelEntityMap._isBuilt ()) {
              var_cas_metamodelEntityMap (HERE)->method_searchKey (_inLexique, var_cas_entityName, automatic_var_12, automatic_var_13, automatic_var_14, var_cas_superEntityName, automatic_var_15, automatic_var_16, automatic_var_17, automatic_var_18 COMMA_SOURCE_FILE_AT_LINE (386)) ;
            }
            if ((var_cas_treewalkingRoutineHeaderMap.reader_hasKey (_inLexique, var_cas_superEntityName.reader_string (_inLexique COMMA_SOURCE_FILE_AT_LINE (387)) COMMA_SOURCE_FILE_AT_LINE (387))).isBuiltAndTrue ()) {
              GGS_L_EXsignature  var_cas_superRoutineSignature ;
              GGS_typeListeTypesEtNomsArgMethode  automatic_var_19 ;
              if (var_cas_treewalkingRoutineHeaderMap._isBuilt ()) {
                var_cas_treewalkingRoutineHeaderMap (HERE)->method_searchKey (_inLexique, var_cas_superEntityName, var_cas_superRoutineSignature, automatic_var_19 COMMA_SOURCE_FILE_AT_LINE (389)) ;
              }
              ::routine_verifierCompatibiliteSignatures (_inLexique,  operand_14470->mInfo.mRoutineSignature,  var_cas_superRoutineSignature,  operand_14470->mKey.reader_location (_inLexique COMMA_SOURCE_FILE_AT_LINE (393)) COMMA_SOURCE_FILE_AT_LINE (390)) ;
            }
            var_cas_entityName = var_cas_superEntityName ;
          }
        }
      }
      operand_14470 = operand_14470->nextObject () ;
    }
    if (var_cas_treewalkingName._isBuilt () &&
        var_cas_filesToImportInHeaderSet._isBuilt () &&
        var_cas_treewalkingRoutineToGenerateList._isBuilt () &&
        var_cas_routineDispatcherSortedList._isBuilt () &&
        var_cas_rootRoutineArgumentList._isBuilt () &&
        var_cas_metamodelRootEntity._isBuilt ()) {
      ::routine_generate_treewalking (_inLexique,  var_cas_treewalkingName,  var_cas_filesToImportInHeaderSet,  var_cas_treewalkingRoutineToGenerateList,  var_cas_routineDispatcherSortedList,  var_cas_rootRoutineArgumentList,  var_cas_metamodelRootEntity COMMA_SOURCE_FILE_AT_LINE (399)) ;
    }
  }
  _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_end) COMMA_HERE) ;
  _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_treewalking) COMMA_HERE) ;
  _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1__3B) COMMA_HERE) ;
}

//---------------------------------------------------------------------------*

void treewalking_parser::
pr_parse_treewalking_document_treewalking_parser_179_6_parse (galgas_scanner & _inLexique) {
  _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_treewalking) COMMA_HERE) ;
  _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_identifier) COMMA_HERE) ;
  _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1__28) COMMA_HERE) ;
  _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_identifier) COMMA_HERE) ;
  _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1__29) COMMA_HERE) ;
  _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1__3A) COMMA_HERE) ;
  _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_import) COMMA_HERE) ;
  _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_literal_5Fstring) COMMA_HERE) ;
  _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1__3B) COMMA_HERE) ;
  nt_parse_semantics_component_for_importing_parse (_inLexique) ;
  { bool syntaxRepeat = true ;
    while (syntaxRepeat) {
      switch (select_repeat_treewalking_parser_0 (_inLexique)) {
        case 2 : {
          _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_import) COMMA_HERE) ;
          _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_semantics) COMMA_HERE) ;
          _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_identifier) COMMA_HERE) ;
          _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_in) COMMA_HERE) ;
          _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_literal_5Fstring) COMMA_HERE) ;
          _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1__3B) COMMA_HERE) ;
          nt_parse_semantics_component_for_importing_parse (_inLexique) ;
          } break ;
        default :
          syntaxRepeat = false ;
          break ;
      }
    }
  }
  { bool syntaxRepeat = true ;
    while (syntaxRepeat) {
      switch (select_repeat_treewalking_parser_1 (_inLexique)) {
        case 2 : {
          _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_import_5F_5F) COMMA_HERE) ;
          _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_literal_5Fstring) COMMA_HERE) ;
          nt_parse_grammar_component_for_importing_parse (_inLexique) ;
          _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1__3B) COMMA_HERE) ;
          } break ;
        default :
          syntaxRepeat = false ;
          break ;
      }
    }
  }
  //--- First branch of parse/rewind instruction
    const C_parsingContext context_14238 = _inLexique.parsingContext () ;
    { bool syntaxRepeat = true ;
      while (syntaxRepeat) {
        switch (select_repeat_treewalking_parser_2 (_inLexique)) {
          case 2 : {
            nt_treewalking_routine_parse (_inLexique) ;
            } break ;
          default :
            syntaxRepeat = false ;
            break ;
        }
      }
    }
  //--- Branch of parse/rewind instruction
    _inLexique.setParsingContext (context_14238) ;
    { bool syntaxRepeat = true ;
      while (syntaxRepeat) {
        switch (select_repeat_treewalking_parser_2 (_inLexique)) {
          case 2 : {
            nt_treewalking_routine_parse (_inLexique) ;
            } break ;
          default :
            syntaxRepeat = false ;
            break ;
        }
      }
    }
  //--- End of parse/rewind instruction
  _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_end) COMMA_HERE) ;
  _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_treewalking) COMMA_HERE) ;
  _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1__3B) COMMA_HERE) ;
}

//---------------------------------------------------------------------------*
//                                                                           *
//         Implementation of production rule 'treewalking_routine'           *
//                                                                           *
//---------------------------------------------------------------------------*

void treewalking_parser::
treewalking_parser::
pr_treewalking_routine_treewalking_parser_417_6_ (galgas_scanner & _inLexique,
                                const GGS_M_semanticsEntitiesForUse  var_cas_inSemanticsEntitiesMap,
                                const GGS_entityToImplementMap  var_cas_inMetamodelEntityMap,
                                const GGS_M_optionComponents  var_cas_inOptionsComponentsMapForUse,
                                const GGS_treewalkingRoutineHeaderMap  var_cas_inTreewalkingRoutineHeaderMap,
                                GGS_treewalkingRoutineToGenerateList  &var_cas_ioTreewalkingRoutineToGenerateList,
                                const GGS_M_treewalkingComponents  var_cas_inTreewalkingComponentMap) {
  _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_rule) COMMA_HERE) ;
  GGS_lstring  var_cas_metamodelClassName ;
  _inLexique._assignFromAttribute_tokenString (var_cas_metamodelClassName) ;
  _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_type_5Fname) COMMA_HERE) ;
  GGS_entityPropertyMap  var_cas_allMetamodelPropertyMap ;
  GGS_bool automatic_var_20 ;
  GGS_entityPropertyMap  automatic_var_21 ;
  GGS_lstring  automatic_var_22 ;
  GGS_typeSuperClassesMap  automatic_var_23 ;
  GGS_typeListeAttributsSemantiques  automatic_var_24 ;
  GGS_string automatic_var_25 ;
  GGS_uint  automatic_var_26 ;
  if (var_cas_inMetamodelEntityMap._isBuilt ()) {
    var_cas_inMetamodelEntityMap (HERE)->method_searchKey (_inLexique, var_cas_metamodelClassName, var_cas_allMetamodelPropertyMap, automatic_var_20, automatic_var_21, automatic_var_22, automatic_var_23, automatic_var_24, automatic_var_25, automatic_var_26 COMMA_SOURCE_FILE_AT_LINE (429)) ;
  }
  GGS_typeTableEnAvant  var_cas_tableEnAvant ;
  var_cas_tableEnAvant = GGS_typeTableEnAvant::constructor_emptyMap (_inLexique COMMA_HERE) ;
  GGS_L_EXsignature  var_cas_listeDeTypes ;
  GGS_typeVariablesMap  var_cas_localVariableMap ;
  var_cas_localVariableMap = GGS_typeVariablesMap::constructor_emptyMap (_inLexique COMMA_HERE) ;
  GGS_typeListeTypesEtNomsArgMethode  var_cas_formalArgumentList ;
  GGS_L_signature  var_cas_signatureForGrammarComponent ;
  nt_formal_arguments_list_ (_inLexique, var_cas_inSemanticsEntitiesMap, var_cas_listeDeTypes, var_cas_localVariableMap, var_cas_formalArgumentList, var_cas_tableEnAvant, var_cas_signatureForGrammarComponent) ;
  const GGS_entityPropertyMap _var_17047 = var_cas_allMetamodelPropertyMap ;
  const GGS_entityPropertyMap::element_type * operand_17047 = _var_17047.firstObject () ;
  while ((operand_17047 != NULL)) {
    macroValidPointer (operand_17047) ;
    { const GGS_AC_galgasType _var_17412 = operand_17047->mInfo.mPropertyType ; // CAST instruction
      if (_var_17412.getPtr () != NULL) {
        macroValidPointer (_var_17412.getPtr ()) ;
        if (dynamic_cast <cPtr_typeGalgas_singleReferenceEntity *> (_var_17412.getPtr ()) != NULL) {
        }else if (dynamic_cast <cPtr_typeGalgas_multipleReferenceEntity *> (_var_17412.getPtr ()) != NULL) {
        }else{
          GGS_typeCplusPlusName  var_cas_cppName ;
          var_cas_cppName = GGS_typeCurrentObjectName::constructor_new (_inLexique, operand_17047->mKey.reader_location (_inLexique COMMA_SOURCE_FILE_AT_LINE (450)), operand_17047->mKey.reader_string (_inLexique COMMA_SOURCE_FILE_AT_LINE (450)) COMMA_HERE) ;
          var_cas_localVariableMap.modifier_insertUsedConstInArgument (_inLexique, operand_17047->mKey, operand_17047->mInfo.mPropertyType, var_cas_cppName COMMA_SOURCE_FILE_AT_LINE (451)) ;
        }
      }
    }
    operand_17047 = operand_17047->nextObject () ;
  }
  _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1__3A) COMMA_HERE) ;
  GGS_typeInstructionList  var_cas_instructionList ;
  var_cas_instructionList = GGS_typeInstructionList::constructor_emptyList (_inLexique COMMA_HERE) ;
  nt_semantic_instructions_list_ (_inLexique, var_cas_inTreewalkingRoutineHeaderMap, var_cas_tableEnAvant, var_cas_inSemanticsEntitiesMap, var_cas_inOptionsComponentsMapForUse, var_cas_localVariableMap, var_cas_instructionList, var_cas_allMetamodelPropertyMap, var_cas_inMetamodelEntityMap, var_cas_inTreewalkingComponentMap) ;
  var_cas_ioTreewalkingRoutineToGenerateList._addAssign_operation (var_cas_metamodelClassName, var_cas_formalArgumentList, var_cas_instructionList) ;
  _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_end) COMMA_HERE) ;
  _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_rule) COMMA_HERE) ;
  _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1__3B) COMMA_HERE) ;
}

//---------------------------------------------------------------------------*

void treewalking_parser::
treewalking_parser::
pr_treewalking_routine_treewalking_parser_417_6_firstLocalPhase (galgas_scanner & _inLexique,
                                const GGS_M_semanticsEntitiesForUse  var_cas_inSemanticsEntitiesMap,
                                GGS_treewalkingRoutineHeaderMap  &var_cas_ioTreewalkingRoutineHeaderMap) {
  _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_rule) COMMA_HERE) ;
  GGS_lstring  var_cas_metamodelClassName ;
  _inLexique._assignFromAttribute_tokenString (var_cas_metamodelClassName) ;
  _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_type_5Fname) COMMA_HERE) ;
  GGS_typeTableEnAvant  var_cas_tableEnAvant ;
  var_cas_tableEnAvant = GGS_typeTableEnAvant::constructor_emptyMap (_inLexique COMMA_HERE) ;
  GGS_L_EXsignature  var_cas_listeDeTypes ;
  GGS_typeVariablesMap  var_cas_localVariableMap ;
  var_cas_localVariableMap = GGS_typeVariablesMap::constructor_emptyMap (_inLexique COMMA_HERE) ;
  GGS_typeListeTypesEtNomsArgMethode  var_cas_formalArgumentList ;
  GGS_L_signature  var_cas_signatureForGrammarComponent ;
  nt_formal_arguments_list_ (_inLexique, var_cas_inSemanticsEntitiesMap, var_cas_listeDeTypes, var_cas_localVariableMap, var_cas_formalArgumentList, var_cas_tableEnAvant, var_cas_signatureForGrammarComponent) ;
  var_cas_ioTreewalkingRoutineHeaderMap.modifier_insertKey (_inLexique, var_cas_metamodelClassName, var_cas_listeDeTypes, var_cas_formalArgumentList COMMA_SOURCE_FILE_AT_LINE (499)) ;
  _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1__3A) COMMA_HERE) ;
  nt_semantic_instructions_list_parse (_inLexique) ;
  _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_end) COMMA_HERE) ;
  _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_rule) COMMA_HERE) ;
  _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1__3B) COMMA_HERE) ;
}

//---------------------------------------------------------------------------*

void treewalking_parser::
pr_treewalking_routine_treewalking_parser_417_6_parse (galgas_scanner & _inLexique) {
  _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_rule) COMMA_HERE) ;
  _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_type_5Fname) COMMA_HERE) ;
  nt_formal_arguments_list_parse (_inLexique) ;
  _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1__3A) COMMA_HERE) ;
  nt_semantic_instructions_list_parse (_inLexique) ;
  _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_end) COMMA_HERE) ;
  _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1_rule) COMMA_HERE) ;
  _inLexique.acceptTerminal (ACCEPT_TERMINAL (galgas_scanner::galgas_scanner_1__3B) COMMA_HERE) ;
}

//---------------------------------------------------------------------------*


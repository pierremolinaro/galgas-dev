//---------------------------------------------------------------------------*
//                                                                           *
//                       File 'constraint_parser.cpp'                        *
//         Generated by version GALGAS_BETA_VERSION (LL(1) grammar)          *
//                      april 7th, 2006, at 15h48'18"                        *
//                                                                           *
//---------------------------------------------------------------------------*

//--- START OF USER ZONE 1


//--- END OF USER ZONE 1

#include "utilities/MF_MemoryControl.h"
#include "files/C_TextFileWrite.h"
#include "constraint_parser.h"

//---------------------------------------------------------------------------*

#ifndef DO_NOT_GENERATE_CHECKINGS
  static const char gGGSsourceFile [] = "constraint_parser.ggs" ;
  #define SOURCE_FILE_AT_LINE(line) , gGGSsourceFile, line
#else
  #define SOURCE_FILE_AT_LINE(line) 
#endif


//--- START OF USER ZONE 2


//--- END OF USER ZONE 2

//---------------------------------------------------------------------------*
//                                                                           *
//           Implementation of production rule 'galgas_component'            *
//                                                                           *
//---------------------------------------------------------------------------*

void constraint_parser::
constraint_parser::
pr_galgas_component_constraint_parser_117_24_ (galgas_scanner & lexique_var_,
                                GGS_M_lexiqueComponents  &/* var_cas_ioLexiqueMapForUse */,
                                GGS_M_semanticsComponents  &/* var_cas_ioSemanticsComponentsMap */,
                                GGS_M_syntaxComponents  &/* var_cas_ioSyntaxComponentsMap */,
                                GGS_M_grammarComponents  &/* var_cas_ioGrammarComponentsMap */,
                                GGS_M_optionComponents  &/* var_cas_ioOptionsComponentsMap */,
                                GGS_M_metamodelsComponents  &var_cas_ioMetamodelComponentMap,
                                GGS_M_constraintComponents  &var_cas_ioConstraintComponentMap) {
  nt_parse_constraint_document_ (lexique_var_, var_cas_ioMetamodelComponentMap, var_cas_ioConstraintComponentMap) ;
}

//---------------------------------------------------------------------------*

void constraint_parser::
constraint_parser::
pr_galgas_component_constraint_parser_117_24_importLexique (galgas_scanner & lexique_var_,
                                GGS_M_lexiqueComponents  &/* var_cas_ioLexiqueMapForUse */) {
  nt_parse_constraint_document_parse (lexique_var_) ;
}

//---------------------------------------------------------------------------*

void constraint_parser::
constraint_parser::
pr_galgas_component_constraint_parser_117_24_importSyntax (galgas_scanner & lexique_var_,
                                GGS_M_syntaxComponents  &/* var_cas_ioSyntaxComponentsMap */,
                                GGS_M_metamodelsComponents  &var_cas_ioMetamodelComponentMap) {
  GGS_M_constraintComponents  var_cas_constraintComponentMap ;
  var_cas_constraintComponentMap = GGS_M_constraintComponents::constructor_empty (HERE) ;
  nt_parse_constraint_document_ (lexique_var_, var_cas_ioMetamodelComponentMap, var_cas_constraintComponentMap) ;
}

//---------------------------------------------------------------------------*

void constraint_parser::
constraint_parser::
pr_galgas_component_constraint_parser_117_24_importSemantics (galgas_scanner & lexique_var_,
                                GGS_M_semanticsComponents  &/* var_cas_ioSemanticsComponentsMap */,
                                GGS_M_metamodelsComponents  &var_cas_ioMetamodelComponentMap,
                                GGS_M_constraintComponents  &var_cas_ioConstraintComponentMap) {
  nt_parse_constraint_document_ (lexique_var_, var_cas_ioMetamodelComponentMap, var_cas_ioConstraintComponentMap) ;
}

//---------------------------------------------------------------------------*

void constraint_parser::
constraint_parser::
pr_galgas_component_constraint_parser_117_24_importGrammarForSemantics (galgas_scanner & lexique_var_,
                                GGS_M_grammarComponents  &/* var_cas_ioGrammarComponentsMap */,
                                GGS_M_metamodelsComponents  &var_cas_ioMetamodelComponentMap,
                                GGS_M_constraintComponents  &var_cas_ioConstraintComponentMap) {
  nt_parse_constraint_document_ (lexique_var_, var_cas_ioMetamodelComponentMap, var_cas_ioConstraintComponentMap) ;
}

//---------------------------------------------------------------------------*

void constraint_parser::
constraint_parser::
pr_galgas_component_constraint_parser_117_24_importOptions (galgas_scanner & lexique_var_,
                                GGS_M_optionComponents  &/* var_cas_ioOptionsComponentsMap */) {
  nt_parse_constraint_document_parse (lexique_var_) ;
}

//---------------------------------------------------------------------------*
//                                                                           *
//      Implementation of production rule 'parse_constraint_document'        *
//                                                                           *
//---------------------------------------------------------------------------*

void constraint_parser::
constraint_parser::
pr_parse_constraint_document_constraint_parser_169_33_ (galgas_scanner & lexique_var_,
                                GGS_M_metamodelsComponents  &/* var_cas_ioMetamodelComponentMap */,
                                GGS_M_constraintComponents  &var_cas_ioConstraintComponentMap) {
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_constraint) ;
  GGS_lstring  var_cas_constraintName ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
  var_cas_constraintName.defineAttribute (lexique_var_.tokenString, lexique_var_) ;
  GGS_passMap  var_cas_passMap ;
  var_cas_passMap = GGS_passMap::constructor_empty (HERE) ;
  switch (select_constraint_parser_0 (lexique_var_)) {
    case 1 : {
      } break ;
    case 2 : {
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__28) ;
      { bool syntaxRepeat = true ;
        while (syntaxRepeat) {
            GGS_lstring  var_cas_passName ;
            lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
            var_cas_passName.defineAttribute (lexique_var_.tokenString, lexique_var_) ;
            var_cas_passMap.methode_insertKey (lexique_var_, var_cas_passName SOURCE_FILE_AT_LINE (185)) ;
          switch (select_repeat_constraint_parser_1 (lexique_var_)) {
            case 2 : {
              lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__2C) ;
              } break ;
            default :
              syntaxRepeat = false ;
              break ;
          }
        }
      }
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__29) ;
      } break ;
    default :
      break ;
  }
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3A) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_import) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_metamodel) ;
  GGS_lstring  var_cas_metamodelName ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
  var_cas_metamodelName.defineAttribute (lexique_var_.tokenString, lexique_var_) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_in) ;
  GGS_lstring  var_cas_fileName ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_literal_5Fstring) ;
  var_cas_fileName.defineAttribute (lexique_var_.tokenString, lexique_var_) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3B) ;
  GGS_M_semanticsComponents  var_cas_unusedSemanticsMapForUse ;
  var_cas_unusedSemanticsMapForUse = GGS_M_semanticsComponents::constructor_empty (HERE) ;
  GGS_M_metamodelsComponents  var_cas_metamodelComponentMap ;
  var_cas_metamodelComponentMap = GGS_M_metamodelsComponents::constructor_empty (HERE) ;
  nt_parse_semantics_component_for_importing_ (lexique_var_, var_cas_fileName, var_cas_unusedSemanticsMapForUse, var_cas_metamodelComponentMap, var_cas_ioConstraintComponentMap) ;
  GGS_lstring  var_cas_rootEntity ;
  GGS_M_semanticsEntitiesForUse  var_cas_semanticsEntitiesMap ;
  GGS_entityToImplementMap  var_cas_entityMap ;
  GGS_stringset  var_cas_multiReferencedEntities ;
  var_cas_metamodelComponentMap.methode_searchKey (lexique_var_, var_cas_metamodelName, var_cas_rootEntity, var_cas_semanticsEntitiesMap, var_cas_entityMap, var_cas_multiReferencedEntities SOURCE_FILE_AT_LINE (215)) ;
  GGS_mapEntityMap  var_cas_mapEntityMap ;
  var_cas_mapEntityMap = GGS_mapEntityMap::constructor_empty (HERE) ;
  GGS_mapAndEntityUniqueMap  var_cas_mapAndEntityUniqueMap ;
  var_cas_mapAndEntityUniqueMap = GGS_mapAndEntityUniqueMap::constructor_empty (HERE) ;
  { bool syntaxRepeat = true ;
    while (syntaxRepeat) {
      switch (select_repeat_constraint_parser_2 (lexique_var_)) {
        case 2 : {
          nt_constraint_map_declaration_ (lexique_var_, var_cas_entityMap, var_cas_mapEntityMap) ;
          } break ;
        default :
          syntaxRepeat = false ;
          break ;
      }
    }
  }
  GGS_constrainedEntityMap  var_cas_constrainedEntityMap ;
  var_cas_constrainedEntityMap = GGS_constrainedEntityMap::constructor_empty (HERE) ;
  { bool syntaxRepeat = true ;
    while (syntaxRepeat) {
      switch (select_repeat_constraint_parser_3 (lexique_var_)) {
        case 2 : {
          nt_constraints_on_entity_declaration_ (lexique_var_, var_cas_entityMap, var_cas_mapEntityMap, var_cas_constrainedEntityMap, var_cas_passMap) ;
          } break ;
        default :
          syntaxRepeat = false ;
          break ;
      }
    }
  }
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_end) ;
  GGS_bool var_cas_constraintOnRootEntity ;
  var_cas_constraintOnRootEntity = var_cas_constrainedEntityMap.reader_hasKey (var_cas_rootEntity.reader_value ()) ;
  if (((! (var_cas_constraintOnRootEntity))).isBuiltAndTrue ()) {
      GGS_location (lexique_var_).reader_location ().signalGGSSemanticError (lexique_var_, GGS_string (true, "no constraint is defined on metamodel root entity") SOURCE_FILE_AT_LINE (246)) ;
  }
  if ((var_cas_constraintOnRootEntity).isBuiltAndTrue ()) {
    GGS_constrainedEntityPassMap  var_cas_constrainedEntityPassMapForRootEntity ;
    GGS_location  var_cas_endOfConstraintLocation ;
    GGS_stringset  var_cas_8147 ;
    GGS_relationMap  var_cas_8201 ;
    GGS_lstring  var_cas_8210 ;
    GGS_entityPropertyMap  var_cas_8219 ;
    GGS_contextPropertyMap  var_cas_8228 ;
    GGS_mapPropertyMap  var_cas_8237 ;
    GGS_contextParameterMap  var_cas_8246 ;
    GGS_insertionList  var_cas_8255 ;
    GGS_indexMap  var_cas_8264 ;
    GGS_fetchedPropertyMap  var_cas_8273 ;
    GGS_stringset  var_cas_8282 ;
    var_cas_constrainedEntityMap.methode_searchKey (lexique_var_, var_cas_rootEntity, var_cas_8147, var_cas_constrainedEntityPassMapForRootEntity, var_cas_8201, var_cas_8210, var_cas_8219, var_cas_8228, var_cas_8237, var_cas_8246, var_cas_8255, var_cas_8264, var_cas_8273, var_cas_8282, var_cas_endOfConstraintLocation SOURCE_FILE_AT_LINE (253)) ;
    if (((var_cas_constrainedEntityPassMapForRootEntity.reader_count ()) != (var_cas_passMap.reader_count ())).isBuiltAndTrue ()) {
        var_cas_endOfConstraintLocation.reader_location ().signalGGSSemanticError (lexique_var_, GGS_string (true, "the root entity constraint should define all passes") SOURCE_FILE_AT_LINE (269)) ;
    }
  }
  if (var_cas_passMap.isBuilt () &&
      var_cas_entityMap.isBuilt () &&
      var_cas_mapEntityMap.isBuilt () &&
      var_cas_metamodelName.isBuilt () &&
      var_cas_constraintName.isBuilt () &&
      var_cas_constrainedEntityMap.isBuilt () &&
      var_cas_multiReferencedEntities.isBuilt () &&
      var_cas_rootEntity.isBuilt ()) {
    ::routine_generate_constraints (lexique_var_,  var_cas_passMap,  var_cas_entityMap,  var_cas_mapEntityMap,  var_cas_metamodelName,  var_cas_constraintName,  var_cas_constrainedEntityMap,  var_cas_multiReferencedEntities,  var_cas_rootEntity SOURCE_FILE_AT_LINE (274)) ;
  }
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_constraint) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3B) ;
}

//---------------------------------------------------------------------------*

void constraint_parser::
pr_parse_constraint_document_constraint_parser_169_33_parse (galgas_scanner & lexique_var_) {
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_constraint) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
  switch (select_constraint_parser_0 (lexique_var_)) {
    case 1 : {
      } break ;
    case 2 : {
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__28) ;
      { bool syntaxRepeat = true ;
        while (syntaxRepeat) {
            lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
          switch (select_repeat_constraint_parser_1 (lexique_var_)) {
            case 2 : {
              lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__2C) ;
              } break ;
            default :
              syntaxRepeat = false ;
              break ;
          }
        }
      }
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__29) ;
      } break ;
    default :
      break ;
  }
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3A) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_import) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_metamodel) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_in) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_literal_5Fstring) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3B) ;
  nt_parse_semantics_component_for_importing_parse (lexique_var_) ;
  { bool syntaxRepeat = true ;
    while (syntaxRepeat) {
      switch (select_repeat_constraint_parser_2 (lexique_var_)) {
        case 2 : {
          nt_constraint_map_declaration_parse (lexique_var_) ;
          } break ;
        default :
          syntaxRepeat = false ;
          break ;
      }
    }
  }
  { bool syntaxRepeat = true ;
    while (syntaxRepeat) {
      switch (select_repeat_constraint_parser_3 (lexique_var_)) {
        case 2 : {
          nt_constraints_on_entity_declaration_parse (lexique_var_) ;
          } break ;
        default :
          syntaxRepeat = false ;
          break ;
      }
    }
  }
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_end) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_constraint) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3B) ;
}

//---------------------------------------------------------------------------*
//                                                                           *
//      Implementation of production rule 'constraint_map_declaration'       *
//                                                                           *
//---------------------------------------------------------------------------*

void constraint_parser::
constraint_parser::
pr_constraint_map_declaration_constraint_parser_289_34_ (galgas_scanner & lexique_var_,
                                GGS_entityToImplementMap  &var_cas_ioEntityMap,
                                GGS_mapEntityMap  &var_cas_ioMapEntityMap) {
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_map) ;
  GGS_lstring  var_cas_mapIdentifier ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_type_5Fname) ;
  var_cas_mapIdentifier.defineAttribute (lexique_var_.tokenString, lexique_var_) ;
  if ((var_cas_ioEntityMap.reader_hasKey (var_cas_mapIdentifier.reader_value ())).isBuiltAndTrue ()) {
      var_cas_mapIdentifier.reader_location ().signalGGSSemanticError (lexique_var_, GGS_string (true, "An entity has been declared with this name") SOURCE_FILE_AT_LINE (297)) ;
  }
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_of) ;
  GGS_lstring  var_cas_mapElementIdentifier ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_type_5Fname) ;
  var_cas_mapElementIdentifier.defineAttribute (lexique_var_.tokenString, lexique_var_) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__7B) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_insert) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_error) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_message) ;
  GGS_lstring  var_cas_insertErrorMessage ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_literal_5Fstring) ;
  var_cas_insertErrorMessage.defineAttribute (lexique_var_.tokenString, lexique_var_) ;
  if (var_cas_insertErrorMessage.isBuilt ()) {
    ::routine_check_KL_escapeCharacters (lexique_var_,  var_cas_insertErrorMessage SOURCE_FILE_AT_LINE (308)) ;
  }
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3B) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_search) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_error) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_message) ;
  GGS_lstring  var_cas_searchErrorMessage ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_literal_5Fstring) ;
  var_cas_searchErrorMessage.defineAttribute (lexique_var_.tokenString, lexique_var_) ;
  if (var_cas_searchErrorMessage.isBuilt ()) {
    ::routine_check_K_escapeCharacters (lexique_var_,  var_cas_searchErrorMessage SOURCE_FILE_AT_LINE (315)) ;
  }
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3B) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__7D) ;
  var_cas_ioMapEntityMap.methode_insertKey (lexique_var_, var_cas_mapIdentifier, var_cas_mapElementIdentifier, var_cas_insertErrorMessage, var_cas_searchErrorMessage SOURCE_FILE_AT_LINE (319)) ;
}

//---------------------------------------------------------------------------*

void constraint_parser::
pr_constraint_map_declaration_constraint_parser_289_34_parse (galgas_scanner & lexique_var_) {
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_map) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_type_5Fname) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_of) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_type_5Fname) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__7B) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_insert) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_error) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_message) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_literal_5Fstring) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3B) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_search) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_error) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_message) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_literal_5Fstring) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3B) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__7D) ;
}

//---------------------------------------------------------------------------*
//                                                                           *
//  Implementation of production rule 'constraints_on_entity_declaration'    *
//                                                                           *
//---------------------------------------------------------------------------*

void constraint_parser::
constraint_parser::
pr_constraints_on_entity_declaration_constraint_parser_328_41_ (galgas_scanner & lexique_var_,
                                GGS_entityToImplementMap  &var_cas_ioEntityMap,
                                GGS_mapEntityMap  &var_cas_ioMapEntityMap,
                                GGS_constrainedEntityMap  &var_cas_ioConstrainedEntityMap,
                                GGS_passMap  &var_cas_ioPassMap) {
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_constraint) ;
  GGS_lstring  var_cas_entityName ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_type_5Fname) ;
  var_cas_entityName.defineAttribute (lexique_var_.tokenString, lexique_var_) ;
  GGS_lstring  var_cas_superEntity ;
  GGS_entityPropertyMap  var_cas_allPropertyMap ;
  GGS_entityPropertyMap  var_cas_propertyMap ;
  GGS_bool var_cas_10302 ;
  var_cas_ioEntityMap.methode_searchKey (lexique_var_, var_cas_entityName, var_cas_allPropertyMap, var_cas_10302, var_cas_propertyMap, var_cas_superEntity SOURCE_FILE_AT_LINE (343)) ;
  GGS_stringset  var_cas_descendantEntitySet ;
  var_cas_descendantEntitySet = GGS_stringset::constructor_empty (HERE) ;
  ::routine_computeDescendantSet (lexique_var_,  var_cas_ioEntityMap,  var_cas_entityName,  var_cas_descendantEntitySet SOURCE_FILE_AT_LINE (350)) ;
  GGS_contextPropertyMap  var_cas_contextPropertyMap ;
  var_cas_contextPropertyMap = GGS_contextPropertyMap::constructor_empty (HERE) ;
  switch (select_constraint_parser_4 (lexique_var_)) {
    case 1 : {
      } break ;
    case 2 : {
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__28) ;
      { bool syntaxRepeat = true ;
        while (syntaxRepeat) {
            GGS_lstring  var_cas_entityName ;
            lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_type_5Fname) ;
            var_cas_entityName.defineAttribute (lexique_var_.tokenString, lexique_var_) ;
            GGS_bool var_cas_isMap ;
            if ((var_cas_ioMapEntityMap.reader_hasKey (var_cas_entityName.reader_value ())).isBuiltAndTrue ()) {
              var_cas_isMap = GGS_bool (true, true) ;
            }else if ((var_cas_ioEntityMap.reader_hasKey (var_cas_entityName.reader_value ())).isBuiltAndTrue ()) {
              var_cas_isMap = GGS_bool (true, false) ;
            }else{
                var_cas_entityName.reader_location ().signalGGSSemanticError (lexique_var_, GGS_string (true, "this type is not defined") SOURCE_FILE_AT_LINE (365)) ;
            }
            GGS_lstring  var_cas_contextPropertyName ;
            lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
            var_cas_contextPropertyName.defineAttribute (lexique_var_.tokenString, lexique_var_) ;
            var_cas_contextPropertyMap.methode_insertKey (lexique_var_, var_cas_contextPropertyName, var_cas_entityName, var_cas_isMap SOURCE_FILE_AT_LINE (369)) ;
          switch (select_repeat_constraint_parser_5 (lexique_var_)) {
            case 2 : {
              lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__2C) ;
              } break ;
            default :
              syntaxRepeat = false ;
              break ;
          }
        }
      }
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__29) ;
      } break ;
    default :
      break ;
  }
  GGS_relationMap  var_cas_allRelationMap ;
  var_cas_allRelationMap = GGS_relationMap::constructor_empty (HERE) ;
  GGS_stringset  var_cas_passesDefinedByInheritanceTreeRootEntity ;
  var_cas_passesDefinedByInheritanceTreeRootEntity = GGS_stringset::constructor_empty (HERE) ;
  if (((var_cas_superEntity.reader_value ()) != (GGS_string (true, ""))).isBuiltAndTrue ()) {
    if ((var_cas_ioConstrainedEntityMap.reader_hasKey (var_cas_superEntity.reader_value ())).isBuiltAndTrue ()) {
      GGS_constrainedEntityPassMap  var_cas_11516 ;
      GGS_lstring  var_cas_11551 ;
      GGS_entityPropertyMap  var_cas_11562 ;
      GGS_mapPropertyMap  var_cas_11601 ;
      GGS_contextParameterMap  var_cas_11612 ;
      GGS_insertionList  var_cas_11623 ;
      GGS_indexMap  var_cas_11634 ;
      GGS_fetchedPropertyMap  var_cas_11645 ;
      GGS_stringset  var_cas_11656 ;
      GGS_location  var_cas_11667 ;
      var_cas_ioConstrainedEntityMap.methode_searchKey (lexique_var_, var_cas_superEntity, var_cas_passesDefinedByInheritanceTreeRootEntity, var_cas_11516, var_cas_allRelationMap, var_cas_11551, var_cas_11562, var_cas_contextPropertyMap, var_cas_11601, var_cas_11612, var_cas_11623, var_cas_11634, var_cas_11645, var_cas_11656, var_cas_11667 SOURCE_FILE_AT_LINE (381)) ;
    }else{
        var_cas_entityName.reader_location ().signalGGSSemanticError (lexique_var_, ((((GGS_string (true, "constraints for super entity ('@")) + (var_cas_superEntity.reader_value ()))) + (GGS_string (true, "') should be previously defined"))) SOURCE_FILE_AT_LINE (397)) ;
    }
  }
  GGS_relationMap  var_cas_relationToImplementMap ;
  var_cas_relationToImplementMap = GGS_relationMap::constructor_empty (HERE) ;
  GGS_indexMap  var_cas_indexMap ;
  var_cas_indexMap = GGS_indexMap::constructor_empty (HERE) ;
  GGS_fetchedPropertyMap  var_cas_fetchedPropertyMap ;
  var_cas_fetchedPropertyMap = GGS_fetchedPropertyMap::constructor_empty (HERE) ;
  GGS_insertionList  var_cas_insertionList ;
  var_cas_insertionList = GGS_insertionList::constructor_empty (HERE) ;
  GGS_mapPropertyMap  var_cas_mapPropertyMap ;
  var_cas_mapPropertyMap = GGS_mapPropertyMap::constructor_empty (HERE) ;
  GGS_contextParameterMap  var_cas_contextParameterMap ;
  var_cas_contextParameterMap = GGS_contextParameterMap::constructor_empty (HERE) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__7B) ;
  { bool syntaxRepeat = true ;
    while (syntaxRepeat) {
      switch (select_repeat_constraint_parser_6 (lexique_var_)) {
        case 2 : {
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_insert) ;
          GGS_lstring  var_cas_attributeName ;
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
          var_cas_attributeName.defineAttribute (lexique_var_.tokenString, lexique_var_) ;
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_in) ;
          GGS_lstring  var_cas_mapPropertyName ;
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
          var_cas_mapPropertyName.defineAttribute (lexique_var_.tokenString, lexique_var_) ;
          GGS_lstring  var_cas_indexName ;
          switch (select_constraint_parser_7 (lexique_var_)) {
            case 1 : {
              var_cas_indexName = GGS_lstring::constructor_new (GGS_string (true, ""), GGS_location (lexique_var_) COMMA_HERE) ;
              } break ;
            case 2 : {
              lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3C) ;
              lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
              var_cas_indexName.defineAttribute (lexique_var_.tokenString, lexique_var_) ;
              var_cas_indexMap.methode_insertKey (lexique_var_, var_cas_indexName, var_cas_mapPropertyName SOURCE_FILE_AT_LINE (422)) ;
              lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3E) ;
              } break ;
            default :
              break ;
          }
          var_cas_insertionList.addAssign_operation (var_cas_attributeName, var_cas_mapPropertyName, var_cas_indexName) ;
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3B) ;
          } break ;
        case 3 : {
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_context) ;
          GGS_lstring  var_cas_referencePropertyName ;
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
          var_cas_referencePropertyName.defineAttribute (lexique_var_.tokenString, lexique_var_) ;
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3A) ;
          GGS_L_lstringList  var_cas_contextParameterList ;
          var_cas_contextParameterList = GGS_L_lstringList::constructor_empty (HERE) ;
          { bool syntaxRepeat = true ;
            while (syntaxRepeat) {
                GGS_lstring  var_cas_contextPropertyName ;
                lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
                var_cas_contextPropertyName.defineAttribute (lexique_var_.tokenString, lexique_var_) ;
                var_cas_contextParameterList.addAssign_operation (var_cas_contextPropertyName) ;
              switch (select_repeat_constraint_parser_8 (lexique_var_)) {
                case 2 : {
                  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__2C) ;
                  } break ;
                default :
                  syntaxRepeat = false ;
                  break ;
              }
            }
          }
          var_cas_contextParameterMap.methode_insertKey (lexique_var_, var_cas_referencePropertyName, var_cas_contextParameterList SOURCE_FILE_AT_LINE (440)) ;
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3B) ;
          } break ;
        case 4 : {
          GGS_lstring  var_cas_propertyTypeName ;
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_type_5Fname) ;
          var_cas_propertyTypeName.defineAttribute (lexique_var_.tokenString, lexique_var_) ;
          GGS_lstring  var_cas_attributeName ;
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
          var_cas_attributeName.defineAttribute (lexique_var_.tokenString, lexique_var_) ;
          switch (select_constraint_parser_9 (lexique_var_)) {
            case 1 : {
              GGS_lstring  var_cas_13265 ;
              GGS_lstring  var_cas_13268 ;
              GGS_lstring  var_cas_13271 ;
              var_cas_ioMapEntityMap.methode_searchKey (lexique_var_, var_cas_propertyTypeName, var_cas_13265, var_cas_13268, var_cas_13271 SOURCE_FILE_AT_LINE (449)) ;
              var_cas_mapPropertyMap.methode_insertKey (lexique_var_, var_cas_attributeName, var_cas_propertyTypeName SOURCE_FILE_AT_LINE (450)) ;
              } break ;
            case 2 : {
              lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_search) ;
              GGS_lstring  var_cas_fetchedAttributeName ;
              lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
              var_cas_fetchedAttributeName.defineAttribute (lexique_var_.tokenString, lexique_var_) ;
              lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_in) ;
              GGS_lstring  var_cas_mapPropertyName ;
              lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
              var_cas_mapPropertyName.defineAttribute (lexique_var_.tokenString, lexique_var_) ;
              GGS_lstring  var_cas_indexName ;
              switch (select_constraint_parser_10 (lexique_var_)) {
                case 1 : {
                  var_cas_indexName = GGS_lstring::constructor_new (GGS_string (true, ""), GGS_location (lexique_var_) COMMA_HERE) ;
                  } break ;
                case 2 : {
                  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3C) ;
                  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
                  var_cas_indexName.defineAttribute (lexique_var_.tokenString, lexique_var_) ;
                  var_cas_indexMap.methode_insertKey (lexique_var_, var_cas_indexName, var_cas_mapPropertyName SOURCE_FILE_AT_LINE (465)) ;
                  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3E) ;
                  } break ;
                default :
                  break ;
              }
              var_cas_fetchedPropertyMap.methode_insertKey (lexique_var_, var_cas_attributeName, var_cas_propertyTypeName, var_cas_fetchedAttributeName, var_cas_mapPropertyName, var_cas_indexName SOURCE_FILE_AT_LINE (469)) ;
              } break ;
            default :
              break ;
          }
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3B) ;
          } break ;
        case 5 : {
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_relation) ;
          GGS_lstring  var_cas_relationIdentifier ;
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
          var_cas_relationIdentifier.defineAttribute (lexique_var_.tokenString, lexique_var_) ;
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__5B) ;
          GGS_relationVarMap  var_cas_relationVarMap ;
          var_cas_relationVarMap = GGS_relationVarMap::constructor_empty (HERE) ;
          { bool syntaxRepeat = true ;
            while (syntaxRepeat) {
                GGS_lstring  var_cas_localVar ;
                lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
                var_cas_localVar.defineAttribute (lexique_var_.tokenString, lexique_var_) ;
                lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3A) ;
                GGS_lstring  var_cas_domainVariable ;
                lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
                var_cas_domainVariable.defineAttribute (lexique_var_.tokenString, lexique_var_) ;
                var_cas_relationVarMap.methode_insertKey (lexique_var_, var_cas_localVar, var_cas_domainVariable SOURCE_FILE_AT_LINE (489)) ;
              switch (select_repeat_constraint_parser_11 (lexique_var_)) {
                case 2 : {
                  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__2C) ;
                  } break ;
                default :
                  syntaxRepeat = false ;
                  break ;
              }
            }
          }
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__5D) ;
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3A_3D) ;
          GGS_metamodelRelationExpression  var_cas_e ;
          nt_constraint_relation_expression_ (lexique_var_, var_cas_relationVarMap, var_cas_indexMap, var_cas_e) ;
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3B) ;
          var_cas_allRelationMap.methode_insertKey (lexique_var_, var_cas_relationIdentifier, var_cas_relationVarMap, var_cas_e SOURCE_FILE_AT_LINE (498)) ;
          var_cas_relationToImplementMap.methode_insertKey (lexique_var_, var_cas_relationIdentifier, var_cas_relationVarMap, var_cas_e SOURCE_FILE_AT_LINE (499)) ;
          } break ;
        case 6 : {
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_override) ;
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_relation) ;
          GGS_lstring  var_cas_relationIdentifier ;
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
          var_cas_relationIdentifier.defineAttribute (lexique_var_.tokenString, lexique_var_) ;
          GGS_relationVarMap  var_cas_relationVarMap ;
          GGS_metamodelRelationExpression  var_cas_14924 ;
          var_cas_allRelationMap.methode_searchKey (lexique_var_, var_cas_relationIdentifier, var_cas_relationVarMap, var_cas_14924 SOURCE_FILE_AT_LINE (506)) ;
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3A_3D) ;
          GGS_metamodelRelationExpression  var_cas_e ;
          nt_constraint_relation_expression_ (lexique_var_, var_cas_relationVarMap, var_cas_indexMap, var_cas_e) ;
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3B) ;
          var_cas_relationToImplementMap.methode_insertKey (lexique_var_, var_cas_relationIdentifier, var_cas_relationVarMap, var_cas_e SOURCE_FILE_AT_LINE (511)) ;
          } break ;
        default :
          syntaxRepeat = false ;
          break ;
      }
    }
  }
  GGS_constrainedEntityPassMap  var_cas_constrainedEntityPassMap ;
  var_cas_constrainedEntityPassMap = GGS_constrainedEntityPassMap::constructor_empty (HERE) ;
  GGS_uint  var_cas_currentIndex ;
  var_cas_currentIndex = GGS_uint (true, 0UL) ;
  { bool syntaxRepeat = true ;
    while (syntaxRepeat) {
      switch (select_repeat_constraint_parser_12 (lexique_var_)) {
        case 2 : {
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_on) ;
          GGS_lstring  var_cas_passName ;
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
          var_cas_passName.defineAttribute (lexique_var_.tokenString, lexique_var_) ;
          GGS_luint  var_cas_index ;
          var_cas_ioPassMap.methode_searchKeyAndGetIndex (lexique_var_, var_cas_passName, var_cas_index SOURCE_FILE_AT_LINE (522)) ;
          var_cas_constrainedEntityPassMap.methode_insertKey (lexique_var_, var_cas_passName SOURCE_FILE_AT_LINE (523)) ;
          if (((var_cas_index.reader_value ()) < (var_cas_currentIndex)).isBuiltAndTrue ()) {
              var_cas_passName.reader_location ().signalGGSSemanticError (lexique_var_, GGS_string (true, "the pass order is incorrect") SOURCE_FILE_AT_LINE (525)) ;
          }
          var_cas_currentIndex = var_cas_index.reader_value () ;
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3A) ;
          } break ;
        default :
          syntaxRepeat = false ;
          break ;
      }
    }
  }
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__7D) ;
  if (((var_cas_superEntity.reader_value ()) == (GGS_string (true, ""))).isBuiltAndTrue ()) {
    GGS_constrainedEntityPassMap::element_type * operand_15791 = var_cas_constrainedEntityPassMap.firstObject () ;
    while ((operand_15791 != NULL)) {
      macroValidPointer (operand_15791) ;
      var_cas_passesDefinedByInheritanceTreeRootEntity.addAssign_operation (operand_15791->mKey.reader_value ()) ;
      operand_15791 = operand_15791->nextObject () ;
    }
  }
  if (((var_cas_superEntity.reader_value ()) != (GGS_string (true, ""))).isBuiltAndTrue ()) {
    GGS_constrainedEntityPassMap::element_type * operand_16106 = var_cas_constrainedEntityPassMap.firstObject () ;
    while ((operand_16106 != NULL)) {
      macroValidPointer (operand_16106) ;
      if (((! (var_cas_passesDefinedByInheritanceTreeRootEntity.reader_hasKey (operand_16106->mKey.reader_value ())))).isBuiltAndTrue ()) {
          GGS_location (lexique_var_).reader_location ().signalGGSSemanticError (lexique_var_, ((((((((GGS_string (true, "pass '")) + (operand_16106->mKey.reader_value ()))) + (GGS_string (true, "' cannot be defined because it is not defined by the constraint on '@")))) + (var_cas_superEntity.reader_value ()))) + (GGS_string (true, "' entity"))) SOURCE_FILE_AT_LINE (544)) ;
      }
      operand_16106 = operand_16106->nextObject () ;
    }
  }
  var_cas_ioConstrainedEntityMap.methode_insertKey (lexique_var_, var_cas_entityName, var_cas_passesDefinedByInheritanceTreeRootEntity, var_cas_constrainedEntityPassMap, var_cas_allRelationMap, var_cas_superEntity, var_cas_propertyMap, var_cas_contextPropertyMap, var_cas_mapPropertyMap, var_cas_contextParameterMap, var_cas_insertionList, var_cas_indexMap, var_cas_fetchedPropertyMap, var_cas_descendantEntitySet, GGS_location (lexique_var_) SOURCE_FILE_AT_LINE (550)) ;
}

//---------------------------------------------------------------------------*

void constraint_parser::
pr_constraints_on_entity_declaration_constraint_parser_328_41_parse (galgas_scanner & lexique_var_) {
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_constraint) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_type_5Fname) ;
  switch (select_constraint_parser_4 (lexique_var_)) {
    case 1 : {
      } break ;
    case 2 : {
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__28) ;
      { bool syntaxRepeat = true ;
        while (syntaxRepeat) {
            lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_type_5Fname) ;
            lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
          switch (select_repeat_constraint_parser_5 (lexique_var_)) {
            case 2 : {
              lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__2C) ;
              } break ;
            default :
              syntaxRepeat = false ;
              break ;
          }
        }
      }
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__29) ;
      } break ;
    default :
      break ;
  }
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__7B) ;
  { bool syntaxRepeat = true ;
    while (syntaxRepeat) {
      switch (select_repeat_constraint_parser_6 (lexique_var_)) {
        case 2 : {
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_insert) ;
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_in) ;
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
          switch (select_constraint_parser_7 (lexique_var_)) {
            case 1 : {
              } break ;
            case 2 : {
              lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3C) ;
              lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
              lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3E) ;
              } break ;
            default :
              break ;
          }
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3B) ;
          } break ;
        case 3 : {
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_context) ;
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3A) ;
          { bool syntaxRepeat = true ;
            while (syntaxRepeat) {
                lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
              switch (select_repeat_constraint_parser_8 (lexique_var_)) {
                case 2 : {
                  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__2C) ;
                  } break ;
                default :
                  syntaxRepeat = false ;
                  break ;
              }
            }
          }
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3B) ;
          } break ;
        case 4 : {
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_type_5Fname) ;
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
          switch (select_constraint_parser_9 (lexique_var_)) {
            case 1 : {
              } break ;
            case 2 : {
              lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_search) ;
              lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
              lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_in) ;
              lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
              switch (select_constraint_parser_10 (lexique_var_)) {
                case 1 : {
                  } break ;
                case 2 : {
                  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3C) ;
                  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
                  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3E) ;
                  } break ;
                default :
                  break ;
              }
              } break ;
            default :
              break ;
          }
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3B) ;
          } break ;
        case 5 : {
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_relation) ;
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__5B) ;
          { bool syntaxRepeat = true ;
            while (syntaxRepeat) {
                lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
                lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3A) ;
                lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
              switch (select_repeat_constraint_parser_11 (lexique_var_)) {
                case 2 : {
                  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__2C) ;
                  } break ;
                default :
                  syntaxRepeat = false ;
                  break ;
              }
            }
          }
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__5D) ;
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3A_3D) ;
          nt_constraint_relation_expression_parse (lexique_var_) ;
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3B) ;
          } break ;
        case 6 : {
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_override) ;
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_relation) ;
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3A_3D) ;
          nt_constraint_relation_expression_parse (lexique_var_) ;
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3B) ;
          } break ;
        default :
          syntaxRepeat = false ;
          break ;
      }
    }
  }
  { bool syntaxRepeat = true ;
    while (syntaxRepeat) {
      switch (select_repeat_constraint_parser_12 (lexique_var_)) {
        case 2 : {
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_on) ;
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3A) ;
          } break ;
        default :
          syntaxRepeat = false ;
          break ;
      }
    }
  }
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__7D) ;
}

//---------------------------------------------------------------------------*
//                                                                           *
//     Implementation of production rule 'property_path_for_constraint'      *
//                                                                           *
//---------------------------------------------------------------------------*

void constraint_parser::
constraint_parser::
pr_property_path_for_constraint_constraint_parser_569_36_ (galgas_scanner & lexique_var_,
                                GGS_L_propertyPath  &var_cas_outPath) {
  var_cas_outPath = GGS_L_propertyPath::constructor_empty (HERE) ;
  { bool syntaxRepeat = true ;
    while (syntaxRepeat) {
        switch (select_constraint_parser_14 (lexique_var_)) {
          case 1 : {
            GGS_lstring  var_cas_pathElement ;
            lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
            var_cas_pathElement.defineAttribute (lexique_var_.tokenString, lexique_var_) ;
            var_cas_outPath.addAssign_operation (var_cas_pathElement) ;
            } break ;
          case 2 : {
            GGS_lstring  var_cas_pathElement ;
            lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_type_5Fname) ;
            var_cas_pathElement.defineAttribute (lexique_var_.tokenString, lexique_var_) ;
            var_cas_outPath.addAssign_operation (GGS_lstring::constructor_new (((GGS_string (true, ".")) + (var_cas_pathElement.reader_value ())), var_cas_pathElement.reader_location () COMMA_HERE)) ;
            } break ;
          default :
            break ;
        }
      switch (select_repeat_constraint_parser_13 (lexique_var_)) {
        case 2 : {
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__2E) ;
          } break ;
        default :
          syntaxRepeat = false ;
          break ;
      }
    }
  }
}

//---------------------------------------------------------------------------*

void constraint_parser::
pr_property_path_for_constraint_constraint_parser_569_36_parse (galgas_scanner & lexique_var_) {
  { bool syntaxRepeat = true ;
    while (syntaxRepeat) {
        switch (select_constraint_parser_14 (lexique_var_)) {
          case 1 : {
            lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
            } break ;
          case 2 : {
            lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_type_5Fname) ;
            } break ;
          default :
            break ;
        }
      switch (select_repeat_constraint_parser_13 (lexique_var_)) {
        case 2 : {
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__2E) ;
          } break ;
        default :
          syntaxRepeat = false ;
          break ;
      }
    }
  }
}

//---------------------------------------------------------------------------*
//                                                                           *
//    Implementation of production rule 'constraint_relation_expression'     *
//                                                                           *
//---------------------------------------------------------------------------*

void constraint_parser::
constraint_parser::
pr_constraint_relation_expression_constraint_parser_590_38_ (galgas_scanner & lexique_var_,
                                GGS_relationVarMap  &var_cas_ioRelationVariableMap,
                                GGS_indexMap  &var_cas_ioIndexMap,
                                GGS_metamodelRelationExpression  &var_cas_outExpression) {
  nt_constraint_relation_term_ (lexique_var_, var_cas_ioRelationVariableMap, var_cas_ioIndexMap, var_cas_outExpression) ;
  { bool syntaxRepeat = true ;
    while (syntaxRepeat) {
      switch (select_repeat_constraint_parser_15 (lexique_var_)) {
        case 2 : {
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__7C) ;
          GGS_metamodelRelationExpression  var_cas_e ;
          nt_constraint_relation_term_ (lexique_var_, var_cas_ioRelationVariableMap, var_cas_ioIndexMap, var_cas_e) ;
          var_cas_outExpression = GGS_metamodelRelationOr::constructor_new (var_cas_outExpression, var_cas_e COMMA_HERE) ;
          } break ;
        default :
          syntaxRepeat = false ;
          break ;
      }
    }
  }
}

//---------------------------------------------------------------------------*

void constraint_parser::
pr_constraint_relation_expression_constraint_parser_590_38_parse (galgas_scanner & lexique_var_) {
  nt_constraint_relation_term_parse (lexique_var_) ;
  { bool syntaxRepeat = true ;
    while (syntaxRepeat) {
      switch (select_repeat_constraint_parser_15 (lexique_var_)) {
        case 2 : {
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__7C) ;
          nt_constraint_relation_term_parse (lexique_var_) ;
          } break ;
        default :
          syntaxRepeat = false ;
          break ;
      }
    }
  }
}

//---------------------------------------------------------------------------*
//                                                                           *
//       Implementation of production rule 'constraint_relation_term'        *
//                                                                           *
//---------------------------------------------------------------------------*

void constraint_parser::
constraint_parser::
pr_constraint_relation_term_constraint_parser_607_32_ (galgas_scanner & lexique_var_,
                                GGS_relationVarMap  &var_cas_ioRelationVariableMap,
                                GGS_indexMap  &var_cas_ioIndexMap,
                                GGS_metamodelRelationExpression  &var_cas_outExpression) {
  nt_constraint_relation_factor_ (lexique_var_, var_cas_ioRelationVariableMap, var_cas_ioIndexMap, var_cas_outExpression) ;
  { bool syntaxRepeat = true ;
    while (syntaxRepeat) {
      switch (select_repeat_constraint_parser_16 (lexique_var_)) {
        case 2 : {
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__26) ;
          GGS_metamodelRelationExpression  var_cas_e ;
          nt_constraint_relation_factor_ (lexique_var_, var_cas_ioRelationVariableMap, var_cas_ioIndexMap, var_cas_e) ;
          var_cas_outExpression = GGS_metamodelRelationOr::constructor_new (var_cas_outExpression, var_cas_e COMMA_HERE) ;
          } break ;
        default :
          syntaxRepeat = false ;
          break ;
      }
    }
  }
}

//---------------------------------------------------------------------------*

void constraint_parser::
pr_constraint_relation_term_constraint_parser_607_32_parse (galgas_scanner & lexique_var_) {
  nt_constraint_relation_factor_parse (lexique_var_) ;
  { bool syntaxRepeat = true ;
    while (syntaxRepeat) {
      switch (select_repeat_constraint_parser_16 (lexique_var_)) {
        case 2 : {
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__26) ;
          nt_constraint_relation_factor_parse (lexique_var_) ;
          } break ;
        default :
          syntaxRepeat = false ;
          break ;
      }
    }
  }
}

//---------------------------------------------------------------------------*
//                                                                           *
//      Implementation of production rule 'constraint_relation_factor'       *
//                                                                           *
//---------------------------------------------------------------------------*

void constraint_parser::
constraint_parser::
pr_constraint_relation_factor_constraint_parser_624_34_ (galgas_scanner & lexique_var_,
                                GGS_relationVarMap  &var_cas_ioRelationVariableMap,
                                GGS_indexMap  &var_cas_ioIndexMap,
                                GGS_metamodelRelationExpression  &var_cas_outExpression) {
  switch (select_constraint_parser_17 (lexique_var_)) {
    case 1 : {
      nt_constraint_relation_primary_ (lexique_var_, var_cas_ioRelationVariableMap, var_cas_ioIndexMap, var_cas_outExpression) ;
      } break ;
    case 2 : {
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_not) ;
      nt_constraint_relation_primary_ (lexique_var_, var_cas_ioRelationVariableMap, var_cas_ioIndexMap, var_cas_outExpression) ;
      var_cas_outExpression = GGS_metamodelRelationNot::constructor_new (var_cas_outExpression COMMA_HERE) ;
      } break ;
    default :
      break ;
  }
}

//---------------------------------------------------------------------------*

void constraint_parser::
pr_constraint_relation_factor_constraint_parser_624_34_parse (galgas_scanner & lexique_var_) {
  switch (select_constraint_parser_17 (lexique_var_)) {
    case 1 : {
      nt_constraint_relation_primary_parse (lexique_var_) ;
      } break ;
    case 2 : {
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_not) ;
      nt_constraint_relation_primary_parse (lexique_var_) ;
      } break ;
    default :
      break ;
  }
}

//---------------------------------------------------------------------------*
//                                                                           *
//     Implementation of production rule 'constraint_relation_primary'       *
//                                                                           *
//---------------------------------------------------------------------------*

void constraint_parser::
constraint_parser::
pr_constraint_relation_primary_constraint_parser_640_35_ (galgas_scanner & lexique_var_,
                                GGS_relationVarMap  &var_cas_ioRelationVariableMap,
                                GGS_indexMap  &var_cas_ioIndexMap,
                                GGS_metamodelRelationExpression  &var_cas_outExpression) {
  switch (select_constraint_parser_18 (lexique_var_)) {
    case 1 : {
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_true) ;
      var_cas_outExpression = GGS_metamodelRelationTrue::constructor_new (HERE) ;
      } break ;
    case 2 : {
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_false) ;
      var_cas_outExpression = GGS_metamodelRelationFalse::constructor_new (HERE) ;
      } break ;
    case 3 : {
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__28) ;
      nt_constraint_relation_expression_ (lexique_var_, var_cas_ioRelationVariableMap, var_cas_ioIndexMap, var_cas_outExpression) ;
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__29) ;
      } break ;
    case 4 : {
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__7B) ;
      GGS_lstring  var_cas_localVar ;
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
      var_cas_localVar.defineAttribute (lexique_var_.tokenString, lexique_var_) ;
      GGS_luint  var_cas_variableIndex ;
      GGS_lstring  var_cas_domainVariable ;
      var_cas_ioRelationVariableMap.methode_searchKeyAndGetIndex (lexique_var_, var_cas_localVar, var_cas_variableIndex, var_cas_domainVariable SOURCE_FILE_AT_LINE (661)) ;
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3D_3D) ;
      GGS_lstring  var_cas_indexVariableName ;
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
      var_cas_indexVariableName.defineAttribute (lexique_var_.tokenString, lexique_var_) ;
      GGS_lstring  var_cas_domainVariableFromIndex ;
      var_cas_ioIndexMap.methode_searchKey (lexique_var_, var_cas_indexVariableName, var_cas_domainVariableFromIndex SOURCE_FILE_AT_LINE (666)) ;
      if (((var_cas_domainVariable.reader_value ()) != (var_cas_domainVariableFromIndex.reader_value ())).isBuiltAndTrue ()) {
          var_cas_indexVariableName.reader_location ().signalGGSSemanticError (lexique_var_, ((((((((((((GGS_string (true, "this index refers to the '")) + (var_cas_domainVariableFromIndex.reader_value ()))) + (GGS_string (true, "' domain, while '")))) + (var_cas_localVar.reader_value ()))) + (GGS_string (true, "' relation variable refers to the '")))) + (var_cas_domainVariable.reader_value ()))) + (GGS_string (true, "' domain"))) SOURCE_FILE_AT_LINE (670)) ;
      }
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__7D) ;
      var_cas_outExpression = GGS_metamodelRelationPrimary::constructor_new (var_cas_ioRelationVariableMap, var_cas_localVar, var_cas_variableIndex, var_cas_indexVariableName, var_cas_domainVariable COMMA_HERE) ;
      } break ;
    case 5 : {
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_do) ;
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__28) ;
      GGS_L_propertyPath  var_cas_path ;
      nt_property_path_for_constraint_ (lexique_var_, var_cas_path) ;
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__5B) ;
      GGS_metamodelRelationParameterList  var_cas_parameterList ;
      var_cas_parameterList = GGS_metamodelRelationParameterList::constructor_empty (HERE) ;
      { bool syntaxRepeat = true ;
        while (syntaxRepeat) {
            GGS_lstring  var_cas_parameter ;
            lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
            var_cas_parameter.defineAttribute (lexique_var_.tokenString, lexique_var_) ;
            GGS_luint  var_cas_parameterIndex ;
            GGS_lstring  var_cas_domainVariable ;
            var_cas_ioRelationVariableMap.methode_searchKeyAndGetIndex (lexique_var_, var_cas_parameter, var_cas_parameterIndex, var_cas_domainVariable SOURCE_FILE_AT_LINE (686)) ;
            var_cas_parameterList.addAssign_operation (var_cas_parameter, var_cas_parameterIndex, var_cas_domainVariable) ;
          switch (select_repeat_constraint_parser_19 (lexique_var_)) {
            case 2 : {
              lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__2C) ;
              } break ;
            default :
              syntaxRepeat = false ;
              break ;
          }
        }
      }
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__5D) ;
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3A) ;
      GGS_lbool  var_cas_operationIsAnd ;
      switch (select_constraint_parser_20 (lexique_var_)) {
        case 1 : {
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__7C) ;
          var_cas_operationIsAnd = GGS_lbool::constructor_new (GGS_bool (true, false), GGS_location (lexique_var_) COMMA_HERE) ;
          } break ;
        case 2 : {
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__26) ;
          var_cas_operationIsAnd = GGS_lbool::constructor_new (GGS_bool (true, true), GGS_location (lexique_var_) COMMA_HERE) ;
          } break ;
        default :
          break ;
      }
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__29) ;
      var_cas_outExpression = GGS_metamodelRelationDo::constructor_new (var_cas_ioRelationVariableMap, var_cas_parameterList, var_cas_path, var_cas_operationIsAnd COMMA_HERE) ;
      } break ;
    default :
      break ;
  }
}

//---------------------------------------------------------------------------*

void constraint_parser::
pr_constraint_relation_primary_constraint_parser_640_35_parse (galgas_scanner & lexique_var_) {
  switch (select_constraint_parser_18 (lexique_var_)) {
    case 1 : {
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_true) ;
      } break ;
    case 2 : {
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_false) ;
      } break ;
    case 3 : {
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__28) ;
      nt_constraint_relation_expression_parse (lexique_var_) ;
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__29) ;
      } break ;
    case 4 : {
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__7B) ;
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3D_3D) ;
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__7D) ;
      } break ;
    case 5 : {
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_do) ;
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__28) ;
      nt_property_path_for_constraint_parse (lexique_var_) ;
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__5B) ;
      { bool syntaxRepeat = true ;
        while (syntaxRepeat) {
            lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
          switch (select_repeat_constraint_parser_19 (lexique_var_)) {
            case 2 : {
              lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__2C) ;
              } break ;
            default :
              syntaxRepeat = false ;
              break ;
          }
        }
      }
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__5D) ;
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3A) ;
      switch (select_constraint_parser_20 (lexique_var_)) {
        case 1 : {
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__7C) ;
          } break ;
        case 2 : {
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__26) ;
          } break ;
        default :
          break ;
      }
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__29) ;
      } break ;
    default :
      break ;
  }
}

//---------------------------------------------------------------------------*


//---------------------------------------------------------------------------*
//                                                                           *
//                       File 'metamodel_parser.cpp'                         *
//         Generated by version GALGAS_BETA_VERSION (LL(1) grammar)          *
//                      march 27th, 2006, at 18h55'33"                       *
//                                                                           *
//---------------------------------------------------------------------------*

//--- START OF USER ZONE 1


//--- END OF USER ZONE 1

#include "utilities/MF_MemoryControl.h"
#include "files/C_TextFileWrite.h"
#include "metamodel_parser.h"

//---------------------------------------------------------------------------*

#ifndef DO_NOT_GENERATE_MEMORY_CHECK_CODE
  static const char gGGSsourceFile [] = "metamodel_parser.ggs" ;
  #define SOURCE_FILE_AT_LINE(line) , gGGSsourceFile, line
#else
  #define SOURCE_FILE_AT_LINE(line) 
#endif


//--- START OF USER ZONE 2


//--- END OF USER ZONE 2

//---------------------------------------------------------------------------*
//                                                                           *
//           Implementation of production rule 'galgas_component'            *
//                                                                           *
//---------------------------------------------------------------------------*

void metamodel_parser::
metamodel_parser::
pr_galgas_component_metamodel_parser_112_24_ (galgas_scanner & lexique_var_,
                                GGS_M_lexiqueComponents  &/* var_cas_ioLexiqueMapForUse */,
                                GGS_M_semanticsComponents  &/* var_cas_ioSemanticsComponentsMap */,
                                GGS_M_syntaxComponents  &/* var_cas_ioSyntaxComponentsMap */,
                                GGS_M_grammarComponents  &/* var_cas_ioGrammarComponentsMap */,
                                GGS_M_optionComponents  &/* var_cas_ioOptionsComponentsMap */,
                                GGS_M_metamodelsComponents  &var_cas_ioMetamodelComponentMap) {
  nt_parse_metamodel_ (lexique_var_, var_cas_ioMetamodelComponentMap) ;
}

//---------------------------------------------------------------------------*

void metamodel_parser::
metamodel_parser::
pr_galgas_component_metamodel_parser_112_24_importLexique (galgas_scanner & lexique_var_,
                                GGS_M_lexiqueComponents  &/* var_cas_ioLexiqueMapForUse */) {
  nt_parse_metamodel_parse (lexique_var_) ;
}

//---------------------------------------------------------------------------*

void metamodel_parser::
metamodel_parser::
pr_galgas_component_metamodel_parser_112_24_importSyntax (galgas_scanner & lexique_var_,
                                GGS_M_syntaxComponents  &/* var_cas_ioSyntaxComponentsMap */,
                                GGS_M_metamodelsComponents  &var_cas_ioMetamodelComponentMap) {
  nt_parse_metamodel_ (lexique_var_, var_cas_ioMetamodelComponentMap) ;
}

//---------------------------------------------------------------------------*

void metamodel_parser::
metamodel_parser::
pr_galgas_component_metamodel_parser_112_24_importSemantics (galgas_scanner & lexique_var_,
                                GGS_M_semanticsComponents  &/* var_cas_ioSemanticsComponentsMap */,
                                GGS_M_metamodelsComponents  &var_cas_ioMetamodelComponentMap) {
  nt_parse_metamodel_ (lexique_var_, var_cas_ioMetamodelComponentMap) ;
}

//---------------------------------------------------------------------------*

void metamodel_parser::
metamodel_parser::
pr_galgas_component_metamodel_parser_112_24_importGrammarForSemantics (galgas_scanner & lexique_var_,
                                GGS_M_grammarComponents  &/* var_cas_ioGrammarComponentsMap */,
                                GGS_M_metamodelsComponents  &var_cas_ioMetamodelComponentMap) {
  nt_parse_metamodel_ (lexique_var_, var_cas_ioMetamodelComponentMap) ;
}

//---------------------------------------------------------------------------*

void metamodel_parser::
metamodel_parser::
pr_galgas_component_metamodel_parser_112_24_importOptions (galgas_scanner & lexique_var_,
                                GGS_M_optionComponents  &/* var_cas_ioOptionsComponentsMap */) {
  nt_parse_metamodel_parse (lexique_var_) ;
}

//---------------------------------------------------------------------------*
//                                                                           *
//           Implementation of production rule 'parse_metamodel'             *
//                                                                           *
//---------------------------------------------------------------------------*

void metamodel_parser::
metamodel_parser::
pr_parse_metamodel_metamodel_parser_148_23_ (galgas_scanner & lexique_var_,
                                GGS_M_metamodelsComponents  &var_cas_ioMetamodelComponentMap) {
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_metamodel) ;
  GGS_lstring  var_cas_metamodelName ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
  var_cas_metamodelName.defineAttribute (lexique_var_.tokenString, lexique_var_) ;
  GGS_stringset  var_cas_primitiveTypeAttributeNameSet ;
  var_cas_primitiveTypeAttributeNameSet = GGS_stringset::constructor_empty (HERE) ;
  var_cas_primitiveTypeAttributeNameSet.addAssign_operation (GGS_string (true, "bool")) ;
  var_cas_primitiveTypeAttributeNameSet.addAssign_operation (GGS_string (true, "char")) ;
  var_cas_primitiveTypeAttributeNameSet.addAssign_operation (GGS_string (true, "uint")) ;
  var_cas_primitiveTypeAttributeNameSet.addAssign_operation (GGS_string (true, "sint")) ;
  var_cas_primitiveTypeAttributeNameSet.addAssign_operation (GGS_string (true, "double")) ;
  var_cas_primitiveTypeAttributeNameSet.addAssign_operation (GGS_string (true, "string")) ;
  var_cas_primitiveTypeAttributeNameSet.addAssign_operation (GGS_string (true, "lbool")) ;
  var_cas_primitiveTypeAttributeNameSet.addAssign_operation (GGS_string (true, "lchar")) ;
  var_cas_primitiveTypeAttributeNameSet.addAssign_operation (GGS_string (true, "luint")) ;
  var_cas_primitiveTypeAttributeNameSet.addAssign_operation (GGS_string (true, "lsint")) ;
  var_cas_primitiveTypeAttributeNameSet.addAssign_operation (GGS_string (true, "ldouble")) ;
  var_cas_primitiveTypeAttributeNameSet.addAssign_operation (GGS_string (true, "lstring")) ;
  var_cas_primitiveTypeAttributeNameSet.addAssign_operation (GGS_string (true, "location")) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_root) ;
  GGS_lstring  var_cas_rootEntityName ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_type_5Fname) ;
  var_cas_rootEntityName.defineAttribute (lexique_var_.tokenString, lexique_var_) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3A) ;
  GGS_entityToImplementMap  var_cas_entityMap ;
  var_cas_entityMap = GGS_entityToImplementMap::constructor_empty (HERE) ;
  GGS_mapEntityMap  var_cas_mapEntityMap ;
  var_cas_mapEntityMap = GGS_mapEntityMap::constructor_empty (HERE) ;
  GGS_mapAndEntityUniqueMap  var_cas_mapAndEntityUniqueMap ;
  var_cas_mapAndEntityUniqueMap = GGS_mapAndEntityUniqueMap::constructor_empty (HERE) ;
  nt_entity_declaration_list_ (lexique_var_, var_cas_entityMap, var_cas_mapEntityMap, var_cas_primitiveTypeAttributeNameSet, var_cas_mapAndEntityUniqueMap) ;
  GGS_bool var_cas_isAbstract ;
  GGS_entityPropertyMap  var_cas_6434 ;
  GGS_entityPropertyMap  var_cas_6449 ;
  GGS_lstring  var_cas_6452 ;
  GGS_contextPropertyMap  var_cas_6455 ;
  GGS_fetchedPropertyMap  var_cas_6458 ;
  GGS_fetchedPropertyMap  var_cas_6461 ;
  GGS_insertedPropertyMap  var_cas_6464 ;
  GGS_insertedPropertyMap  var_cas_6467 ;
  GGS_relationMap  var_cas_6470 ;
  GGS_relationMap  var_cas_6473 ;
  GGS_indexMap  var_cas_6476 ;
  GGS_indexMap  var_cas_6479 ;
  var_cas_entityMap.methode_searchKey (lexique_var_, var_cas_rootEntityName, var_cas_6434, var_cas_isAbstract, var_cas_6449, var_cas_6452, var_cas_6455, var_cas_6458, var_cas_6461, var_cas_6464, var_cas_6467, var_cas_6470, var_cas_6473, var_cas_6476, var_cas_6479 SOURCE_FILE_AT_LINE (185)) ;
  if ((var_cas_isAbstract).isBuiltAndTrue ()) {
      var_cas_rootEntityName.reader_location ().signalGGSSemanticError (lexique_var_, GGS_string (true, "the root entity cannot be abstract") SOURCE_FILE_AT_LINE (187)) ;
  }
  GGS_M_semanticsEntitiesForUse  var_cas_semanticsEntityMap ;
  var_cas_semanticsEntityMap = GGS_M_semanticsEntitiesForUse::constructor_empty (HERE) ;
  GGS_entityToImplementMap::element_type * operand_6691 = var_cas_entityMap.firstObject () ;
  while ((operand_6691 != NULL)) {
    macroValidPointer (operand_6691) ;
    GGS_stringset  var_cas_superEntitySet ;
    var_cas_superEntitySet = GGS_stringset::constructor_empty (HERE) ;
    ::routine_buildSuperEntitySet (lexique_var_,  var_cas_entityMap,  operand_6691->mInfo.mSuperEntityName,  var_cas_superEntitySet SOURCE_FILE_AT_LINE (206)) ;
    GGS_AC_galgasType  var_cas_t ;
    var_cas_t = GGS_typeGalgas_singleEntity::constructor_new (operand_6691->mKey, operand_6691->mInfo.mAllPropertiesMap, operand_6691->mInfo.mIsAbstract, operand_6691->mInfo.mEntityPropertiesMap, operand_6691->mInfo.mSuperEntityName, var_cas_superEntitySet COMMA_HERE) ;
    GGS_AC_semanticsEntity  var_cas_e ;
    var_cas_e = GGS_typeEntiteType::constructor_new (var_cas_t COMMA_HERE) ;
    var_cas_semanticsEntityMap.methode_insertKey (lexique_var_, operand_6691->mKey, var_cas_e SOURCE_FILE_AT_LINE (217)) ;
    operand_6691 = operand_6691->nextObject () ;
  }
  GGS_stringset  var_cas_multiReferencedEntities ;
  var_cas_multiReferencedEntities = GGS_stringset::constructor_empty (HERE) ;
  GGS_entityToImplementMap::element_type * operand_7699 = var_cas_entityMap.firstObject () ;
  while ((operand_7699 != NULL)) {
    macroValidPointer (operand_7699) ;
    GGS_entityPropertyMap::element_type * operand_8159 = operand_7699->mInfo.mEntityPropertiesMap.firstObject () ;
    while ((operand_8159 != NULL)) {
      macroValidPointer (operand_8159) ;
      if (((((operand_8159->mInfo.mKind) == (GGS_metamodelPropertyKind::constructor_singleReferenceProperty (HERE))) || ((operand_8159->mInfo.mKind) == (GGS_metamodelPropertyKind::constructor_multipleReferenceProperty (HERE))))).isBuiltAndTrue ()) {
        GGS_contextPropertyMap  var_cas_contextPropertyMap ;
        GGS_entityPropertyMap  var_cas_8632 ;
        GGS_bool var_cas_8635 ;
        GGS_entityPropertyMap  var_cas_8638 ;
        GGS_lstring  var_cas_8641 ;
        GGS_fetchedPropertyMap  var_cas_8664 ;
        GGS_fetchedPropertyMap  var_cas_8667 ;
        GGS_insertedPropertyMap  var_cas_8670 ;
        GGS_insertedPropertyMap  var_cas_8673 ;
        GGS_relationMap  var_cas_8676 ;
        GGS_relationMap  var_cas_8679 ;
        GGS_indexMap  var_cas_8682 ;
        GGS_indexMap  var_cas_8685 ;
        var_cas_entityMap.methode_searchKey (lexique_var_, operand_8159->mInfo.mTypeName, var_cas_8632, var_cas_8635, var_cas_8638, var_cas_8641, var_cas_contextPropertyMap, var_cas_8664, var_cas_8667, var_cas_8670, var_cas_8673, var_cas_8676, var_cas_8679, var_cas_8682, var_cas_8685 SOURCE_FILE_AT_LINE (244)) ;
        var_cas_multiReferencedEntities.addAssign_operation (operand_8159->mInfo.mTypeName.reader_value ()) ;
        if (((operand_8159->mInfo.mPropertyOptionPathes.reader_length ()) != (var_cas_contextPropertyMap.reader_count ())).isBuiltAndTrue ()) {
            operand_8159->mKey.reader_location ().signalGGSSemanticError (lexique_var_, ((((((((GGS_string (true, "this reference has ")) + (operand_8159->mInfo.mPropertyOptionPathes.reader_length ().reader_string ()))) + (GGS_string (true, " context parameter(s), while corresponding entity has ")))) + (var_cas_contextPropertyMap.reader_count ().reader_string ()))) + (GGS_string (true, " context attribute(s)"))) SOURCE_FILE_AT_LINE (250)) ;
        }else{
          GGS_L_ListOfPropertyPathes::element_type * operand_9148 = operand_8159->mInfo.mPropertyOptionPathes.firstObject () ;
          GGS_contextPropertyMap::element_type * operand_9244 = var_cas_contextPropertyMap.firstObject () ;
          while ((operand_9148 != NULL)
              && (operand_9244 != NULL)) {
            macroValidPointer (operand_9148) ;
            macroValidPointer (operand_9244) ;
            GGS_lstring  var_cas_typeName ;
            GGS_metamodelPropertyKind var_cas_9527 ;
            GGS_lstring  var_cas_9568 ;
            ::routine_checkPath (lexique_var_,  var_cas_entityMap,  var_cas_mapEntityMap,  operand_7699->mInfo.mAllPropertiesMap,  operand_7699->mKey,  operand_9148->mPath,  var_cas_9527,  var_cas_typeName,  var_cas_9568 SOURCE_FILE_AT_LINE (256)) ;
            if (((var_cas_typeName.reader_value ()) != (operand_9244->mInfo.mTypeName.reader_value ())).isBuiltAndTrue ()) {
                operand_9148->mEndOfPathLocation.reader_location ().signalGGSSemanticError (lexique_var_, ((((((((GGS_string (true, "the path entity is '@")) + (var_cas_typeName.reader_value ()))) + (GGS_string (true, "', but its entity should be '@")))) + (operand_9244->mInfo.mTypeName.reader_value ()))) + (GGS_string (true, "'"))) SOURCE_FILE_AT_LINE (269)) ;
            }
            operand_9148 = operand_9148->nextObject () ;
            operand_9244 = operand_9244->nextObject () ;
          }
        }
      }else if (((operand_8159->mInfo.mKind) == (GGS_metamodelPropertyKind::constructor_contextProperty (HERE))).isBuiltAndTrue ()) {
        var_cas_mapAndEntityUniqueMap.methode_searchKey (lexique_var_, operand_8159->mInfo.mTypeName SOURCE_FILE_AT_LINE (274)) ;
      }else if (((operand_8159->mInfo.mKind) == (GGS_metamodelPropertyKind::constructor_fetchedProperty (HERE))).isBuiltAndTrue ()) {
        GGS_L_ListOfPropertyPathes::element_type * operand_10180 = operand_8159->mInfo.mPropertyOptionPathes.firstObject () ;
        while ((operand_10180 != NULL)) {
          macroValidPointer (operand_10180) ;
          GGS_lstring  var_cas_typeName ;
          GGS_metamodelPropertyKind var_cas_kind ;
          GGS_lstring  var_cas_10510 ;
          ::routine_checkPath (lexique_var_,  var_cas_entityMap,  var_cas_mapEntityMap,  operand_7699->mInfo.mAllPropertiesMap,  operand_7699->mKey,  operand_10180->mPath,  var_cas_kind,  var_cas_typeName,  var_cas_10510 SOURCE_FILE_AT_LINE (280)) ;
          if (((var_cas_kind) != (GGS_metamodelPropertyKind::constructor_mapProperty (HERE))).isBuiltAndTrue ()) {
              operand_10180->mEndOfPathLocation.reader_location ().signalGGSSemanticError (lexique_var_, GGS_string (true, "this path does define a map property") SOURCE_FILE_AT_LINE (290)) ;
          }
          operand_10180 = operand_10180->nextObject () ;
        }
      }
      operand_8159 = operand_8159->nextObject () ;
    }
    operand_7699 = operand_7699->nextObject () ;
  }
  GGS_entityToImplementMap::element_type * operand_10805 = var_cas_entityMap.firstObject () ;
  while ((operand_10805 != NULL)) {
    macroValidPointer (operand_10805) ;
    GGS_entityPropertyMap  var_cas_allPropertiesMap ;
    var_cas_allPropertiesMap = operand_10805->mInfo.mAllPropertiesMap ;
    GGS_fetchedPropertyMap::element_type * operand_11328 = operand_10805->mInfo.mFetchedPropertyMap.firstObject () ;
    while ((operand_11328 != NULL)) {
      macroValidPointer (operand_11328) ;
      GGS_metamodelPropertyKind var_cas_kind ;
      GGS_lstring  var_cas_propertyTypeName ;
      GGS_L_ListOfPropertyPathes  var_cas_11785 ;
      var_cas_allPropertiesMap.methode_searchKey (lexique_var_, operand_11328->mInfo.mAttributeName, var_cas_kind, var_cas_propertyTypeName, var_cas_11785 SOURCE_FILE_AT_LINE (320)) ;
      if (((var_cas_kind) != (GGS_metamodelPropertyKind::constructor_attributeProperty (HERE))).isBuiltAndTrue ()) {
          operand_11328->mInfo.mAttributeName.reader_location ().signalGGSSemanticError (lexique_var_, GGS_string (true, "this property is not an attribute") SOURCE_FILE_AT_LINE (322)) ;
      }else if (((var_cas_propertyTypeName.reader_value ()) != (GGS_string (true, "lstring"))).isBuiltAndTrue ()) {
          operand_11328->mInfo.mAttributeName.reader_location ().signalGGSSemanticError (lexique_var_, GGS_string (true, "this attribute should be an '@lstring' attribute") SOURCE_FILE_AT_LINE (324)) ;
      }
      GGS_L_ListOfPropertyPathes  var_cas_12156 ;
      var_cas_allPropertiesMap.methode_searchKey (lexique_var_, operand_11328->mInfo.mMapAttributeName, var_cas_kind, var_cas_propertyTypeName, var_cas_12156 SOURCE_FILE_AT_LINE (326)) ;
      if (((var_cas_kind) != (GGS_metamodelPropertyKind::constructor_contextProperty (HERE))).isBuiltAndTrue ()) {
          operand_11328->mInfo.mAttributeName.reader_location ().signalGGSSemanticError (lexique_var_, GGS_string (true, "this path does not designate a context property") SOURCE_FILE_AT_LINE (328)) ;
      }else{
        GGS_lstring  var_cas_elementTypeName ;
        GGS_lstring  var_cas_12422 ;
        GGS_lstring  var_cas_12425 ;
        var_cas_mapEntityMap.methode_searchKey (lexique_var_, var_cas_propertyTypeName, var_cas_elementTypeName, var_cas_12422, var_cas_12425 SOURCE_FILE_AT_LINE (331)) ;
        if (((operand_11328->mInfo.mTypeName.reader_value ()) != (var_cas_elementTypeName.reader_value ())).isBuiltAndTrue ()) {
            operand_11328->mInfo.mMapAttributeName.reader_location ().signalGGSSemanticError (lexique_var_, ((((((((GGS_string (true, "this property has '@")) + (operand_11328->mInfo.mTypeName.reader_value ()))) + (GGS_string (true, "', while '@")))) + (var_cas_elementTypeName.reader_value ()))) + (GGS_string (true, "' was expected"))) SOURCE_FILE_AT_LINE (335)) ;
        }
      }
      operand_11328 = operand_11328->nextObject () ;
    }
    operand_10805 = operand_10805->nextObject () ;
  }
  GGS_entityToImplementMap::element_type * operand_12785 = var_cas_entityMap.firstObject () ;
  while ((operand_12785 != NULL)) {
    macroValidPointer (operand_12785) ;
    GGS_entityPropertyMap  var_cas_allPropertiesMap ;
    var_cas_allPropertiesMap = operand_12785->mInfo.mAllPropertiesMap ;
    GGS_insertedPropertyMap::element_type * operand_13311 = operand_12785->mInfo.mInsertedPropertyMap.firstObject () ;
    while ((operand_13311 != NULL)) {
      macroValidPointer (operand_13311) ;
      GGS_insertionMap::element_type * operand_13441 = operand_13311->mInfo.mMaps.firstObject () ;
      while ((operand_13441 != NULL)) {
        macroValidPointer (operand_13441) ;
        GGS_lstring  var_cas_mapTypeName ;
        GGS_metamodelPropertyKind var_cas_kind ;
        GGS_L_ListOfPropertyPathes  var_cas_13626 ;
        var_cas_allPropertiesMap.methode_searchKey (lexique_var_, operand_13441->mKey, var_cas_kind, var_cas_mapTypeName, var_cas_13626 SOURCE_FILE_AT_LINE (361)) ;
        if (((! (var_cas_mapEntityMap.reader_hasKey (var_cas_mapTypeName.reader_value ())))).isBuiltAndTrue ()) {
            operand_13441->mKey.reader_location ().signalGGSSemanticError (lexique_var_, GGS_string (true, "this reference does not designate a map") SOURCE_FILE_AT_LINE (363)) ;
        }else{
          GGS_lstring  var_cas_elementEntity ;
          GGS_lstring  var_cas_13890 ;
          GGS_lstring  var_cas_13893 ;
          var_cas_mapEntityMap.methode_searchKey (lexique_var_, var_cas_mapTypeName, var_cas_elementEntity, var_cas_13890, var_cas_13893 SOURCE_FILE_AT_LINE (366)) ;
          if (((var_cas_elementEntity.reader_value ()) != (operand_12785->mKey.reader_value ())).isBuiltAndTrue ()) {
              operand_13441->mKey.reader_location ().signalGGSSemanticError (lexique_var_, ((((((((GGS_string (true, "the type of the map is '@")) + (operand_12785->mKey.reader_value ()))) + (GGS_string (true, "', but should be '@")))) + (var_cas_elementEntity.reader_value ()))) + (GGS_string (true, "'"))) SOURCE_FILE_AT_LINE (369)) ;
          }
        }
        operand_13441 = operand_13441->nextObject () ;
      }
      operand_13311 = operand_13311->nextObject () ;
    }
    operand_12785 = operand_12785->nextObject () ;
  }
  GGS_entityToImplementMap::element_type * operand_14263 = var_cas_entityMap.firstObject () ;
  while ((operand_14263 != NULL)) {
    macroValidPointer (operand_14263) ;
    GGS_entityPropertyMap  var_cas_allPropertiesMap ;
    var_cas_allPropertiesMap = operand_14263->mInfo.mAllPropertiesMap ;
    GGS_relationMap::element_type * operand_14765 = operand_14263->mInfo.mRelationMap.firstObject () ;
    while ((operand_14765 != NULL)) {
      macroValidPointer (operand_14765) ;
      GGS_relationVarMap::element_type * operand_14841 = operand_14765->mInfo.mRelationVarMap.firstObject () ;
      while ((operand_14841 != NULL)) {
        macroValidPointer (operand_14841) ;
        GGS_metamodelPropertyKind var_cas_14942 ;
        GGS_lstring  var_cas_14945 ;
        GGS_L_ListOfPropertyPathes  var_cas_14948 ;
        var_cas_allPropertiesMap.methode_searchKey (lexique_var_, operand_14841->mInfo.mDomainVariableName, var_cas_14942, var_cas_14945, var_cas_14948 SOURCE_FILE_AT_LINE (393)) ;
        operand_14841 = operand_14841->nextObject () ;
      }
      operand_14765 = operand_14765->nextObject () ;
    }
    operand_14263 = operand_14263->nextObject () ;
  }
  if (var_cas_entityMap.isBuilt () &&
      var_cas_metamodelName.isBuilt () &&
      var_cas_multiReferencedEntities.isBuilt () &&
      var_cas_rootEntityName.isBuilt () &&
      var_cas_mapEntityMap.isBuilt ()) {
    ::routine_generate_metamodel (lexique_var_,  var_cas_entityMap,  var_cas_metamodelName,  var_cas_multiReferencedEntities,  var_cas_rootEntityName,  var_cas_mapEntityMap SOURCE_FILE_AT_LINE (399)) ;
  }
  if (((! (var_cas_ioMetamodelComponentMap.reader_hasKey (var_cas_metamodelName.reader_value ())))).isBuiltAndTrue ()) {
    var_cas_ioMetamodelComponentMap.methode_insertKey (lexique_var_, var_cas_metamodelName, var_cas_rootEntityName, var_cas_semanticsEntityMap SOURCE_FILE_AT_LINE (408)) ;
  }
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_end) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_metamodel) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3B) ;
}

//---------------------------------------------------------------------------*

void metamodel_parser::
pr_parse_metamodel_metamodel_parser_148_23_parse (galgas_scanner & lexique_var_) {
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_metamodel) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_root) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_type_5Fname) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3A) ;
  nt_entity_declaration_list_parse (lexique_var_) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_end) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_metamodel) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3B) ;
}

//---------------------------------------------------------------------------*
//                                                                           *
//       Implementation of production rule 'entity_declaration_list'         *
//                                                                           *
//---------------------------------------------------------------------------*

void metamodel_parser::
metamodel_parser::
pr_entity_declaration_list_metamodel_parser_420_31_ (galgas_scanner & lexique_var_,
                                GGS_entityToImplementMap  &var_cas_outEntityMap,
                                GGS_mapEntityMap  &var_cas_ioMapEntityMap,
                                GGS_stringset  &var_cas_ioPrimitiveTypeAttributeNameSet,
                                GGS_mapAndEntityUniqueMap  &var_cas_ioMapAndEntityUniqueMap) {
  { bool syntaxRepeat = true ;
    while (syntaxRepeat) {
      switch (select_repeat_metamodel_parser_0 (lexique_var_)) {
        case 2 : {
          nt_metamodel_map_declaration_ (lexique_var_, var_cas_ioMapEntityMap, var_cas_ioMapAndEntityUniqueMap) ;
          } break ;
        case 3 : {
          nt_entity_declaration_ (lexique_var_, var_cas_outEntityMap, var_cas_ioPrimitiveTypeAttributeNameSet, var_cas_ioMapAndEntityUniqueMap) ;
          } break ;
        default :
          syntaxRepeat = false ;
          break ;
      }
    }
  }
}

//---------------------------------------------------------------------------*

void metamodel_parser::
pr_entity_declaration_list_metamodel_parser_420_31_parse (galgas_scanner & lexique_var_) {
  { bool syntaxRepeat = true ;
    while (syntaxRepeat) {
      switch (select_repeat_metamodel_parser_0 (lexique_var_)) {
        case 2 : {
          nt_metamodel_map_declaration_parse (lexique_var_) ;
          } break ;
        case 3 : {
          nt_entity_declaration_parse (lexique_var_) ;
          } break ;
        default :
          syntaxRepeat = false ;
          break ;
      }
    }
  }
}

//---------------------------------------------------------------------------*
//                                                                           *
//      Implementation of production rule 'metamodel_map_declaration'        *
//                                                                           *
//---------------------------------------------------------------------------*

void metamodel_parser::
metamodel_parser::
pr_metamodel_map_declaration_metamodel_parser_443_33_ (galgas_scanner & lexique_var_,
                                GGS_mapEntityMap  &var_cas_ioMapEntityMap,
                                GGS_mapAndEntityUniqueMap  &var_cas_ioMapAndEntityUniqueMap) {
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_map) ;
  GGS_lstring  var_cas_mapIdentifier ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_type_5Fname) ;
  var_cas_mapIdentifier.defineAttribute (lexique_var_.tokenString, lexique_var_) ;
  var_cas_ioMapAndEntityUniqueMap.methode_insertKey (lexique_var_, var_cas_mapIdentifier SOURCE_FILE_AT_LINE (450)) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_of) ;
  GGS_lstring  var_cas_mapElementIdentifier ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_type_5Fname) ;
  var_cas_mapElementIdentifier.defineAttribute (lexique_var_.tokenString, lexique_var_) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__7B) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_insert) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_error) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_message) ;
  GGS_lstring  var_cas_insertErrorMessage ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_literal_5Fstring) ;
  var_cas_insertErrorMessage.defineAttribute (lexique_var_.tokenString, lexique_var_) ;
  if (var_cas_insertErrorMessage.isBuilt ()) {
    ::routine_check_KL_escapeCharacters (lexique_var_,  var_cas_insertErrorMessage SOURCE_FILE_AT_LINE (460)) ;
  }
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3B) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_search) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_error) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_message) ;
  GGS_lstring  var_cas_searchErrorMessage ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_literal_5Fstring) ;
  var_cas_searchErrorMessage.defineAttribute (lexique_var_.tokenString, lexique_var_) ;
  if (var_cas_searchErrorMessage.isBuilt ()) {
    ::routine_check_K_escapeCharacters (lexique_var_,  var_cas_searchErrorMessage SOURCE_FILE_AT_LINE (467)) ;
  }
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3B) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__7D) ;
  var_cas_ioMapEntityMap.methode_insertKey (lexique_var_, var_cas_mapIdentifier, var_cas_mapElementIdentifier, var_cas_insertErrorMessage, var_cas_searchErrorMessage SOURCE_FILE_AT_LINE (471)) ;
}

//---------------------------------------------------------------------------*

void metamodel_parser::
pr_metamodel_map_declaration_metamodel_parser_443_33_parse (galgas_scanner & lexique_var_) {
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_map) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_type_5Fname) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_of) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_type_5Fname) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__7B) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_insert) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_error) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_message) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_literal_5Fstring) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3B) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_search) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_error) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_message) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_literal_5Fstring) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3B) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__7D) ;
}

//---------------------------------------------------------------------------*
//                                                                           *
//          Implementation of production rule 'entity_declaration'           *
//                                                                           *
//---------------------------------------------------------------------------*

void metamodel_parser::
metamodel_parser::
pr_entity_declaration_metamodel_parser_480_26_ (galgas_scanner & lexique_var_,
                                GGS_entityToImplementMap  &var_cas_ioEntityMap,
                                GGS_stringset  &var_cas_ioPrimitiveTypeAttributeNameSet,
                                GGS_mapAndEntityUniqueMap  &var_cas_ioMapAndEntityUniqueMap) {
  GGS_bool var_cas_isAbstract ;
  switch (select_metamodel_parser_1 (lexique_var_)) {
    case 1 : {
      var_cas_isAbstract = GGS_bool (true, false) ;
      } break ;
    case 2 : {
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_abstract) ;
      var_cas_isAbstract = GGS_bool (true, true) ;
      } break ;
    default :
      break ;
  }
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_entity) ;
  GGS_lstring  var_cas_entityName ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_type_5Fname) ;
  var_cas_entityName.defineAttribute (lexique_var_.tokenString, lexique_var_) ;
  var_cas_ioMapAndEntityUniqueMap.methode_insertKey (lexique_var_, var_cas_entityName SOURCE_FILE_AT_LINE (497)) ;
  GGS_entityPropertyMap  var_cas_entityPropertyMap ;
  var_cas_entityPropertyMap = GGS_entityPropertyMap::constructor_empty (HERE) ;
  GGS_fetchedPropertyMap  var_cas_allFetchedPropertyMap ;
  GGS_contextPropertyMap  var_cas_allContextPropertyMap ;
  var_cas_allContextPropertyMap = GGS_contextPropertyMap::constructor_empty (HERE) ;
  GGS_insertedPropertyMap  var_cas_allInsertedPropertyMap ;
  GGS_entityPropertyMap  var_cas_allPropertyMap ;
  GGS_relationMap  var_cas_allRelationMap ;
  var_cas_allRelationMap = GGS_relationMap::constructor_empty (HERE) ;
  GGS_lstring  var_cas_superEntity ;
  GGS_indexMap  var_cas_allIndexMap ;
  var_cas_allIndexMap = GGS_indexMap::constructor_empty (HERE) ;
  switch (select_metamodel_parser_2 (lexique_var_)) {
    case 1 : {
      var_cas_superEntity = GGS_lstring::constructor_new (GGS_string (true, ""), GGS_location (lexique_var_) COMMA_HERE) ;
      var_cas_allPropertyMap = GGS_entityPropertyMap::constructor_empty (HERE) ;
      var_cas_allFetchedPropertyMap = GGS_fetchedPropertyMap::constructor_empty (HERE) ;
      var_cas_allInsertedPropertyMap = GGS_insertedPropertyMap::constructor_empty (HERE) ;
      } break ;
    case 2 : {
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_extends) ;
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_type_5Fname) ;
      var_cas_superEntity.defineAttribute (lexique_var_.tokenString, lexique_var_) ;
      GGS_entityPropertyMap  var_cas_18128 ;
      GGS_bool var_cas_18137 ;
      GGS_lstring  var_cas_18168 ;
      GGS_fetchedPropertyMap  var_cas_18206 ;
      GGS_insertedPropertyMap  var_cas_18244 ;
      GGS_relationMap  var_cas_18283 ;
      GGS_indexMap  var_cas_18314 ;
      var_cas_ioEntityMap.methode_searchKey (lexique_var_, var_cas_superEntity, var_cas_18128, var_cas_18137, var_cas_allPropertyMap, var_cas_18168, var_cas_allContextPropertyMap, var_cas_18206, var_cas_allFetchedPropertyMap, var_cas_18244, var_cas_allInsertedPropertyMap, var_cas_18283, var_cas_allRelationMap, var_cas_18314, var_cas_allIndexMap SOURCE_FILE_AT_LINE (516)) ;
      } break ;
    case 3 : {
      var_cas_superEntity = GGS_lstring::constructor_new (GGS_string (true, ""), GGS_location (lexique_var_) COMMA_HERE) ;
      var_cas_allPropertyMap = GGS_entityPropertyMap::constructor_empty (HERE) ;
      var_cas_allFetchedPropertyMap = GGS_fetchedPropertyMap::constructor_empty (HERE) ;
      var_cas_allInsertedPropertyMap = GGS_insertedPropertyMap::constructor_empty (HERE) ;
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__28) ;
      { bool syntaxRepeat = true ;
        while (syntaxRepeat) {
            GGS_lstring  var_cas_entityName ;
            lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_type_5Fname) ;
            var_cas_entityName.defineAttribute (lexique_var_.tokenString, lexique_var_) ;
            GGS_lstring  var_cas_contextPropertyName ;
            lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
            var_cas_contextPropertyName.defineAttribute (lexique_var_.tokenString, lexique_var_) ;
            var_cas_allContextPropertyMap.methode_insertKey (lexique_var_, var_cas_contextPropertyName, var_cas_entityName SOURCE_FILE_AT_LINE (542)) ;
            var_cas_allPropertyMap.methode_insertKey (lexique_var_, var_cas_contextPropertyName, GGS_metamodelPropertyKind::constructor_contextProperty (HERE), var_cas_entityName, GGS_L_ListOfPropertyPathes::constructor_empty (HERE) SOURCE_FILE_AT_LINE (544)) ;
            var_cas_entityPropertyMap.methode_insertKey (lexique_var_, var_cas_contextPropertyName, GGS_metamodelPropertyKind::constructor_contextProperty (HERE), var_cas_entityName, GGS_L_ListOfPropertyPathes::constructor_empty (HERE) SOURCE_FILE_AT_LINE (550)) ;
          switch (select_repeat_metamodel_parser_3 (lexique_var_)) {
            case 2 : {
              lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__2C) ;
              } break ;
            default :
              syntaxRepeat = false ;
              break ;
          }
        }
      }
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__29) ;
      } break ;
    default :
      break ;
  }
  GGS_indexMap  var_cas_indexMap ;
  var_cas_indexMap = GGS_indexMap::constructor_empty (HERE) ;
  GGS_fetchedPropertyMap  var_cas_fetchedPropertyMap ;
  var_cas_fetchedPropertyMap = GGS_fetchedPropertyMap::constructor_empty (HERE) ;
  GGS_relationMap  var_cas_relationMap ;
  var_cas_relationMap = GGS_relationMap::constructor_empty (HERE) ;
  GGS_insertedPropertyMap  var_cas_insertedPropertyMap ;
  var_cas_insertedPropertyMap = GGS_insertedPropertyMap::constructor_empty (HERE) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__7B) ;
  { bool syntaxRepeat = true ;
    while (syntaxRepeat) {
      switch (select_repeat_metamodel_parser_4 (lexique_var_)) {
        case 2 : {
          GGS_lstring  var_cas_propertyTypeName ;
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_type_5Fname) ;
          var_cas_propertyTypeName.defineAttribute (lexique_var_.tokenString, lexique_var_) ;
          GGS_metamodelPropertyKind var_cas_k ;
          GGS_lstring  var_cas_attributeName ;
          switch (select_metamodel_parser_5 (lexique_var_)) {
            case 1 : {
              lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__5B) ;
              lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__5D) ;
              if ((var_cas_ioPrimitiveTypeAttributeNameSet.reader_hasKey (var_cas_propertyTypeName.reader_value ())).isBuiltAndTrue ()) {
                  var_cas_propertyTypeName.reader_location ().signalGGSSemanticError (lexique_var_, ((((GGS_string (true, "the '@")) + (var_cas_propertyTypeName.reader_value ()))) + (GGS_string (true, "' is not an entity name, but a predefined type name"))) SOURCE_FILE_AT_LINE (578)) ;
              }
              lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
              var_cas_attributeName.defineAttribute (lexique_var_.tokenString, lexique_var_) ;
              var_cas_k = GGS_metamodelPropertyKind::constructor_multipleReferenceProperty (HERE) ;
              } break ;
            case 2 : {
              lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3C) ;
              lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3E) ;
              if ((var_cas_ioPrimitiveTypeAttributeNameSet.reader_hasKey (var_cas_propertyTypeName.reader_value ())).isBuiltAndTrue ()) {
                  var_cas_propertyTypeName.reader_location ().signalGGSSemanticError (lexique_var_, ((((GGS_string (true, "the '@")) + (var_cas_propertyTypeName.reader_value ()))) + (GGS_string (true, "' is not an entity name, but a predefined type name"))) SOURCE_FILE_AT_LINE (588)) ;
              }
              lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
              var_cas_attributeName.defineAttribute (lexique_var_.tokenString, lexique_var_) ;
              var_cas_k = GGS_metamodelPropertyKind::constructor_mapProperty (HERE) ;
              } break ;
            case 3 : {
              lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
              var_cas_attributeName.defineAttribute (lexique_var_.tokenString, lexique_var_) ;
              if ((var_cas_ioPrimitiveTypeAttributeNameSet.reader_hasKey (var_cas_propertyTypeName.reader_value ())).isBuiltAndTrue ()) {
                var_cas_k = GGS_metamodelPropertyKind::constructor_attributeProperty (HERE) ;
              }else{
                var_cas_k = GGS_metamodelPropertyKind::constructor_singleReferenceProperty (HERE) ;
              }
              } break ;
            default :
              break ;
          }
          GGS_L_ListOfPropertyPathes  var_cas_propertyOptionPathes ;
          var_cas_propertyOptionPathes = GGS_L_ListOfPropertyPathes::constructor_empty (HERE) ;
          switch (select_metamodel_parser_6 (lexique_var_)) {
            case 1 : {
              } break ;
            case 2 : {
              lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_insert) ;
              if (((var_cas_propertyTypeName.reader_value ()) != (GGS_string (true, "lstring"))).isBuiltAndTrue ()) {
                  GGS_location (lexique_var_).reader_location ().signalGGSSemanticError (lexique_var_, GGS_string (true, "only an @lstring attribute can be inserted in a map") SOURCE_FILE_AT_LINE (610)) ;
              }
              GGS_insertionMap  var_cas_maps ;
              var_cas_maps = GGS_insertionMap::constructor_empty (HERE) ;
              { bool syntaxRepeat = true ;
                while (syntaxRepeat) {
                    GGS_lstring  var_cas_mapName ;
                    lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
                    var_cas_mapName.defineAttribute (lexique_var_.tokenString, lexique_var_) ;
                    GGS_lstring  var_cas_indexName ;
                    switch (select_metamodel_parser_8 (lexique_var_)) {
                      case 1 : {
                        var_cas_indexName = GGS_lstring::constructor_new (GGS_string (true, ""), GGS_location (lexique_var_) COMMA_HERE) ;
                        } break ;
                      case 2 : {
                        lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3C) ;
                        lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
                        var_cas_indexName.defineAttribute (lexique_var_.tokenString, lexique_var_) ;
                        var_cas_indexMap.methode_insertKey (lexique_var_, var_cas_indexName, var_cas_mapName SOURCE_FILE_AT_LINE (622)) ;
                        var_cas_allIndexMap.methode_insertKey (lexique_var_, var_cas_indexName, var_cas_mapName SOURCE_FILE_AT_LINE (623)) ;
                        lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3E) ;
                        } break ;
                      default :
                        break ;
                    }
                    var_cas_maps.methode_insertKey (lexique_var_, var_cas_mapName, var_cas_indexName SOURCE_FILE_AT_LINE (626)) ;
                  switch (select_repeat_metamodel_parser_7 (lexique_var_)) {
                    case 2 : {
                      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__2C) ;
                      } break ;
                    default :
                      syntaxRepeat = false ;
                      break ;
                  }
                }
              }
              var_cas_insertedPropertyMap.methode_insertKey (lexique_var_, var_cas_attributeName, var_cas_maps SOURCE_FILE_AT_LINE (630)) ;
              var_cas_allInsertedPropertyMap.methode_insertKey (lexique_var_, var_cas_attributeName, var_cas_maps SOURCE_FILE_AT_LINE (631)) ;
              } break ;
            case 3 : {
              lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_search) ;
              if (((var_cas_k) != (GGS_metamodelPropertyKind::constructor_singleReferenceProperty (HERE))).isBuiltAndTrue ()) {
                  GGS_location (lexique_var_).reader_location ().signalGGSSemanticError (lexique_var_, GGS_string (true, "attribute property or multiple reference property cannot accept 'search' construct") SOURCE_FILE_AT_LINE (635)) ;
              }
              var_cas_k = GGS_metamodelPropertyKind::constructor_fetchedProperty (HERE) ;
              GGS_lstring  var_cas_fetchedAttributeName ;
              lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
              var_cas_fetchedAttributeName.defineAttribute (lexique_var_.tokenString, lexique_var_) ;
              lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_in) ;
              GGS_lstring  var_cas_mapPropertyName ;
              lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
              var_cas_mapPropertyName.defineAttribute (lexique_var_.tokenString, lexique_var_) ;
              GGS_lstring  var_cas_indexName ;
              switch (select_metamodel_parser_9 (lexique_var_)) {
                case 1 : {
                  var_cas_indexName = GGS_lstring::constructor_new (GGS_string (true, ""), GGS_location (lexique_var_) COMMA_HERE) ;
                  } break ;
                case 2 : {
                  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3C) ;
                  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
                  var_cas_indexName.defineAttribute (lexique_var_.tokenString, lexique_var_) ;
                  var_cas_indexMap.methode_insertKey (lexique_var_, var_cas_indexName, var_cas_mapPropertyName SOURCE_FILE_AT_LINE (649)) ;
                  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3E) ;
                  } break ;
                default :
                  break ;
              }
              var_cas_fetchedPropertyMap.methode_insertKey (lexique_var_, var_cas_attributeName, var_cas_propertyTypeName, var_cas_fetchedAttributeName, var_cas_mapPropertyName, var_cas_indexName SOURCE_FILE_AT_LINE (653)) ;
              } break ;
            case 4 : {
              lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__28) ;
              if (((((var_cas_k) != (GGS_metamodelPropertyKind::constructor_singleReferenceProperty (HERE))) && ((var_cas_k) != (GGS_metamodelPropertyKind::constructor_multipleReferenceProperty (HERE))))).isBuiltAndTrue ()) {
                  GGS_location (lexique_var_).reader_location ().signalGGSSemanticError (lexique_var_, GGS_string (true, "only a reference property accepts context parameters") SOURCE_FILE_AT_LINE (663)) ;
              }
              { bool syntaxRepeat = true ;
                while (syntaxRepeat) {
                    switch (select_metamodel_parser_11 (lexique_var_)) {
                      case 1 : {
                        lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_self) ;
                        GGS_L_propertyPath  var_cas_path ;
                        var_cas_path = GGS_L_propertyPath::constructor_empty (HERE) ;
                        var_cas_propertyOptionPathes.addAssign_operation (var_cas_path, GGS_location (lexique_var_)) ;
                        } break ;
                      case 2 : {
                        GGS_L_propertyPath  var_cas_path ;
                        nt_property_path_ (lexique_var_, var_cas_path) ;
                        var_cas_propertyOptionPathes.addAssign_operation (var_cas_path, GGS_location (lexique_var_)) ;
                        } break ;
                      default :
                        break ;
                    }
                  switch (select_repeat_metamodel_parser_10 (lexique_var_)) {
                    case 2 : {
                      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__2C) ;
                      } break ;
                    default :
                      syntaxRepeat = false ;
                      break ;
                  }
                }
              }
              lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__29) ;
              } break ;
            default :
              break ;
          }
          var_cas_allPropertyMap.methode_insertKey (lexique_var_, var_cas_attributeName, var_cas_k, var_cas_propertyTypeName, var_cas_propertyOptionPathes SOURCE_FILE_AT_LINE (680)) ;
          var_cas_entityPropertyMap.methode_insertKey (lexique_var_, var_cas_attributeName, var_cas_k, var_cas_propertyTypeName, var_cas_propertyOptionPathes SOURCE_FILE_AT_LINE (681)) ;
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3B) ;
          } break ;
        case 3 : {
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_relation) ;
          GGS_lstring  var_cas_relationIdentifier ;
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
          var_cas_relationIdentifier.defineAttribute (lexique_var_.tokenString, lexique_var_) ;
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__5B) ;
          GGS_relationVarMap  var_cas_relationVarMap ;
          var_cas_relationVarMap = GGS_relationVarMap::constructor_empty (HERE) ;
          { bool syntaxRepeat = true ;
            while (syntaxRepeat) {
                GGS_lstring  var_cas_localVar ;
                lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
                var_cas_localVar.defineAttribute (lexique_var_.tokenString, lexique_var_) ;
                lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3A) ;
                GGS_lstring  var_cas_domainVariable ;
                lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
                var_cas_domainVariable.defineAttribute (lexique_var_.tokenString, lexique_var_) ;
                var_cas_relationVarMap.methode_insertKey (lexique_var_, var_cas_localVar, var_cas_domainVariable SOURCE_FILE_AT_LINE (695)) ;
              switch (select_repeat_metamodel_parser_12 (lexique_var_)) {
                case 2 : {
                  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__2C) ;
                  } break ;
                default :
                  syntaxRepeat = false ;
                  break ;
              }
            }
          }
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__5D) ;
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3A_3D) ;
          GGS_metamodelRelationExpression  var_cas_e ;
          nt_entity_relation_expression_ (lexique_var_, var_cas_relationVarMap, var_cas_indexMap, var_cas_e) ;
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3B) ;
          var_cas_relationMap.methode_insertKey (lexique_var_, var_cas_relationIdentifier, var_cas_relationVarMap, var_cas_e SOURCE_FILE_AT_LINE (704)) ;
          var_cas_allRelationMap.methode_insertKey (lexique_var_, var_cas_relationIdentifier, var_cas_relationVarMap, var_cas_e SOURCE_FILE_AT_LINE (705)) ;
          GGS_metamodelPropertyKind var_cas_k ;
          var_cas_k = GGS_metamodelPropertyKind::constructor_relationProperty (HERE) ;
          GGS_lstring  var_cas_noPropertyTypeName ;
          var_cas_noPropertyTypeName = GGS_lstring::constructor_new (GGS_string (true, ""), GGS_location (lexique_var_) COMMA_HERE) ;
          GGS_L_ListOfPropertyPathes  var_cas_propertyOptionPathes ;
          var_cas_propertyOptionPathes = GGS_L_ListOfPropertyPathes::constructor_empty (HERE) ;
          var_cas_allPropertyMap.methode_insertKey (lexique_var_, var_cas_relationIdentifier, var_cas_k, var_cas_noPropertyTypeName, var_cas_propertyOptionPathes SOURCE_FILE_AT_LINE (709)) ;
          var_cas_entityPropertyMap.methode_insertKey (lexique_var_, var_cas_relationIdentifier, var_cas_k, var_cas_noPropertyTypeName, var_cas_propertyOptionPathes SOURCE_FILE_AT_LINE (710)) ;
          } break ;
        case 4 : {
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_override) ;
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_relation) ;
          GGS_lstring  var_cas_relationIdentifier ;
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
          var_cas_relationIdentifier.defineAttribute (lexique_var_.tokenString, lexique_var_) ;
          GGS_relationVarMap  var_cas_relationVarMap ;
          GGS_metamodelRelationExpression  var_cas_24577 ;
          var_cas_allRelationMap.methode_searchKey (lexique_var_, var_cas_relationIdentifier, var_cas_relationVarMap, var_cas_24577 SOURCE_FILE_AT_LINE (717)) ;
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3A_3D) ;
          GGS_metamodelRelationExpression  var_cas_e ;
          nt_entity_relation_expression_ (lexique_var_, var_cas_relationVarMap, var_cas_indexMap, var_cas_e) ;
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3B) ;
          var_cas_relationMap.methode_insertKey (lexique_var_, var_cas_relationIdentifier, var_cas_relationVarMap, var_cas_e SOURCE_FILE_AT_LINE (722)) ;
          GGS_metamodelPropertyKind var_cas_k ;
          var_cas_k = GGS_metamodelPropertyKind::constructor_relationProperty (HERE) ;
          GGS_lstring  var_cas_noPropertyTypeName ;
          var_cas_noPropertyTypeName = GGS_lstring::constructor_new (GGS_string (true, ""), GGS_location (lexique_var_) COMMA_HERE) ;
          GGS_L_ListOfPropertyPathes  var_cas_propertyOptionPathes ;
          var_cas_propertyOptionPathes = GGS_L_ListOfPropertyPathes::constructor_empty (HERE) ;
          GGS_metamodelPropertyKind var_cas_24989 ;
          GGS_lstring  var_cas_24992 ;
          GGS_L_ListOfPropertyPathes  var_cas_24995 ;
          var_cas_allPropertyMap.methode_searchKey (lexique_var_, var_cas_relationIdentifier, var_cas_24989, var_cas_24992, var_cas_24995 SOURCE_FILE_AT_LINE (726)) ;
          var_cas_entityPropertyMap.methode_insertKey (lexique_var_, var_cas_relationIdentifier, var_cas_k, var_cas_noPropertyTypeName, var_cas_propertyOptionPathes SOURCE_FILE_AT_LINE (727)) ;
          } break ;
        default :
          syntaxRepeat = false ;
          break ;
      }
    }
  }
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__7D) ;
  var_cas_ioEntityMap.methode_insertKey (lexique_var_, var_cas_entityName, var_cas_allPropertyMap, var_cas_isAbstract, var_cas_entityPropertyMap, var_cas_superEntity, var_cas_allContextPropertyMap, var_cas_fetchedPropertyMap, var_cas_allFetchedPropertyMap, var_cas_insertedPropertyMap, var_cas_allInsertedPropertyMap, var_cas_relationMap, var_cas_allRelationMap, var_cas_indexMap, var_cas_allIndexMap SOURCE_FILE_AT_LINE (731)) ;
}

//---------------------------------------------------------------------------*

void metamodel_parser::
pr_entity_declaration_metamodel_parser_480_26_parse (galgas_scanner & lexique_var_) {
  switch (select_metamodel_parser_1 (lexique_var_)) {
    case 1 : {
      } break ;
    case 2 : {
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_abstract) ;
      } break ;
    default :
      break ;
  }
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_entity) ;
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_type_5Fname) ;
  switch (select_metamodel_parser_2 (lexique_var_)) {
    case 1 : {
      } break ;
    case 2 : {
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_extends) ;
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_type_5Fname) ;
      } break ;
    case 3 : {
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__28) ;
      { bool syntaxRepeat = true ;
        while (syntaxRepeat) {
            lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_type_5Fname) ;
            lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
          switch (select_repeat_metamodel_parser_3 (lexique_var_)) {
            case 2 : {
              lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__2C) ;
              } break ;
            default :
              syntaxRepeat = false ;
              break ;
          }
        }
      }
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__29) ;
      } break ;
    default :
      break ;
  }
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__7B) ;
  { bool syntaxRepeat = true ;
    while (syntaxRepeat) {
      switch (select_repeat_metamodel_parser_4 (lexique_var_)) {
        case 2 : {
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_type_5Fname) ;
          switch (select_metamodel_parser_5 (lexique_var_)) {
            case 1 : {
              lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__5B) ;
              lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__5D) ;
              lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
              } break ;
            case 2 : {
              lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3C) ;
              lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3E) ;
              lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
              } break ;
            case 3 : {
              lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
              } break ;
            default :
              break ;
          }
          switch (select_metamodel_parser_6 (lexique_var_)) {
            case 1 : {
              } break ;
            case 2 : {
              lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_insert) ;
              { bool syntaxRepeat = true ;
                while (syntaxRepeat) {
                    lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
                    switch (select_metamodel_parser_8 (lexique_var_)) {
                      case 1 : {
                        } break ;
                      case 2 : {
                        lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3C) ;
                        lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
                        lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3E) ;
                        } break ;
                      default :
                        break ;
                    }
                  switch (select_repeat_metamodel_parser_7 (lexique_var_)) {
                    case 2 : {
                      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__2C) ;
                      } break ;
                    default :
                      syntaxRepeat = false ;
                      break ;
                  }
                }
              }
              } break ;
            case 3 : {
              lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_search) ;
              lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
              lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_in) ;
              lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
              switch (select_metamodel_parser_9 (lexique_var_)) {
                case 1 : {
                  } break ;
                case 2 : {
                  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3C) ;
                  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
                  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3E) ;
                  } break ;
                default :
                  break ;
              }
              } break ;
            case 4 : {
              lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__28) ;
              { bool syntaxRepeat = true ;
                while (syntaxRepeat) {
                    switch (select_metamodel_parser_11 (lexique_var_)) {
                      case 1 : {
                        lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_self) ;
                        } break ;
                      case 2 : {
                        nt_property_path_parse (lexique_var_) ;
                        } break ;
                      default :
                        break ;
                    }
                  switch (select_repeat_metamodel_parser_10 (lexique_var_)) {
                    case 2 : {
                      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__2C) ;
                      } break ;
                    default :
                      syntaxRepeat = false ;
                      break ;
                  }
                }
              }
              lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__29) ;
              } break ;
            default :
              break ;
          }
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3B) ;
          } break ;
        case 3 : {
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_relation) ;
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__5B) ;
          { bool syntaxRepeat = true ;
            while (syntaxRepeat) {
                lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
                lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3A) ;
                lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
              switch (select_repeat_metamodel_parser_12 (lexique_var_)) {
                case 2 : {
                  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__2C) ;
                  } break ;
                default :
                  syntaxRepeat = false ;
                  break ;
              }
            }
          }
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__5D) ;
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3A_3D) ;
          nt_entity_relation_expression_parse (lexique_var_) ;
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3B) ;
          } break ;
        case 4 : {
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_override) ;
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_relation) ;
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3A_3D) ;
          nt_entity_relation_expression_parse (lexique_var_) ;
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3B) ;
          } break ;
        default :
          syntaxRepeat = false ;
          break ;
      }
    }
  }
  lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__7D) ;
}

//---------------------------------------------------------------------------*
//                                                                           *
//            Implementation of production rule 'property_path'              *
//                                                                           *
//---------------------------------------------------------------------------*

void metamodel_parser::
metamodel_parser::
pr_property_path_metamodel_parser_750_21_ (galgas_scanner & lexique_var_,
                                GGS_L_propertyPath  &var_cas_outPath) {
  var_cas_outPath = GGS_L_propertyPath::constructor_empty (HERE) ;
  { bool syntaxRepeat = true ;
    while (syntaxRepeat) {
        switch (select_metamodel_parser_14 (lexique_var_)) {
          case 1 : {
            GGS_lstring  var_cas_pathElement ;
            lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
            var_cas_pathElement.defineAttribute (lexique_var_.tokenString, lexique_var_) ;
            var_cas_outPath.addAssign_operation (var_cas_pathElement) ;
            } break ;
          case 2 : {
            GGS_lstring  var_cas_pathElement ;
            lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_type_5Fname) ;
            var_cas_pathElement.defineAttribute (lexique_var_.tokenString, lexique_var_) ;
            var_cas_outPath.addAssign_operation (GGS_lstring::constructor_new (((GGS_string (true, ".")) + (var_cas_pathElement.reader_value ())), var_cas_pathElement.reader_location () COMMA_HERE)) ;
            } break ;
          default :
            break ;
        }
      switch (select_repeat_metamodel_parser_13 (lexique_var_)) {
        case 2 : {
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__2E) ;
          } break ;
        default :
          syntaxRepeat = false ;
          break ;
      }
    }
  }
}

//---------------------------------------------------------------------------*

void metamodel_parser::
pr_property_path_metamodel_parser_750_21_parse (galgas_scanner & lexique_var_) {
  { bool syntaxRepeat = true ;
    while (syntaxRepeat) {
        switch (select_metamodel_parser_14 (lexique_var_)) {
          case 1 : {
            lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
            } break ;
          case 2 : {
            lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_type_5Fname) ;
            } break ;
          default :
            break ;
        }
      switch (select_repeat_metamodel_parser_13 (lexique_var_)) {
        case 2 : {
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__2E) ;
          } break ;
        default :
          syntaxRepeat = false ;
          break ;
      }
    }
  }
}

//---------------------------------------------------------------------------*
//                                                                           *
//      Implementation of production rule 'entity_relation_expression'       *
//                                                                           *
//---------------------------------------------------------------------------*

void metamodel_parser::
metamodel_parser::
pr_entity_relation_expression_metamodel_parser_771_34_ (galgas_scanner & lexique_var_,
                                GGS_relationVarMap  &var_cas_ioRelationVariableMap,
                                GGS_indexMap  &var_cas_ioIndexMap,
                                GGS_metamodelRelationExpression  &var_cas_outExpression) {
  nt_entity_relation_term_ (lexique_var_, var_cas_ioRelationVariableMap, var_cas_ioIndexMap, var_cas_outExpression) ;
  { bool syntaxRepeat = true ;
    while (syntaxRepeat) {
      switch (select_repeat_metamodel_parser_15 (lexique_var_)) {
        case 2 : {
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__7C) ;
          GGS_metamodelRelationExpression  var_cas_e ;
          nt_entity_relation_term_ (lexique_var_, var_cas_ioRelationVariableMap, var_cas_ioIndexMap, var_cas_e) ;
          var_cas_outExpression = GGS_metamodelRelationOr::constructor_new (var_cas_outExpression, var_cas_e COMMA_HERE) ;
          } break ;
        default :
          syntaxRepeat = false ;
          break ;
      }
    }
  }
}

//---------------------------------------------------------------------------*

void metamodel_parser::
pr_entity_relation_expression_metamodel_parser_771_34_parse (galgas_scanner & lexique_var_) {
  nt_entity_relation_term_parse (lexique_var_) ;
  { bool syntaxRepeat = true ;
    while (syntaxRepeat) {
      switch (select_repeat_metamodel_parser_15 (lexique_var_)) {
        case 2 : {
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__7C) ;
          nt_entity_relation_term_parse (lexique_var_) ;
          } break ;
        default :
          syntaxRepeat = false ;
          break ;
      }
    }
  }
}

//---------------------------------------------------------------------------*
//                                                                           *
//         Implementation of production rule 'entity_relation_term'          *
//                                                                           *
//---------------------------------------------------------------------------*

void metamodel_parser::
metamodel_parser::
pr_entity_relation_term_metamodel_parser_788_28_ (galgas_scanner & lexique_var_,
                                GGS_relationVarMap  &var_cas_ioRelationVariableMap,
                                GGS_indexMap  &var_cas_ioIndexMap,
                                GGS_metamodelRelationExpression  &var_cas_outExpression) {
  nt_entity_relation_factor_ (lexique_var_, var_cas_ioRelationVariableMap, var_cas_ioIndexMap, var_cas_outExpression) ;
  { bool syntaxRepeat = true ;
    while (syntaxRepeat) {
      switch (select_repeat_metamodel_parser_16 (lexique_var_)) {
        case 2 : {
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__26) ;
          GGS_metamodelRelationExpression  var_cas_e ;
          nt_entity_relation_factor_ (lexique_var_, var_cas_ioRelationVariableMap, var_cas_ioIndexMap, var_cas_e) ;
          var_cas_outExpression = GGS_metamodelRelationOr::constructor_new (var_cas_outExpression, var_cas_e COMMA_HERE) ;
          } break ;
        default :
          syntaxRepeat = false ;
          break ;
      }
    }
  }
}

//---------------------------------------------------------------------------*

void metamodel_parser::
pr_entity_relation_term_metamodel_parser_788_28_parse (galgas_scanner & lexique_var_) {
  nt_entity_relation_factor_parse (lexique_var_) ;
  { bool syntaxRepeat = true ;
    while (syntaxRepeat) {
      switch (select_repeat_metamodel_parser_16 (lexique_var_)) {
        case 2 : {
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__26) ;
          nt_entity_relation_factor_parse (lexique_var_) ;
          } break ;
        default :
          syntaxRepeat = false ;
          break ;
      }
    }
  }
}

//---------------------------------------------------------------------------*
//                                                                           *
//        Implementation of production rule 'entity_relation_factor'         *
//                                                                           *
//---------------------------------------------------------------------------*

void metamodel_parser::
metamodel_parser::
pr_entity_relation_factor_metamodel_parser_805_30_ (galgas_scanner & lexique_var_,
                                GGS_relationVarMap  &var_cas_ioRelationVariableMap,
                                GGS_indexMap  &var_cas_ioIndexMap,
                                GGS_metamodelRelationExpression  &var_cas_outExpression) {
  switch (select_metamodel_parser_17 (lexique_var_)) {
    case 1 : {
      nt_entity_relation_primary_ (lexique_var_, var_cas_ioRelationVariableMap, var_cas_ioIndexMap, var_cas_outExpression) ;
      } break ;
    case 2 : {
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_not) ;
      nt_entity_relation_primary_ (lexique_var_, var_cas_ioRelationVariableMap, var_cas_ioIndexMap, var_cas_outExpression) ;
      var_cas_outExpression = GGS_metamodelRelationNot::constructor_new (var_cas_outExpression COMMA_HERE) ;
      } break ;
    default :
      break ;
  }
}

//---------------------------------------------------------------------------*

void metamodel_parser::
pr_entity_relation_factor_metamodel_parser_805_30_parse (galgas_scanner & lexique_var_) {
  switch (select_metamodel_parser_17 (lexique_var_)) {
    case 1 : {
      nt_entity_relation_primary_parse (lexique_var_) ;
      } break ;
    case 2 : {
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_not) ;
      nt_entity_relation_primary_parse (lexique_var_) ;
      } break ;
    default :
      break ;
  }
}

//---------------------------------------------------------------------------*
//                                                                           *
//       Implementation of production rule 'entity_relation_primary'         *
//                                                                           *
//---------------------------------------------------------------------------*

void metamodel_parser::
metamodel_parser::
pr_entity_relation_primary_metamodel_parser_821_31_ (galgas_scanner & lexique_var_,
                                GGS_relationVarMap  &var_cas_ioRelationVariableMap,
                                GGS_indexMap  &var_cas_ioIndexMap,
                                GGS_metamodelRelationExpression  &var_cas_outExpression) {
  switch (select_metamodel_parser_18 (lexique_var_)) {
    case 1 : {
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_true) ;
      var_cas_outExpression = GGS_metamodelRelationTrue::constructor_new (HERE) ;
      } break ;
    case 2 : {
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_false) ;
      var_cas_outExpression = GGS_metamodelRelationFalse::constructor_new (HERE) ;
      } break ;
    case 3 : {
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__28) ;
      nt_entity_relation_expression_ (lexique_var_, var_cas_ioRelationVariableMap, var_cas_ioIndexMap, var_cas_outExpression) ;
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__29) ;
      } break ;
    case 4 : {
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__7B) ;
      GGS_lstring  var_cas_localVar ;
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
      var_cas_localVar.defineAttribute (lexique_var_.tokenString, lexique_var_) ;
      GGS_luint  var_cas_variableIndex ;
      GGS_lstring  var_cas_domainVariable ;
      var_cas_ioRelationVariableMap.methode_searchKeyAndGetIndex (lexique_var_, var_cas_localVar, var_cas_variableIndex, var_cas_domainVariable SOURCE_FILE_AT_LINE (842)) ;
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3D_3D) ;
      GGS_lstring  var_cas_indexVariableName ;
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
      var_cas_indexVariableName.defineAttribute (lexique_var_.tokenString, lexique_var_) ;
      GGS_lstring  var_cas_domainVariableFromIndex ;
      var_cas_ioIndexMap.methode_searchKey (lexique_var_, var_cas_indexVariableName, var_cas_domainVariableFromIndex SOURCE_FILE_AT_LINE (847)) ;
      if (((var_cas_domainVariable.reader_value ()) != (var_cas_domainVariableFromIndex.reader_value ())).isBuiltAndTrue ()) {
          var_cas_indexVariableName.reader_location ().signalGGSSemanticError (lexique_var_, ((((((((((((GGS_string (true, "this index refers to the '")) + (var_cas_domainVariableFromIndex.reader_value ()))) + (GGS_string (true, "' domain, while '")))) + (var_cas_localVar.reader_value ()))) + (GGS_string (true, "' relation variable refers to the '")))) + (var_cas_domainVariable.reader_value ()))) + (GGS_string (true, "' domain"))) SOURCE_FILE_AT_LINE (851)) ;
      }
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__7D) ;
      var_cas_outExpression = GGS_metamodelRelationPrimary::constructor_new (var_cas_ioRelationVariableMap, var_cas_localVar, var_cas_variableIndex, var_cas_indexVariableName, var_cas_domainVariable COMMA_HERE) ;
      } break ;
    case 5 : {
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_do) ;
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__28) ;
      GGS_L_propertyPath  var_cas_path ;
      nt_property_path_ (lexique_var_, var_cas_path) ;
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__5B) ;
      GGS_metamodelRelationParameterList  var_cas_parameterList ;
      var_cas_parameterList = GGS_metamodelRelationParameterList::constructor_empty (HERE) ;
      { bool syntaxRepeat = true ;
        while (syntaxRepeat) {
            GGS_lstring  var_cas_parameter ;
            lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
            var_cas_parameter.defineAttribute (lexique_var_.tokenString, lexique_var_) ;
            GGS_luint  var_cas_parameterIndex ;
            GGS_lstring  var_cas_domainVariable ;
            var_cas_ioRelationVariableMap.methode_searchKeyAndGetIndex (lexique_var_, var_cas_parameter, var_cas_parameterIndex, var_cas_domainVariable SOURCE_FILE_AT_LINE (867)) ;
            var_cas_parameterList.addAssign_operation (var_cas_parameter, var_cas_parameterIndex, var_cas_domainVariable) ;
          switch (select_repeat_metamodel_parser_19 (lexique_var_)) {
            case 2 : {
              lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__2C) ;
              } break ;
            default :
              syntaxRepeat = false ;
              break ;
          }
        }
      }
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__5D) ;
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3A) ;
      GGS_lbool  var_cas_operationIsAnd ;
      switch (select_metamodel_parser_20 (lexique_var_)) {
        case 1 : {
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__7C) ;
          var_cas_operationIsAnd = GGS_lbool::constructor_new (GGS_bool (true, false), GGS_location (lexique_var_) COMMA_HERE) ;
          } break ;
        case 2 : {
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__26) ;
          var_cas_operationIsAnd = GGS_lbool::constructor_new (GGS_bool (true, true), GGS_location (lexique_var_) COMMA_HERE) ;
          } break ;
        default :
          break ;
      }
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__29) ;
      var_cas_outExpression = GGS_metamodelRelationDo::constructor_new (var_cas_ioRelationVariableMap, var_cas_parameterList, var_cas_path, var_cas_operationIsAnd COMMA_HERE) ;
      } break ;
    default :
      break ;
  }
}

//---------------------------------------------------------------------------*

void metamodel_parser::
pr_entity_relation_primary_metamodel_parser_821_31_parse (galgas_scanner & lexique_var_) {
  switch (select_metamodel_parser_18 (lexique_var_)) {
    case 1 : {
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_true) ;
      } break ;
    case 2 : {
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_false) ;
      } break ;
    case 3 : {
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__28) ;
      nt_entity_relation_expression_parse (lexique_var_) ;
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__29) ;
      } break ;
    case 4 : {
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__7B) ;
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3D_3D) ;
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__7D) ;
      } break ;
    case 5 : {
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_do) ;
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__28) ;
      nt_property_path_parse (lexique_var_) ;
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__5B) ;
      { bool syntaxRepeat = true ;
        while (syntaxRepeat) {
            lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1_identifier) ;
          switch (select_repeat_metamodel_parser_19 (lexique_var_)) {
            case 2 : {
              lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__2C) ;
              } break ;
            default :
              syntaxRepeat = false ;
              break ;
          }
        }
      }
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__5D) ;
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__3A) ;
      switch (select_metamodel_parser_20 (lexique_var_)) {
        case 1 : {
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__7C) ;
          } break ;
        case 2 : {
          lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__26) ;
          } break ;
        default :
          break ;
      }
      lexique_var_.acceptTerminal (galgas_scanner::galgas_scanner_1__29) ;
      } break ;
    default :
      break ;
  }
}

//---------------------------------------------------------------------------*


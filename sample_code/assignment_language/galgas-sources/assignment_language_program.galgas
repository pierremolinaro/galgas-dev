

#--- Prologue routine
before {
}

#--- 'when' clauses
case . "assignment_language"
message "a source text file with the .assignment_language extension"
grammar assignment_language_grammar
?sourceFilePath:@lstring inSourceFile {
  var @programAST programAST
  grammar assignment_language_grammar in inSourceFile ?programAST
#--- Semantic analysis
  var @variableMap variableMap = .emptySharedMap
  var @instructionListForGeneration instructionListForGeneration = {}
  for (mInstruction) in  programAST.mProgramInstructionList do
    [mInstruction semanticAnalysis !?variableMap !?instructionListForGeneration]
  end
  [variableMap checkAutomatonStates !programAST.mEndOfSourceFile]
#--- Code generation
  generateCfile (
    ![inSourceFile stringByDeletingPathExtension] + ".c"
    !instructionListForGeneration
  )
}

#--- Epilogue routine
after {
}
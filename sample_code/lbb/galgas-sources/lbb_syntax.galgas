syntax lbb_syntax (lbb_lexique) {


rule <start_symbol> !@programAST outProgramAST {
  var boxTypeListAST = @boxTypeListAST {}
  var @boxInstanceListAST boxInstanceListAST = {}
  repeat
  while
    $identifier$ ?let @lstring boxTypeName
    $identifier$ ?let @lstring boxInstanceName
    ${$
    var connectionList = @connectionlistAST {}
    repeat
      $identifier$ ?let @lstring boxInstanceName
      $.$
      $identifier$ ?let @lstring portName
      connectionList += !boxInstanceName !portName
    while
      $,$
    end
    $}$
    boxInstanceListAST += !boxTypeName !boxInstanceName !connectionList
  while
    $type$
    $identifier$ ?let @lstring boxTypeName
    $=$
    var portNameList = @lstringlist {}
    repeat
      $identifier$ ?let @lstring portName
      portNameList += !portName
    while
      $,$
    end
    $;$
    boxTypeListAST += !boxTypeName !portNameList
  end
  outProgramAST = @programAST.new {
    !boxTypeListAST
    !boxInstanceListAST
    !@location.here}
}

}